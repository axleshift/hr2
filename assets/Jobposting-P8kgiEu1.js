import{r as e,R as t}from"./react-router-dom-BnDDw25P.js";import{l as a,f as l,i as n,v as r,w as s,r as m}from"./index-DXFVtbD_.js";import{z as c}from"./zod-B0zZW6rS.js";import{u as i}from"./react-hook-form-DGCwHb0C.js";import{s as o}from"./@hookform/resolvers/zod-B5rlnuQ9.js";import{F as p,H as d,I as u,J as E,K as f,L as j,M as g,N as S,O as b,P as y}from"./index.es-DFhey9wz.js";import{A as h}from"./AppPagination-vWC6_7LU.js";import{f as v,a as x,t as N}from"./index-BxAblS3e.js";import{C as M}from"./CContainer-CzB7k1pT.js";import{C as D,a as T}from"./CRow-DSqRsHFr.js";import{C,a as w,b as _}from"./CModalHeader-CKCWLB_J.js";import{C as q}from"./CModalTitle-RZUDuE-6.js";import{C as F,a as I,c as L,b as Y}from"./CFormInput-BzSWZSHN.js";import{C as J}from"./CFormTextarea-CmPGLOeR.js";import{C as R}from"./CFormCheck-BuOCTX0n.js";import{C as k}from"./CTooltip-BHXnOH2f.js";import{C as B}from"./CInputGroup-8Ah49MHR.js";import{C as A,a as P}from"./CCardBody-D4Qo47mg.js";import{C as $,a as z}from"./CListGroupItem-KexRmwJv.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./DefaultLayout-k-e4BEYF.js";import"./index.esm-JaDbXk68.js";import"./isRTL-D5ORmfro.js";import"./getTransitionDurationFromElement-2nBpLMKS.js";const O=()=>{const{addToast:O}=e.useContext(a),[G,H]=e.useState(!1),[K,Q]=e.useState(!1),[U,V]=e.useState(!1),[W,X]=e.useState("active"),[Z,ee]=e.useState([]),[te,ae]=e.useState([]),[le,ne]=e.useState(!1),[re,se]=e.useState(!1),[me,ce]=e.useState(""),[ie,oe]=e.useState(1),[pe,de]=e.useState(9),[ue,Ee]=e.useState(1),[fe,je]=e.useState("grid");new Date((new Date).setDate((new Date).getDate()+1)),new Date((new Date).setDate((new Date).getDate()-1));const ge=c.object({jpf_id:c.string().optional(),jpfTitle:c.string().min(1,{message:"Job Title is required"}),jpfType:c.string().min(1,{message:"Job Type is required"}),jpfDesc:c.string().min(1,{message:"Job Description is required"}),jpfSalaryMin:c.number().min(1,{message:"Minimum Salary is required"}).default(0),jpfSalaryMax:c.number().min(1,{message:"Maximum Salary is required"}).default(1),jpfLoc:c.string().min(1,{message:"Location is required"}),jpfBnft:c.string().min(1,{message:"Benefit is required"}),jpfReq:c.string().min(1,{message:"Requirement is required"}),jpfSchedStart:c.preprocess((e=>new Date(e)),c.date()),jpfSchedEnd:c.preprocess((e=>new Date(e)),c.date().min(new Date,{message:"End Date must be in the future"})),jpfStatus:c.string().optional()}).refine((e=>e.jpfSchedEnd>e.jpfSchedStart),{message:"End Date must be after Start Date",path:["jpfSchedEnd"]}).refine((e=>e.jpfSalaryMin<e.jpfSalaryMax),{message:"Minimum Salary must be less than Maximum Salary",path:["jpfSalaryMax"]}),{register:Se,reset:be,handleSubmit:ye,formState:{errors:he}}=i({resolver:o(ge)}),ve=async e=>{try{const t=await r(`/jobposting/${e}`);if(200===t.status){O("Jobposting",`Jobposting for ${e} retrieved`,"success"),V(!0),H(!0);const a={jpf_id:t.data.data._id,jpfTitle:t.data.data.title,jpfType:t.data.data.type,jpfDesc:t.data.data.description,jpfSalaryMin:t.data.data.salary_min,jpfSalaryMax:t.data.data.salary_max,jpfLoc:t.data.data.location,jpfBnft:t.data.data.benefits,jpfReq:t.data.data.requirements,jpfSchedStart:new Date(t.data.data.schedule_start).toISOString().split("T")[0],jpfSchedEnd:new Date(t.data.data.schedule_end).toISOString().split("T")[0],jpfStatus:t.data.status};be(a),window.scrollTo(0,0)}else O("Jobposting","Error getting jobposting","danger")}catch(t){O("Jobposting","Error getting jobposting","danger")}},xe=async(e,t)=>{try{ne(!0);const a=re?await r(`/jobposting/search?query=${me}&page=${e}&limit=${t}`):await r(`/jobposting?page=${e}&limit=${t}`);200===a.status||201===a.status?(ee(a.data.data),oe(a.data.currentPage),Ee(a.data.totalPages),H(!1),ne(!1)):(O("Jobposting "+a.status,a.message.message,"danger"),ne(!1),se(!1))}catch(a){}},Ne=c.object({jpSearchInput:c.string().min(1,{message:"Search query is required"})}),{register:Me,handleSubmit:De}=i({resolver:o(Ne)});return e.useEffect((()=>{const e=setTimeout((()=>{xe(ie,pe)}),500);return()=>clearTimeout(e)}),[ie,pe,re,me]),t.createElement(t.Fragment,null,t.createElement(M,null,t.createElement(D,{className:"mb-3"},t.createElement(T,null,t.createElement("h1",null,"Job Postings"),t.createElement("small",{className:"text-muted"},"In this page, you can view all the job posting data, create new job postings, and edit existing job postings."))),t.createElement(D,null,t.createElement(T,{className:"d-flex justify-content-end"},t.createElement("div",null,t.createElement(l,{type:"button",onClick:()=>H(!G),className:"btn btn-primary w-30"},"Create")))),t.createElement(D,{className:"mb-3"},t.createElement(T,null,t.createElement(C,{visible:G,size:"lg",backdrop:"static",onClose:()=>{H(!1),(()=>{V(!1),H(!1);const e={jpf_id:"",jpfTitle:"",jpfType:"",jpfDesc:"",jpfSalaryMin:0,jpfSalaryMax:1,jpfLoc:"",jpfBnft:"",jpfReq:"",jpfSchedStart:(new Date).toISOString().split("T")[0],jpfSchedEnd:(new Date).toISOString().split("T")[0],jpfStatus:"active"};be(e)})()}},t.createElement(w,null,t.createElement(q,null,t.createElement("div",null,U?"Edit Job Posting":"Create Job Posting",t.createElement("span",{className:"active"===W?"badge rounded-pill text text-success":"badge rounded-pill text text-danger"},"active"===W?"Active":"Inactive")))),t.createElement(_,null,t.createElement(F,{onSubmit:ye((async e=>{try{const t={title:e.jpfTitle||"none",type:e.jpfType||"none",salary_min:e.jpfSalaryMin||0,salary_max:e.jpfSalaryMax||1,location:e.jpfLoc||"none",description:e.jpfDesc||"none",requirements:e.jpfReq||"none",responsibilities:e.jpfResp||"none",benefits:e.jpfBnft||"none",schedule_start:e.jpfSchedStart,schedule_end:e.jpfSchedEnd,status:e.jpfStatus||"inactive"},a=U?await s(`/jobposting/${e.jpf_id}`,t):await m("/jobposting",t);201===a.status&&(O("Jobposting",a.data.message,"success"),xe(1),be())}catch(t){O("Jobposting","Error creating jobposting","danger")}}))},t.createElement(D,{className:"visually-hidden"},t.createElement("div",null,t.createElement(I,{type:"text",id:"jpf_id",...Se("jpf_id")}))),t.createElement(D,null,t.createElement("div",{className:"mb-3"},t.createElement(L,{htmlFor:"jpfTitle"},"Job Title"),t.createElement(I,{type:"text",id:"jpfTitle",placeholder:"e.g. Software Engineer",...Se("jpfTitle"),invalid:!!he.jpfTitle}),he.jpfTitle&&t.createElement(Y,{invalid:!0},he.jpfTitle.message))),t.createElement(D,null,t.createElement("div",{className:"mb-3"},t.createElement(L,{htmlFor:"jpfType"},"Job Type"),t.createElement(I,{type:"text",id:"jpfType",placeholder:"e.g. Full-time",...Se("jpfType"),invalid:!!he.jpfType}),he.jpfType&&t.createElement(Y,{invalid:!0},he.jpfType.message))),t.createElement(D,null,t.createElement("strong",null,"Salary")),t.createElement(D,null,t.createElement(T,null,t.createElement("div",{className:"mb-3"},t.createElement(L,{htmlFor:"jpfSalaryMin"},"Minimum"),t.createElement(I,{type:"number",id:"jpfSalaryMin",placeholder:"0",...Se("jpfSalaryMin",{valueAsNumber:!0}),invalid:!!he.jpfSalaryMin}),he.jpfSalaryMin&&t.createElement(Y,{invalid:!0},he.jpfSalaryMin.message))),t.createElement(T,null,t.createElement("div",{className:"mb-3"},t.createElement(L,{htmlFor:"jpfSalaryMax"},"Maximum"),t.createElement(I,{type:"number",id:"jpfSalaryMax",placeholder:"1",...Se("jpfSalaryMax",{valueAsNumber:!0}),invalid:!!he.jpfSalaryMax}),he.jpfSalaryMax&&t.createElement(Y,{invalid:!0},he.jpfSalaryMax.message)))),t.createElement(D,null,t.createElement("div",{className:"mb-3"},t.createElement(L,{htmlFor:"jpfLoc"},"Location"),t.createElement(I,{type:"text",id:"jpfLoc",placeholder:"e.g. Manila",...Se("jpfLoc"),invalid:!!he.jpfLoc}),he.jpfLoc&&t.createElement(Y,{invalid:!0},he.jpfLoc.message))),t.createElement(D,null,t.createElement("div",{className:"mb-3"},t.createElement(L,{htmlFor:"jpfDesc"},"Description"),t.createElement(J,{id:"jpfDesc",placeholder:"e.g. Job description details...",...Se("jpfDesc"),invalid:!!he.jpfDesc,className:"scalableCFormTextArea-200"}),he.jpfDesc&&t.createElement(Y,{invalid:!0},he.jpfDesc.message))),t.createElement(D,null,t.createElement("div",{className:"mb-3"},t.createElement(L,{htmlFor:"jpfBnft"},"Benefits"),t.createElement(J,{id:"jpfBnft",placeholder:"e.g. Dental Care",...Se("jpfBnft"),invalid:!!he.jpfBnft,className:"scalableCFormTextArea-200"}),he.jpfBnft&&t.createElement(Y,{invalid:!0},he.jpfBnft.message))),t.createElement(D,null,t.createElement("div",{className:"mb-3"},t.createElement(L,{htmlFor:"jpfReq"},"Requirements"),t.createElement(J,{id:"jpfReq",placeholder:"e.g. Identification Documents",...Se("jpfReq"),invalid:!!he.jpfReq,className:"scalableCFormTextArea-200"}),he.jpfReq&&t.createElement(Y,{invalid:!0},he.jpfReq.message))),t.createElement(D,null,t.createElement("strong",null,"Deployment Schedule"),t.createElement("p",{className:"text-muted small"},"These parameters determine the duration of the job posting.")),t.createElement(D,null,t.createElement(T,null,t.createElement("div",{className:"mb-3"},t.createElement(L,{htmlFor:"jpfSchedStart"},"Start"),t.createElement(I,{type:"date",id:"jpfSchedStart",...Se("jpfSchedStart"),invalid:!!he.jpfSchedStart}),he.jpfSchedStart&&t.createElement(Y,{invalid:!0},he.jpfSchedStart.message))),t.createElement(T,null,t.createElement("div",{className:"mb-3"},t.createElement(L,{htmlFor:"jpfSchedEnd"},"Expire"),t.createElement(I,{type:"date",id:"jpfSchedEnd",...Se("jpfSchedEnd"),invalid:!!he.jpfSchedEnd}),he.jpfSchedEnd&&t.createElement(Y,{invalid:!0},he.jpfSchedEnd.message)))),t.createElement("hr",null),t.createElement(D,null,t.createElement("div",{className:"ml-5 mb-3 d-flex justify-content-end"},t.createElement(R,{type:"checkbox",id:"invalidCheck",label:"I've reviewed the job posting and checked that all is correct. ",checked:K,onChange:e=>{Q(e.target.checked)}}),t.createElement(Y,{invalid:!0},"You must agree before submitting."))),t.createElement(D,null,t.createElement(T,{className:"d-flex flex-row gap-2 justify-content-end"},t.createElement("div",null,U&&t.createElement(k,{content:"Print (unavailable)",placement:"top"},t.createElement(l,{type:"button",className:"btn btn-info w-30"},t.createElement(p,{icon:d})))),t.createElement("div",null,t.createElement(l,{color:"primary",type:"submit",disabled:!K},le?t.createElement(n,{color:"primary"}):U?"Update":"Add"))))))))),t.createElement(D,{className:"d-flex mb-3 ustify-content-between align-items-center"},t.createElement(M,null,t.createElement(F,{onSubmit:De((async e=>{try{se(!0),ne(!0),ce(e.jpSearchInput),xe(1,pe)}catch(t){ne(!1),se(!1)}})),className:"d-flex flex-row gap-2 justify-content-end align-items-center"},t.createElement(B,null,t.createElement(I,{type:"text",id:"jpSearchInput",placeholder:"...",...Me("jpSearchInput"),invalid:!!he.jpSearchInput}),t.createElement(k,{content:"Search",placement:"top"},t.createElement(l,{type:"submit",className:"btn btn-primary"},t.createElement(p,{icon:u}))),t.createElement(k,{content:"Reset",placement:"top"},t.createElement(l,{onClick:()=>(se(!1),ce(""),void xe(1,pe)),type:"button",className:"btn btn-primary"},t.createElement(p,{icon:E}))))))),t.createElement(D,null,le?t.createElement("div",{className:"pt-3 text-center"},t.createElement(n,{color:"primary",variant:"grow"})):t.createElement("div",null,"grid"===fe?t.createElement(D,{xs:{cols:1},md:{cols:3},className:"g-3"},Z.map((e=>e?t.createElement(T,{key:e._id},t.createElement(A,{className:"position-relative h-100"},t.createElement(P,null,t.createElement("h4",{className:"fw-bold text-capitalize"},e.title),t.createElement("div",null,t.createElement(p,{icon:f,className:"me-2"}),t.createElement("small",{className:"text-muted text-capitalize"},e.location)),t.createElement("div",null,t.createElement(p,{icon:j,className:"me-2"}),"active"===e.status?t.createElement("small",{className:"text-success"},"Active"):t.createElement("small",{className:"text-danger"},"Inactive")),t.createElement("div",null,t.createElement(p,{icon:g,className:"me-2"}),t.createElement("small",{className:"text-muted"},v(e.schedule_start,"MMM D, YYYY")," -"," ",v(e.schedule_end,"MMM D, YYYY"))),t.createElement("div",null,t.createElement(p,{icon:S,className:"me-2"}),t.createElement("small",{className:"text-muted"},x(e.salary_min)," - ",x(e.salary_max))),t.createElement("br",null),t.createElement("div",null,t.createElement("strong",null,"Description"),t.createElement("br",null),t.createElement("small",{className:"text-muted"},N(e.description,150))),t.createElement("br",null),t.createElement("div",{className:"d-flex justify-content-end"},t.createElement(l,{onClick:()=>ve(e._id),className:"btn btn-primary"},t.createElement(p,{icon:b,className:"me-2"}),"Edit"))))):t.createElement("div",{key:Math.random()},"Loading")))):t.createElement($,null,Z.map((e=>e?t.createElement(z,{key:e._id},t.createElement(M,null,t.createElement(D,null,t.createElement(T,null,t.createElement("h4",{className:"fw-bold text-capitalize"},e.title))),t.createElement(D,null,t.createElement(T,null,t.createElement("div",null,t.createElement(p,{icon:f,className:"me-2"}),t.createElement("small",{className:"text-muted text-capitalize"},e.location)),t.createElement("div",null,t.createElement(p,{icon:j,className:"me-2"}),"active"===e.status?t.createElement("small",{className:"text-success"},"Active"):t.createElement("small",{className:"text-danger"},"Inactive")),t.createElement("div",null,t.createElement(p,{icon:g,className:"me-2"}),t.createElement("small",{className:"text-muted"},v(e.schedule_start,"MMM D, YYYY")," -"," ",v(e.schedule_end,"MMM D, YYYY"))),t.createElement("div",null,t.createElement(p,{icon:y,className:"me-2"}),t.createElement("small",{className:"text-muted"},x(e.salary_min)," -"," ",x(e.salary_max))),t.createElement("br",null)),t.createElement(T,null,t.createElement("div",null,t.createElement("div",null,t.createElement("strong",null,"Description"),t.createElement("br",null),t.createElement("small",{className:"text-muted"},N(e.description,150))),t.createElement("br",null),t.createElement("div",{className:"d-flex justify-content-end"},t.createElement(l,{onClick:()=>ve(e._id),className:"btn btn-primary"},t.createElement(p,{icon:b,className:"me-2"}),"Edit"))))))):null)))),t.createElement("div",{className:"mt-3 d-flex flex-row gap-2 justify-content-center align-items-center"},t.createElement(h,{currentPage:ie,totalPages:ue||1,onPageChange:oe})))))};export{O as default};
