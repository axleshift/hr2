import{r as e,f as t}from"./react-router-dom-BnDDw25P.js";import{g as r}from"./react-BF1r7_8g.js";import{C as a}from"./index.esm-Dwb_M0UQ.js";import{g as n,C as i,c as l}from"./WidgetsDropdown-CHL7HVxE.js";import{a as c,p as s,j as o,F as d,g as h,x as m}from"./index-DiLnYbjC.js";import{C as p}from"./index.esm-DSNrd3Xh.js";import{f as b,a as u}from"./index-BOi-5bX2.js";import{C as y,a as f}from"./CRow-BNc0QFWW.js";import{C as g,a as v}from"./CCardBody-BlNAuiwx.js";import{C as x,a as N,b as w,c as A,d as j,e as C}from"./CTable-Bp7z3h6O.js";import{C as D}from"./DefaultLayout-Cau2R5kl.js";import{C as E}from"./CCardHeader-RwHMwrzp.js";import"./react-dom-DgB6LS8R.js";import"./CContainer-DzOuZpEx.js";import"./index.es-BUpMRE3D.js";import"./isRTL-D5ORmfro.js";var T,S,k=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='272 434.744 272 209.176 240 209.176 240 434.744 188.118 382.862 165.49 405.489 256 496 346.51 405.489 323.882 382.862 272 434.744' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M400,161.176c0-79.4-64.6-144-144-144s-144,64.6-144,144a96,96,0,0,0,0,192h80v-32H112a64,64,0,0,1,0-128h32v-32a112,112,0,0,1,224,0v32h32a64,64,0,0,1,0,128H320v32h80a96,96,0,0,0,0-192Z' class='ci-primary'/>"],M={exports:{}};const $=r((T||(T=1,S=M,function(){var e={}.hasOwnProperty;function t(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,r(n)))}return e}function r(r){if("string"==typeof r||"number"==typeof r)return r;if("object"!=typeof r)return"";if(Array.isArray(r))return t.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var n="";for(var i in r)e.call(r,i)&&r[i]&&(n=a(n,i));return n}function a(e,t){return t?e?e+" "+t:e+t:e}S.exports?(t.default=t,S.exports=t):window.classNames=t}()),M.exports)),F=({labels:t,datasets:r})=>{const a=e.useRef(null),{maxY:i,stepSize:l}=e.useMemo((()=>{const e=r.flatMap((e=>e.data)),t=Math.max(...e,0),a=50*Math.ceil(t/50)||250;return{maxY:a,stepSize:Math.ceil(a/5)}}),[r]);return e.useEffect((()=>{const e=()=>{if(a.current){const e=a.current.options.scales.x.grid,t=a.current.options.scales.x.ticks,r=a.current.options.scales.y.grid,i=a.current.options.scales.y.ticks;e.borderColor=n("--cui-border-color-translucent"),e.color=n("--cui-border-color-translucent"),t.color=n("--cui-body-color"),r.borderColor=n("--cui-border-color-translucent"),r.color=n("--cui-border-color-translucent"),i.color=n("--cui-body-color"),a.current.update()}};return document.documentElement.addEventListener("ColorSchemeChange",e),()=>document.documentElement.removeEventListener("ColorSchemeChange",e)}),[]),c(p,{ref:a,data:{labels:t,datasets:r},options:{maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{color:n("--cui-border-color-translucent"),drawOnChartArea:!1},ticks:{color:n("--cui-body-color")}},y:{beginAtZero:!0,max:i,grid:{color:n("--cui-border-color-translucent")},border:{color:n("--cui-border-color-translucent")},ticks:{color:n("--cui-body-color"),maxTicksLimit:5,stepSize:l}}},elements:{line:{tension:.4},point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}}}})};F.propTypes={labels:s.arrayOf(s.string).isRequired,datasets:s.arrayOf(s.object).isRequired};const R=()=>{var r,n,s,p;const T=t(),[S,M]=e.useState(null),R=new Date;new Date(R).setDate(R.getDate()-7);const J=new Date(R.getFullYear(),R.getMonth(),1);new Date(R.getFullYear(),R.getMonth()+1,0);const Y=e=>{switch(e){case"Applied":case"Job Offer":return"primary";case"Shortlisted":case"Hired / Deployment":return"success";case"Initial Interview":return"warning";case"Technical Interview":return"info";case"Panel Interview":return"danger";case"Behavioral Interview":return"dark";case"Final Interview":return"secondary";default:return"light"}};if(e.useEffect((()=>{(async()=>{try{const e=await m("/stats");M(e.data)}catch(e){}})()}),[]),!S)return c("div",{children:"Loading..."});const{applicants:{totalApplicants:_,recentApplicants:L,applicantsPerDay:O,applicantsThisMonth:P,currentStages:I},jobpostings:{totalJobPostings:z,recentJobs:H,activeJobPostings:B,expiredJobPostings:U,jobTypes:W},events:{totalEvents:Q,recentEvents:q,eventsPerDay:Z,eventsThisMonth:G,eventTypes:K,eventApprovalStatus:V,eventParticipants:X,eventCapacityUtilization:ee}}=S,te=[{title:"Total Applicants",value:`${_} Applicants`,color:"success"},{title:"Recent Applicants",value:`${L.length} Applicants`,percent:L.length/_*100,color:"warning"},{title:"Applicants This Month",value:`${P} Applicants`,percent:P/_*100,color:"info"},{title:"Total Events",value:`${Q} Events`,color:"warning"},{title:"Recent Events",value:`${q.length} Recent Events`,percent:q.length/_*100,color:"success"},{title:"Events This Month",value:`${G} Events`,percent:G/Q*100,color:"info"}];return L.map(((e,t)=>({user:{_id:e._id,name:`${e.firstname} ${e.lastname}`,qualification:e.highestQualification,experience:e.yearsOfExperience},jobAppliedFor:e.jobAppliedFor,activity:`Last updated: ${new Date(e.createdAt).toLocaleString()}`}))),o(d,{children:[c(y,{children:c(f,{children:c(g,{className:"mb-4",children:o(v,{children:[o(y,{children:[o(f,{sm:5,children:[c("h4",{id:"traffic",className:"card-title mb-0",children:"Applicant and Events Overview"}),c("div",{className:"small text-body-secondary",children:`${J.toLocaleString("default",{month:"long"})} ${J.getFullYear()}`})]}),c(f,{sm:7,className:"d-none d-md-block",children:c(h,{color:"primary",className:"float-end",children:c(a,{icon:k})})})]}),c(F,{...((e,t)=>{const r=(e=>{const t=new Date,r=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),a={};e.forEach((e=>{const t=new Date(e._id).getDate();a[t]=e.count}));const n=Array.from({length:r},((e,t)=>`${t+1}`)),i=n.map((e=>a[parseInt(e)]||0));return{labels:n,datasets:[{label:"Applicants per Day",backgroundColor:"rgba(0, 123, 255, 0.1)",borderColor:"#007bff",pointHoverBackgroundColor:"#007bff",borderWidth:2,data:i,fill:!0}]}})(e),a=(e=>{const t=new Date,r=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),a={};e.forEach((e=>{const t=new Date(e._id).getDate();a[t]=e.count}));const n=Array.from({length:r},((e,t)=>`${t+1}`)),i=n.map((e=>a[parseInt(e)]||0));return{labels:n,datasets:[{label:"Events per Day",backgroundColor:"rgba(255, 99, 132, 0.1)",borderColor:"#ff6384",pointHoverBackgroundColor:"#ff6384",borderWidth:2,data:i,fill:!0}]}})(t);return{labels:r.labels,datasets:[...r.datasets,...a.datasets]}})(O,Z)}),c("hr",{}),c(y,{xs:{cols:1,gutter:4},sm:{cols:2},lg:{cols:4},xl:{cols:5},className:"mb-2 text-center d-flex justify-content-center",children:te.map(((e,t,r)=>o(f,{className:$({"d-none d-xl-block":t+1===r.length}),children:[c("div",{className:"text-body-secondary",children:e.title}),o("div",{className:"fw-semibold text-truncate",children:[e.value," ",e.percent?"("+e.percent.toFixed(0)+"%)":""]}),e.percent?c(i,{thin:!0,className:"mt-2",color:e.color,value:e.percent}):c(i,{thin:!0,className:"mt-2",color:e.color,value:100})]},t)))})]})})})}),c(y,{xs:{cols:1,gutter:4},sm:{cols:2},lg:{cols:4},xl:{cols:5},className:"mb-3 text-center d-flex justify-content-center",children:I.map(((e,t)=>c(f,{className:$({"d-none d-xl-block":t+1===I.length}),children:c(g,{className:"text-center border-0 shadow-sm",color:Y(e._id),style:{maxWidth:"180px",margin:"0 auto"},children:o(v,{children:[c("div",{className:"fs-5 fw-bold",children:e.count}),c("div",{className:"text-muted small",children:e._id})]})})},t)))}),c(y,{children:c(f,{children:c("h6",{children:"Recent Applicants"})})}),c(y,{children:o(x,{align:"middle",className:"mb-0 border rounded",hover:!0,responsive:!0,children:[c(N,{className:"text-nowrap",children:o(w,{children:[c(A,{className:"bg-body-tertiary text-center",children:c(a,{icon:l})}),c(A,{className:"bg-body-tertiary",children:"User"}),c(A,{className:"bg-body-tertiary",children:"Qualification"}),c(A,{className:"bg-body-tertiary",children:"Experience"}),c(A,{className:"bg-body-tertiary",children:"Job Applied For"}),c(A,{className:"bg-body-tertiary",children:"Activity"}),c(A,{className:"bg-body-tertiary",children:"Actions"})]})}),c(j,{children:L.map(((e,t)=>o(w,{children:[c(C,{className:"text-center",children:e.avatar?c(D,{size:"md",status:"success"}):c(D,{size:"md",status:"warning"})}),c(C,{children:`${e.firstname} ${e.lastname}`}),c(C,{children:e.highestQualification}),o(C,{children:[e.yearsOfExperience," years"]}),c(C,{children:e.jobAppliedFor}),o(C,{children:["Last updated: ",b(e.createdAt)]}),c(C,{children:c(h,{size:"sm",color:"info",onClick:()=>(e=>{try{const t=e._id;T(`/applicant/profile/${t}`)}catch(t){}})(e),children:"Manage"})})]},t)))})]})}),o(y,{className:"mt-4",children:[c(f,{md:6,xl:3,children:o(g,{className:"mb-4",children:[c(E,{children:"Top Jobs Applied For"}),o(v,{children:[o("div",{className:"d-flex justify-content-between border-bottom py-1 fw-semibold text-muted",children:[c("span",{children:"Job Title"}),c("span",{children:"Applicants"})]}),null==(r=S.applicants)?void 0:r.histograms.jobAppliedFor.map(((e,t)=>o("div",{className:"d-flex justify-content-between border-bottom py-1",children:[c("span",{children:e._id||"Unknown"}),c("span",{className:"fw-semibold",children:e.count})]},t)))]})]})}),c(f,{md:6,xl:3,children:o(g,{className:"mb-4",children:[c(E,{children:"Top Qualifications"}),o(v,{children:[o("div",{className:"d-flex justify-content-between border-bottom py-1 fw-semibold text-muted",children:[c("span",{children:"Qualification"}),c("span",{children:"Applicants"})]}),null==(n=S.applicants)?void 0:n.histograms.qualifications.map(((e,t)=>o("div",{className:"d-flex justify-content-between border-bottom py-1",children:[c("span",{children:e._id||"Unknown"}),c("span",{className:"fw-semibold",children:e.count})]},t)))]})]})}),c(f,{md:6,xl:3,children:o(g,{className:"mb-4",children:[c(E,{children:"Graduation Year Distribution"}),o(v,{children:[o("div",{className:"d-flex justify-content-between border-bottom py-1 fw-semibold text-muted",children:[c("span",{children:"Year"}),c("span",{children:"Applicants"})]}),null==(s=S.applicants)?void 0:s.histograms.graduationYear.map(((e,t)=>o("div",{className:"d-flex justify-content-between border-bottom py-1",children:[c("span",{children:e._id}),c("span",{className:"fw-semibold",children:e.count})]},t)))]})]})}),c(f,{md:6,xl:3,children:o(g,{className:"mb-4",children:[c(E,{children:"Experience Breakdown"}),o(v,{children:[o("div",{className:"d-flex justify-content-between border-bottom py-1 fw-semibold text-muted",children:[c("span",{children:"Years"}),c("span",{children:"Applicants"})]}),null==(p=S.applicants)?void 0:p.histograms.yearsOfExperience.map(((e,t)=>o("div",{className:"d-flex justify-content-between border-bottom py-1",children:[c("span",{children:e._id}),c("span",{className:"fw-semibold",children:e.count})]},t)))]})]})})]}),c(y,{className:"mt-4",children:c(f,{children:c("h4",{children:"Jobpostings Overview"})})}),o(y,{children:[c(f,{md:6,xl:4,children:o(g,{className:"mb-4",children:[c(E,{children:"Total Job Postings"}),o(v,{children:[c("div",{className:"fs-4 fw-bold text-center",children:z}),c("div",{className:"text-body-secondary text-center",children:"All job postings created"})]})]})}),c(f,{md:6,xl:4,children:o(g,{className:"mb-4",children:[c(E,{children:"Active Job Postings"}),o(v,{children:[c("div",{className:"fs-4 fw-bold text-center",children:B}),c("div",{className:"text-body-secondary text-center",children:"Currently published and accepting applicants"})]})]})}),c(f,{md:6,xl:4,children:o(g,{className:"mb-4",children:[c(E,{children:"Expired Job Postings"}),o(v,{children:[c("div",{className:"fs-4 fw-bold text-center",children:U}),c("div",{className:"text-body-secondary text-center",children:"No longer active"})]})]})})]}),c(y,{children:c(f,{children:c("h6",{children:"Recent Job Postings"})})}),c(y,{className:"mb-3",children:o(x,{align:"middle",className:"mb-0 border rounded",hover:!0,responsive:!0,children:[c(N,{className:"text-nowrap",children:o(w,{children:[c(A,{className:"bg-body-tertiary",children:"Title"}),c(A,{className:"bg-body-tertiary",children:"Type"}),c(A,{className:"bg-body-tertiary",children:"Location"}),c(A,{className:"bg-body-tertiary",children:"Salary Range"}),c(A,{className:"bg-body-tertiary",children:"Status"}),c(A,{className:"bg-body-tertiary",children:"Created At"}),c(A,{className:"bg-body-tertiary",children:"Actions"})]})}),c(j,{children:H.map(((e,t)=>o(w,{children:[c(C,{children:e.title}),c(C,{children:e.type}),c(C,{children:e.location}),o(C,{children:[u(e.salary_min)," - ",u(e.salary_max)]}),c(C,{children:e.status||"â€”"}),c(C,{children:b(e.createdAt)}),c(C,{children:c(h,{size:"sm",color:"info",children:"Manage"})})]},t)))})]})}),c(y,{className:"mt-4",children:c(f,{children:c("h4",{children:"Events Overview"})})}),c(y,{children:c(f,{children:c("h6",{children:"Upcoming / Recent Events"})})}),c(y,{className:"mb-3",children:o(x,{align:"middle",className:"mb-0 border rounded",hover:!0,responsive:!0,children:[c(N,{className:"text-nowrap",children:o(w,{children:[c(A,{className:"bg-body-tertiary",children:"Name"}),c(A,{className:"bg-body-tertiary",children:"Type"}),c(A,{className:"bg-body-tertiary",children:"Date"}),c(A,{className:"bg-body-tertiary",children:"Available"}),c(A,{className:"bg-body-tertiary",children:"Facility"}),c(A,{className:"bg-body-tertiary",children:"Created At"})]})}),c(j,{children:q.map(((e,t)=>o(w,{children:[c(C,{children:e.name}),c(C,{children:e.type}),c(C,{children:b(e.date)}),c(C,{children:e.isAvailable?"Yes":"No"}),c(C,{children:e.facility.name}),c(C,{children:b(e.createdAt)})]},t)))})]})})]})};export{R as default};
