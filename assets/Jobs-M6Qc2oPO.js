import{F as e,B as r,C as a}from"./index.es-DNrzUf6T.js";import{r as t}from"./react-router-dom-BnDDw25P.js";import{A as i,a as s,F as o,j as n,g as c,k as l,w as d}from"./index-DVAAnj-9.js";import{t as m}from"./index-DCO1bnrX.js";import{A as h}from"./AppPagination-D5Gejofw.js";import{J as p}from"./JobForm-BX-wSo9F.js";import{C as u}from"./CContainer-C-7WEMUq.js";import{C as f,a as j}from"./CRow-Dujfgc-X.js";import{C}from"./CFormLabel-C3ZNjviW.js";import{C as g}from"./CInputGroup-DvwMqNE_.js";import{C as b}from"./CFormInput-DlNfdHmF.js";import{C as y,a as x}from"./CCardBody-D-rMfn6F.js";import{C as w,a as S,b as k,c as N,d as v,e as z}from"./CTable-PTB9eoDi.js";import{C as P}from"./CTooltip-BemHtZwS.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./zod-B0zZW6rS.js";import"./react-hook-form-DB8hWBdy.js";import"./@hookform/resolvers/zod-1wp20Skh.js";import"./CModalHeader-D3Pijq-f.js";import"./DefaultLayout-BQRtu9S-.js";import"./index.esm-CRpYSObv.js";import"./isRTL-D5ORmfro.js";import"./CModalTitle-DWg7cv10.js";import"./CFormTextarea-R1STRuei.js";import"./CFormSelect-CvPrxnA6.js";const T=()=>{const{userInformation:T}=t.useContext(i),[$,F]=t.useState([]),[I,A]=t.useState(!1),[J,L]=t.useState(!1),[E,M]=t.useState({}),[R,V]=t.useState("view"),[_,q]=t.useState(""),[B,G]=t.useState(1),[H,U]=t.useState(9),[Y,D]=t.useState(0),[K,O]=t.useState(0),Q=async e=>{try{A(!0);const r=e?await d(`/job/all?query=${e}&page=${B}&limit=${H}&sort=desc`):await d(`/job/all?page=${B}&limit=${H}&sort=desc`);switch(r.status){case 200:A(!1),F(r.data.data),G(r.data.currentPage),U(r.data.itemsPerPage),D(r.data.totalPages);break;case 404:A(!1),F([]),G(0),U(0),D(0);break;default:throw new Error(`Unexpected status code: ${r.status}`)}}catch(r){}};return t.useEffect((()=>{const e=setTimeout((()=>{_?Q(_):Q()}),500);return()=>clearTimeout(e)}),[_,B,Y,K]),s(o,{children:n(u,{children:[s(f,{className:"mb-3",children:n(j,{children:[s("h2",{children:"Jobs"}),s("small",{children:"You can management job request in this page or make your own that can be used as base for jobposting."})]})}),s(f,{children:s(j,{className:"mb-3 d-flex justify-content-end",children:s(c,{color:"primary",size:"sm",onClick:()=>{L(!0),V("create")},children:"Create"})})}),s(f,{className:"mb-3",children:s(j,{children:s(C,{children:n(g,{type:"text",id:"searchInput",name:"searchInput",placeholder:"Search...",children:[s(b,{}),s(c,{color:"primary",size:"sm",children:s(e,{icon:r})}),s(c,{color:"primary",size:"sm",onClick:()=>Q(),children:s(e,{icon:a})})]})})})}),s(f,{className:"mb-3",children:s(j,{children:s(y,{children:s(x,{children:n(w,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[s(S,{children:n(k,{children:[s(N,{children:"#"}),s(N,{children:"Title"}),s(N,{children:"Capacity"}),s(N,{children:"Author"}),s(N,{children:"Actions"})]})}),s(v,{children:I?s(k,{children:s(z,{colSpan:"12",children:n("div",{className:"d-flex justify-content-center",children:[s(l,{size:"sm"})," ",s("span",{children:"Loading..."})]})})}):0===$.length?s(k,{children:s(z,{colSpan:"12",children:s("div",{className:"d-flex justify-content-center",children:"No Jobs found."})})}):$.map((e=>n(k,{children:[s(P,{position:"top",content:e._id,children:s(z,{children:m(e._id,10)})}),s(z,{children:e.title}),s(z,{children:e.capacity}),n(z,{children:["string"==typeof e.author?e.author:e.author&&e.author.firstname?`${e.author.firstname} ${e.author.lastname}`:"Unknown"," "]}),s(z,{children:n("div",{className:"d-flex flex-row gap-2",children:[s(c,{color:"primary",size:"sm",onClick:()=>{M(e),L(!0),V("edit")},children:"Edit"}),s(c,{color:"primary",size:"sm",onClick:()=>{M(e),L(!0),V("view")},children:"View"}),["admin","manager","recruiter"].includes(T.role)&&s(c,{color:"warning",size:"sm",onClick:()=>{M(e),L(!0),V("edit")},children:"Manage"})]})})]},e._id)))})]})})})})}),s(f,{children:s(j,{children:s("div",{className:"d-flex flex-row gap-2 justify-content-center align-items-center",children:s(h,{currentPage:B,totalPages:Y,onPageChange:G})})})}),s(f,{children:s(j,{children:s(p,{isVisible:J,onClose:()=>{L(!1),Q()},state:R,job:E})})})]})})};export{T as default};
