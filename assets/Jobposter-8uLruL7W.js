import{r as e,h as t}from"./react-router-dom-BnDDw25P.js";import{m as a,a as i,F as r,j as s,g as l,w as n,v as c,y as o}from"./index-C66lSxRl.js";import{u as d}from"./react-hook-form-DGCwHb0C.js";import{s as h}from"./@hookform/resolvers/zod-B5rlnuQ9.js";import{z as m}from"./zod-B0zZW6rS.js";import{F as p,Q as u,R as f,S as x,P as b,M as y,T as j,U as v}from"./index.es-DzFLx6Av.js";import{b as g}from"./index-WoleBHU6.js";import{a as w,f as C,t as N}from"./index-BVfmz2P_.js";import{C as T}from"./CContainer-DnAwT2KJ.js";import{C as S,a as F}from"./CRow-BC2jnXSR.js";import{C as P}from"./CTooltip-C7pMgaBa.js";import{C as O}from"./CCollapse-CaGI5R03.js";import{C as k}from"./DefaultLayout-BlBcqPq3.js";import{C as D}from"./CFormInput-7yAhRXCl.js";import{C as I}from"./CInputGroup-CRsaNImm.js";import{C as L}from"./CInputGroupText-CY7zJxur.js";import{C as _}from"./CFormTextarea-CUvmDkxd.js";import{C as $,b as E,a as R}from"./CFormLabel-CnrvBD9C.js";import{C as z,a as G}from"./CCardBody-oEpd84ML.js";import{C as q,a as A,b as J,c as B,d as H,e as M}from"./CTable-C_OnMufT.js";import{C as Q}from"./CButtonGroup-oKljj78G.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./isRTL-D5ORmfro.js";import"./index.esm-CoSUUeCw.js";const U=()=>{var U,V;const W={},{addToast:Y}=e.useContext(a),{id:K}=t(),[Z,X]=e.useState(!0),[ee,te]=e.useState(!0),[ae,ie]=e.useState([]),[re,se]=e.useState([]),[le,ne]=e.useState({jobposting:!0,jobposter:!0,tracker:!0}),[ce,oe]=e.useState({twitter:!1,facebook:!1}),de=async()=>{try{X(!0);const e=await n(`/jobposting/${K}`);200===e.status||201===e.status?(ie(e.data.data),X(!1)):X(!1)}catch(e){}},he=async()=>{try{te(!0);const e=await n(`/jobposter/${K}`);200!==e.status&&201!==e.status||(se(e.data.data),te(!1))}catch(e){te(!1)}},me=m.object({twitterText:m.string().min(1,{message:"Please enter a valid text"}).max(280,{message:"Max of 280 characters"}).optional()}),{register:pe,reset:ue,handleSubmit:fe,formState:{errors:xe}}=d({resolver:async(e,t,a)=>await h(me)(e,t,a)}),be=m.object({text:m.string().min(1,{message:"Please enter a valid text"}).optional()}),{register:ye,handleSubmit:je,formState:{errors:ve}}=d({resolver:async(e,t,a)=>await h(be)(e,t,a)});return e.useEffect((()=>{de(),he()}),[]),i(r,{children:Z?i("div",{children:"Loading..."}):s(T,{className:"d-flex flex-column gap-2 mb-3",children:[s(S,{children:[s(F,{children:[i("h2",{children:"Job Posting Details"}),i("small",{children:"This is the job posting details. It will show the details of the job posting."})]}),i(F,{className:"d-flex justify-content-end",children:i("div",{children:i(P,{content:le.jobposting?"Hide Job Posting Details":"Show Job Posting Details",placement:"top",children:i(l,{color:"primary",onClick:()=>{return e="jobposting",void ne({...le,[e]:!le[e]});var e},children:i(p,{icon:le.jobposting?u:f})})})})})]}),i(S,{children:i(F,{children:i(O,{visible:le.jobposting,children:s(T,{className:"d-flex flex-column gap-2",children:[i(S,{children:i(F,{children:i(P,{content:"active"===(null==(U=ae.status)?void 0:U.toLowerCase())?"This is an active job posting. This means that the job is currently open and accepting applications and have posted on social media.":"This is an inactive job posting. This means that the job posting is currently closed and not accepting applications.",placement:"top",children:i(k,{color:"active"===(null==(V=ae.status)?void 0:V.toLowerCase())?"success":"danger",className:"text-capitalize",children:ae.status})})})}),s(S,{children:[i(F,{children:i(D,{id:"title",name:"title",label:"Title",value:ae.title,readOnly:!0})}),i(F,{children:i(D,{id:"type",name:"type",label:"Type",value:ae.type,readOnly:!0})})]}),s(S,{children:[s(F,{children:[i("label",{htmlFor:"",children:"Location"}),s(I,{className:"mt-2",children:[i(L,{children:i(p,{icon:x})}),i(D,{id:"location",name:"location",value:ae.location,readOnly:!0})]})]}),s(F,{children:[i("label",{htmlFor:"",children:"Salary"}),s(I,{className:"mt-2",children:[i(L,{children:i(p,{icon:b})}),i(D,{id:"salarymin",name:"salarymin",value:w(ae.salary_min),readOnly:!0}),i(D,{id:"salarymax",name:"salarymax",value:w(ae.salary_max),readOnly:!0})]})]})]}),i(S,{children:s(F,{children:[i("label",{htmlFor:"",children:"Description"}),i(_,{id:"description",name:"description",value:ae.description,readOnly:!0})]})}),i(S,{children:s(F,{children:[i("label",{htmlFor:"",children:"Responsibilities"}),i(_,{id:"responsibilities",name:"responsibilities",value:ae.responsibilities,readOnly:!0})]})}),i(S,{children:s(F,{children:[i("label",{htmlFor:"",children:"Requirements"}),i(_,{id:"requirements",name:"requirements",value:ae.requirements,readOnly:!0})]})}),i(S,{children:s(F,{children:[i("label",{htmlFor:"",children:"Benefits"}),i(_,{id:"benefits",name:"benefits",value:ae.benefits,readOnly:!0})]})}),i(S,{children:s(F,{children:[i("label",{htmlFor:"",children:"Schedule"}),s(I,{className:"mt-2",children:[i(L,{children:i(p,{icon:y})}),i(L,{children:"Start"}),i(D,{type:"date",id:"scheduleStart",name:"scheduleStart",value:C(ae.schedule_start),readOnly:!0}),i(L,{children:"End"}),i(D,{type:"date",id:"scheduleEnd",name:"scheduleEnd",value:C(ae.schedule_end),readOnly:!0})]})]})})]})})})}),i(S,{children:s(F,{children:[i("hr",{}),i(T,{children:s($,{onSubmit:fe((async e=>{try{const t={twitter:e.twitterText,facebook:e.facebookText};201===(await c(`/jobposter/${K}/post`,t)).status?(Y("Success","Posted successfully","success"),de(),he()):Y("Failed","Failed to post","danger")}catch(t){Y("Failed","Failed to post","danger")}})),className:"d-flex flex-column gap-2",classID:"twitterForm",ref:e=>W.twitterForm=e,children:[i("h2",{children:"Create Post"}),s("div",{children:[s(E,{className:"d-flex flex-row gap-2 justify-items-center align-items-center",children:[i(p,{icon:g,className:"text-info"}),i("strong",{children:"Create Twitter Post (280 characters)"})]}),i(_,{id:"twitterText",name:"twitterText",placeholder:"Twitter Post description..",defaultValue:`NOW HIRING! \n${ae.title}\nLocation: ${ae.location}\nSalary: ${w(ae.salary_min)} - ${w(ae.salary_max)}\n=====\nPM me for more details!`,...pe("twitterText"),invalid:!!xe.twitterText,className:"scalableCFormTextArea-200"}),i("small",{className:"text-muted",children:"If left blank, the default text will be used."}),i("br",{}),s("small",{className:"text-muted mb-3",children:["This summary will be posted on ",i("span",{className:"text-info",children:"twitter"}),", with a character limit of 280 characters. Due to this limitation, we recommend keeping the summary short and sweet."]}),xe.twitterText&&i(R,{invalid:!0,children:xe.twitterText.message})]}),i("div",{className:"d-flex justify-content-end",children:i(l,{color:"primary",type:"submit",className:"mb-3",children:"Post Tweet"})})]})})]})}),i(S,{children:i(F,{children:s(T,{children:[s("div",{children:[i("hr",{}),i("h2",{children:"Tracker"}),i("small",{children:"This is a tracker for the job posting. It will show the status of the job postings on various platforms."})]}),i(z,{children:i(G,{children:s(q,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[i(A,{children:s(J,{children:[i(B,{children:i("div",{className:"text-center",children:i("strong",{children:"#"})})}),i(B,{children:i("div",{className:"text-center",children:"Platform"})}),i(B,{children:i("div",{className:"text-center",children:"Posted"})}),i(B,{children:i("div",{className:"text-center",children:"Deleted"})}),i(B,{children:i("div",{className:"text-center",children:"Expires At"})}),i(B,{children:"Content "}),i(B,{children:i("div",{className:"text-center",children:"Actions"})})]})}),i(H,{children:ee?i(J,{children:i(M,{colSpan:"7",children:"Loading..."})}):re.map(((e,t)=>e?s(J,{children:[i(M,{children:i(P,{content:e._id,placement:"top",children:i("div",{className:"text-capitalize text-center",children:N(e._id,2)})})}),i(M,{children:i("div",{className:"text-capitalize text-center",children:e.platform})}),i(M,{className:"text-center",children:e.isPosted?i(k,{color:"success",children:"YES"}):i(k,{color:"danger",children:"NO"})}),i(M,{className:"text-center",children:e.isDeleted?i(k,{color:"success",children:"YES"}):i(k,{color:"danger",children:"NO"})}),i(M,{className:"text-center",children:i("span",{className:"text-info",children:C(e.expiresAt)})}),i(M,{children:i(P,{content:e.content,placement:"top",children:i("small",{children:N(e.content,50)})})}),i(M,{className:"text-center",children:s(Q,{children:[i(P,{content:"Delete",placement:"top",children:i(l,{color:"danger",onClick:()=>(async e=>{try{200===(await o(`/jobposter/${e}`)).status?(Y("Success","Deleted successfully","success"),de(),he()):Y("Failed","Failed to delete","danger"),he()}catch(t){}})(e._id),children:i(p,{icon:j})})}),i(P,{content:"Use as Template",placement:"top",children:i(l,{color:"info",onClick:()=>(async(e,t)=>{try{if("twitter"===t){const t={twitterText:e.content};oe((e=>({...e,twitter:!0}))),ue(t),Y("Success","Post Fetched","success"),W.twitterForm.scrollIntoView({behavior:"smooth"})}}catch(a){}})(e,e.platform),children:i(p,{icon:v})})})]})})]},e._id):null))})]})})})]})})})]})})};export{U as default};
