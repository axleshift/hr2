import{l as e,f as t,i as a,v as l,P as r}from"./index-B7GOa2VM.js";import{F as n,I as s,J as m,Z as c,f as o,r as i}from"./index.es-DuBIM0a-.js";import{r as d,R as p}from"./react-router-dom-BnDDw25P.js";import{A as u}from"./AppPagination-Dv-fpX9O.js";import{z as E}from"./zod-B0zZW6rS.js";import{u as f}from"./react-hook-form-DGCwHb0C.js";import{s as h}from"./@hookform/resolvers/zod-B5rlnuQ9.js";import{A as g}from"./ApplicantForm-Dcv7njaf.js";import{C as j}from"./CContainer-Cm5KmpuN.js";import{C,a as y}from"./CRow-Br3xIw5l.js";import{C as v,a as S,b as x}from"./CFormInput-XbKHKQ6a.js";import{C as T}from"./CInputGroup-CvVVsLPQ.js";import{C as b}from"./CTooltip-jIN1Mygx.js";import{C as w}from"./DefaultLayout-ChKxIIMN.js";import{C as N,a as k}from"./CCardBody-BBjnVtJK.js";import{C as F,a as _,b as A,c as P,d as I,e as R}from"./CTable-CkRzeAO8.js";import"./react-dom-DgB6LS8R.js";import"./react-BF1r7_8g.js";import"./Calendar-OipaX6s0.js";import"./index-BxAblS3e.js";import"./CModalHeader-Bl2A0-Cm.js";import"./CModalTitle-C6T0xl3w.js";import"./CTabList-CI9fyTum.js";import"./getTransitionDurationFromElement-2nBpLMKS.js";import"./isRTL-D5ORmfro.js";import"./index.esm-f6pRpclZ.js";const $=({theme:r})=>{const $="dark"===r,{addToast:D}=d.useContext(e),[L,z]=d.useState(!1),[H,M]=d.useState([]),[q,G]=d.useState(!1),[V,B]=d.useState([]),[J,K]=d.useState({}),[O,Q]=d.useState(!1),[W,X]=d.useState([]),[Y,Z]=d.useState(!1),[U,ee]=d.useState(""),[te,ae]=d.useState(1),[le,re]=d.useState(9),[ne,se]=d.useState(1),me=async(e,t,a)=>{try{G(!0);let r="";W.length>0&&(r=W.map((e=>`${e}`)).join(","));const n=Y?await l(`/applicant/search?query=${a}&page=${e}&limit=${t}&tags=${r}`):await l("/applicant/all");200===n.status?(B(n.data.data),se(n.data.totalPages),G(!1)):(D("Error","Failed to fetch data","danger"),G(!1))}catch(r){D("Error","Failed to fetch data","danger")}},ce=E.object({searchTerm:E.string().min(1,"Search term is required")}),{register:oe,handleSubmit:ie,formState:{errors:de}}=f({resolver:async(e,t,a)=>await h(ce)(e,t,a)});return d.useEffect((()=>{(async()=>{try{z(!0);const e="applicant",t=await l(`/tags/category/${e}`);200===t.status?(M(t.data.data),z(!1)):(D("Calendar | Applicants",t.message.message,"danger"),z(!1))}catch(e){D("Calendar | Applicants","Failed to fetch data","danger")}})();const e=setTimeout((()=>{me(te,le,U)}),300);return()=>clearTimeout(e)}),[te,le,Y,U]),p.createElement(p.Fragment,null,p.createElement(j,{className:"d-flex flex-column gap-3"},p.createElement(C,null,p.createElement(y,null,p.createElement("h2",null,"Applicants"),p.createElement("small",null,"In this page, you can view and edit the list of applicants which are waiting for the HR to schedule an interview or any event they need to attend."))),p.createElement(C,null,p.createElement(j,{className:"d-flex flex-column gap-3"},p.createElement(v,{onSubmit:ie((e=>{const{searchTerm:t}=e;B([]),ee(t),Z(!0),ae(1),me(te,le,t)}))},p.createElement(T,null,p.createElement(S,{type:"text",placeholder:"Search",...oe("searchTerm"),invalid:!!de.searchTerm}),p.createElement(b,{placement:"top",content:"Search"},p.createElement(t,{type:"submit",color:"primary"},p.createElement(n,{icon:s}))),p.createElement(b,{placement:"top",content:"Refresh"},p.createElement(t,{color:"primary",onClick:()=>(ee(""),Z(!1),ae(1),void me(te,le))},p.createElement(n,{icon:m})))),de.searchTerm&&p.createElement(x,{invalid:!0},de.searchTerm.message)),p.createElement("div",{className:"d-flex flex-wrap gap-2"},H.map((e=>p.createElement(b,{key:e._id,content:W.includes(e._id)?"Remove":"Add"},p.createElement(w,{onClick:()=>(e=>{if(W.includes(e)){const t=W.filter((t=>t!==e));X(t)}else X([...W,e])})(e._id),color:W.includes(e._id)?"success":"danger",className:"d-flex align-items-center justify-content-between"},e.name,W.includes(e._id)&&p.createElement(n,{icon:c,className:"ms-2"})))))))),p.createElement(C,null,p.createElement(j,null,p.createElement(N,null,p.createElement(k,null,p.createElement(F,{align:"middle",hover:!0,responsive:!0,striped:!0},p.createElement(_,null,p.createElement(A,null,p.createElement(P,null,p.createElement(n,{icon:o})),p.createElement(P,null,"Email"),p.createElement(P,null,"Phone"),p.createElement(P,null,"Tags"),p.createElement(P,null,"Action"))),p.createElement(I,null,q?p.createElement(A,null,p.createElement(R,{colSpan:5},p.createElement("div",{className:"pt-3 text-center"},p.createElement(a,{color:"primary",variant:"grow"})))):V.length>0?V.map((e=>p.createElement(A,{key:e._id},p.createElement(R,null,p.createElement("div",null,e.lastname,", ",e.firstname)),p.createElement(R,null,p.createElement("div",null,e.email)),p.createElement(R,null,p.createElement("div",null,e.phone)),p.createElement(R,null,p.createElement("div",{className:"d-flex gap-2"},e.tags.map(((e,t)=>p.createElement(w,{key:t,color:"primary"},H.find((t=>t._id===e))&&H.find((t=>t._id===e)).name))))),p.createElement(R,null,p.createElement(b,{placement:"top",content:"Schedule Interview for this applicant"},p.createElement(t,{onClick:()=>(async e=>{try{Q(!0);const t=V.find((t=>t._id===e));K(t)}catch(t){D("Error","Failed to fetch data","danger")}})(e._id),className:"btn btn-primary",size:"sm"},p.createElement(n,{icon:i}))))))):p.createElement(A,null,p.createElement(R,{colSpan:5},"No data available")))))))),p.createElement(C,null,p.createElement(y,null,p.createElement("div",{className:"d-flex justify-content-center align-items-center"},p.createElement(u,{currentPage:te,totalPages:ne,onPageChange:ae})))),p.createElement(C,null,p.createElement(y,null,p.createElement(g,{isVisible:O,onClose:()=>Q(!1),isDarkMode:$,applicantData:J})))))};$.propTypes={theme:r.string};export{$ as default};
