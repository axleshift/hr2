const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-Bfk4Ohxi.js","./Calendar-CzCejKxu.js","./index-D-GnuKZU.js","./react-router-dom-BnDDw25P.js","./react-BF1r7_8g.js","./react-dom-DgB6LS8R.js","./index-C7lYjtMO.css"])))=>i.map(i=>d[i]);
import{r as e,R as a}from"./react-router-dom-BnDDw25P.js";import{F as r,B as t,C as i,f as s,T as n,U as c}from"./index.es-BR7Rjtum.js";import{m as l,a as o,F as d,j as h,l as m,g as p,k as u,w as f,i as C,v as g,p as S}from"./index-D-GnuKZU.js";import{f as y,b as v,t as b}from"./index-DCO1bnrX.js";import{C as j,a as x,b as w}from"./CModalHeader-DQJDo40N.js";import{C as N}from"./CModalTitle-HFeZ3kaT.js";import{C as T}from"./CFormLabel-CNa7kd_d.js";import{C as _}from"./CContainer-m_k2ePgi.js";import{C as k,a as D}from"./CRow-Cw4eeKIx.js";import{C as E}from"./CFormSelect-BQ8Vu6il.js";import{C as z}from"./DefaultLayout-DhgmFM8H.js";import{C as A,a as F}from"./CCardBody-BNtC-I3D.js";import{C as I,a as R,b as P,c as $,d as L,e as M}from"./CTable-Dt26rGib.js";import{C as O}from"./CInputGroup-CgKedWGZ.js";import{C as V}from"./CFormInput-Dn-iE12k.js";import{C as B}from"./CTooltip-BDYXaFVj.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./index.esm-Bak_xBZl.js";import"./isRTL-D5ORmfro.js";const q=a.lazy((()=>C((()=>import("./index-Bfk4Ohxi.js")),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url))),H=({isVisible:a,onClose:r,isDarkMode:t,applicantData:i})=>{const{addToast:s}=e.useContext(l),[n,c]=e.useState([]),[C,S]=e.useState([]),[b,O]=e.useState([]),[V,B]=e.useState(""),[H,G]=e.useState(new Date),[W,Y]=e.useState([]),[J,K]=e.useState(!1),[Q,U]=e.useState(!1),X=async()=>{try{const e=await f(`/facilities/events/${V._id}/${H}`);200===e.status?S(e.data.data):S([])}catch(e){s("error",e.message,"Error")}},Z=async e=>{try{U(!0);const a=new FormData;a.append("applicantId",i._id);const r=await g(`/facilities/events/${e}/book`,a);200!==r.status&&201!==r.status||(s("Success","Applicant has been booked to the event","success"),X()),U(!1)}catch(a){s("error",a.message,"Error")}};return e.useEffect((()=>{V&&(H&&X(),(async()=>{try{const e=H.getMonth()+1,a=H.getFullYear(),r=await f(`/facilities/events/${V._id}/calendar-states?month=${e}&year=${a}`);c(r.data.data)}catch(e){s("error",e.message,"Error")}})()),(async()=>{try{const e=await f("/facilities/all");O(e.data.data)}catch(e){s("error",e.message,"Error")}})()}),[V,H]),o(d,{children:h(j,{visible:a,onClose:()=>{r(),B(""),S([]),c([])},size:"xl",backdrop:"static",children:[o(x,{children:h(N,{children:["Schedule an Event for ",i.firstname,", ",i.lastname]})}),o(w,{children:o(T,{children:h(_,{children:[h(k,{xs:{cols:1,gutter:2},md:{cols:2,gutter:4},children:[o(D,{children:h(E,{children:[o("option",{value:"",children:"Select Facility"}),b.map((e=>o("option",{value:e._id,onClick:()=>{B(e),G(new Date),c([])},children:e.name},e._id)))]})}),o(D,{children:o("p",{className:"text-muted",children:V?h(d,{children:[h("strong",{children:[V.location," "]}),o("br",{}),V.description]}):o("span",{className:"text-danger",children:"*Please select a facility first."})})})]}),o(k,{children:o(D,{children:o(z,{color:"warning",children:"Has Events"})})}),o(k,{className:"mb-3",children:o(D,{children:o(q,{onChange:e=>{const a=new Date(e.getTime()-6e4*e.getTimezoneOffset());G(a)},className:t?"calendar dark-mode":"calendar",defaultValue:new Date,tileClassName:({date:e})=>{const a=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0];return n.some((e=>e.startsWith(a)))?"has-events":null}})})}),"development"===m.env,o(k,{children:o(D,{children:o(A,{children:o(F,{children:o(k,{children:o(D,{children:h(I,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[o(R,{children:h(P,{children:[o($,{children:"Facilty"}),o($,{children:"Type"}),o($,{children:"Date"}),o($,{children:"Time"}),o($,{children:"Event"}),o($,{children:"Capacity"}),o($,{children:"Participants"}),o($,{children:"Actions"})]})}),o(L,{children:C.length>0?C.map((e=>h(P,{children:[o(M,{children:V.name}),o(M,{children:V.type}),o(M,{children:y(e.date)}),h(M,{children:[v(e.timeslot.start)," -"," ",v(e.timeslot.end)]}),o(M,{children:e.name}),o(M,{children:e.capacity}),o(M,{children:e.participants.length}),o(M,{children:o("div",{className:"d-flex flex-row gap-2",children:e.participants.some((e=>e.applicant.toString()===i._id.toString()))?o(p,{color:"success",disabled:!0,className:"text-white",size:"sm",onClick:()=>Z(e._id),children:"Booked"}):o(p,{color:"info",className:"text-white",size:"sm",onClick:()=>Z(e._id),children:Q?o(u,{color:"light",size:"sm"}):"Book"})})})]},e._id))):o(P,{children:h(M,{colSpan:"12",className:"text-center",children:["No events available. Please select a date from the"," ",o("span",{className:"text-info",children:"calendar"}),"."]})})})]})})})})})})})]})})})]})})};H.propTypes={isVisible:S.bool.isRequired,isDarkMode:S.bool,onClose:S.func.isRequired,applicantData:S.object};const G=()=>{const{addToast:a}=e.useContext(l),[m,C]=e.useState([]),[g,S]=e.useState(!1),[y,v]=e.useState({}),[j,x]=e.useState(""),[w,N]=e.useState(!1),[E,q]=e.useState([]),[G,W]=e.useState([]),[Y,J]=e.useState(!1),[K,Q]=e.useState(1),[U,X]=e.useState(9),[Z,ee]=e.useState(0),[ae,re]=e.useState(0),[te,ie]=e.useState(!1),se=async()=>{try{S(!0);const e=await f("/applicant/category/shortlisted");C(e.data.data),S(!1)}catch(e){S(!1),a("Error","An error occurred","danger")}};return e.useEffect((()=>{se(),(async()=>{try{const e="applicant",r=await f(`/tags/category/${e}`);200===r.status?q(r.data.data):a("Error","An error occurred","danger")}catch(e){a("Error","An error occurred","danger")}})()}),[]),o(d,{children:h(_,{children:[o(k,{className:"mb-3",children:h(D,{children:[o("h2",{children:"Shortlisted"}),h("small",{children:["In this page, you can ",o("span",{className:"text-info",children:"view"})," and"," ",o("span",{className:"text-danger",children:"remove"})," applicants from being qualified for the job. As well as"," ",o("span",{className:"text-primary",children:"schedule an APPLICANT for an interview"}),"."]})]})}),o(k,{className:"mb-3",children:o(D,{children:o(T,{children:h(O,{children:[o(V,{type:"search",placeholder:"Search...","aria-label":"Search"}),o(p,{type:"button",color:"primary",children:o(r,{icon:t})}),o(p,{type:"button",color:"primary",onClick:()=>se(),children:o(r,{icon:i})})]})})})}),o(k,{className:"mb-3",children:o(D,{children:o(A,{children:o(F,{children:h(I,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[o(R,{children:h(P,{children:[o($,{children:o("strong",{children:"#"})}),o($,{children:o(r,{icon:s})}),o($,{children:"Email"}),o($,{children:"Phone"}),o($,{children:"Tags"}),o($,{children:"Actions"})]})}),o(L,{children:g?o(P,{children:o(M,{colSpan:"6",children:o(u,{size:"sm"})})}):m.map(((e,a)=>h(P,{children:[o(M,{children:b(e._id,10)}),h(M,{children:[e.lastname,", ",e.firstname]}),o(M,{children:e.email}),o(M,{children:e.phone}),o(M,{children:o("div",{className:"d-flex flex-wrap",children:e.tags.map(((e,a)=>{var r;const t=null==(r=E.find((a=>a._id===e)))?void 0:r.name;return o(z,{shape:"rounded-pill",color:"primary",className:"me-1 mb-1",children:t},a)}))})}),o(M,{children:h("div",{className:"d-flex gap-2",children:[o(B,{content:"Remove from list",placement:"top",children:o(p,{color:"danger",size:"sm",children:o(r,{icon:n})})}),o(B,{content:"Schedule an interview",placement:"top",children:o(p,{color:"info",size:"sm",onClick:()=>{J(!0),v(e)},children:o(r,{icon:c})})})]})})]},a)))})]})})})})}),o(k,{}),o(k,{children:o(D,{children:o(H,{isVisible:Y,onClose:()=>J(!1),isDarkMode:!0,applicantData:y})})})]})})};export{G as default};
