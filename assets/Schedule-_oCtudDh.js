import{r,q as U,j as e}from"./index-BTqRlzNU.js";import{z as j,u as q,f as w,a as m,c as z,g as G}from"./index-CQgnhZE6.js";import{F as H,n as J}from"./DefaultLayout-0iBsoURn.js";import{C as S}from"./index.esm-DUs5EjL4.js";import{C as k,a as D}from"./CRow-CW1B0TsK.js";import{C as Y,a as K}from"./CCardBody-CuNyQdm_.js";import{C as Q}from"./CCardHeader-BEx_8av2.js";import{C as V}from"./CForm-s-jRDDLq.js";import{C as y}from"./CFormLabel-BCODsSJI.js";import{C as N}from"./CFormInput-C8AdvKAf.js";import{C as X}from"./CButtonGroup-IblmJUXg.js";import{a as P}from"./cil-user-BAdj4vKc.js";import{C as Z}from"./CTooltip-BYB7Nj9L.js";import{C as ee}from"./CCardFooter-BtpfoN25.js";import{C as te,a as c}from"./CPaginationItem-DqwP66dq.js";import"./CFormControlWrapper-BIy505T4.js";import"./CFormControlValidation-6c7fEoYD.js";import"./getRTLPlacement-BWaqstQ-.js";import"./getTransitionDurationFromElement-Cpu4p4hx.js";const ke=()=>{r.useState(!1);const[x,F]=r.useState([]),[E,f]=r.useState(!0),[a,u]=r.useState({start:new Date,end:new Date,today:new Date(new Date().setDate(new Date().getDate()-1)),tomorrow:new Date(new Date().setDate(new Date().getDate()+1)),nextWeek:new Date(new Date().setDate(new Date().getDate()+7))}),[d,L]=r.useState({active:!1,inactive:!1,all:!0}),[l,o]=r.useState(1),[C,se]=r.useState(9),[i,$]=r.useState(0),[I,W]=r.useState(0),[p,A]=r.useState([{color:"success",text:"active",isChecked:d.active},{color:"danger",text:"inactive",isChecked:d.inactive},{color:"warning",text:"both",isChecked:d.all}]),R=j.object({jpfSchedStart:j.date().optional(),jpfSchedEnd:j.date().optional()}).refine(t=>(console.log("Start Date:",t.jpfSchedStart,"End Date:",t.jpfSchedEnd),t.jpfSchedEnd>t.jpfSchedStart),{message:"End Date must be after Start Date",path:["jpfSchedEnd"]}),{register:ae,handleSubmit:T,formState:{errors:ne}}=q({resolver:z(R)}),v=async(t,s)=>{try{f(!0);const n=Object.keys(d).find(O=>d[O]===!0),h=await G(`/jobposting/scheduled?start=${a.today}&end=${a.nextWeek}&page=${t}&limit=${s}&sort=desc&filter=${n}`);F(h.data),o(h.currentPage),$(h.totalPages),W(h.total),f(!1)}catch(n){console.log(n),f(!1)}},_=U(),B=t=>{_(`/recruitment/jobposter/${t}`),console.log("Reviewing: ",t)},M=t=>{console.log("Legend: ",t);let s={active:!1,inactive:!1,all:!1};switch(t){case"active":s={active:!0,inactive:!1,all:!1};break;case"inactive":s={active:!1,inactive:!0,all:!1};break;case"both":s={active:!1,inactive:!1,all:!0};break;default:console.warn("Unknown legend:",t)}L(s),A(n=>n.map(g=>({...g,isChecked:g.text===t})))};r.useEffect(()=>{v(l,C),console.log("Legends: ",p)},[a,l,C,d,p]);const b=t=>{switch(console.log("Action: ",t),t){case"firstPage":o(1);break;case"prevPage":o(s=>s-1);break;case"nextPage":o(s=>s+1);break;case"lastPage":o(i);break;default:console.warn("Unknown action:",t)}};return e.jsx(e.Fragment,{children:e.jsx(S,{children:e.jsx(k,{children:e.jsx(S,{children:e.jsxs(Y,{children:[e.jsx(Q,{children:e.jsx("div",{className:"d-flex justify-content-between align-items-center",children:e.jsx("strong",{children:"Scheduled Job Postings"})})}),e.jsxs(K,{children:[e.jsx("p",{className:"text-muted",children:"You can view all scheduled job postings here. The system will not post the job posting until its given approval. by Default, the system will display all scheduled job postings from today to next week."}),e.jsx(V,{onSubmit:T(v),children:e.jsxs(k,{className:"d-flex gap-2 align-items-end",children:[e.jsxs(D,{children:[e.jsx(y,{htmlFor:"jpfSchedStart",children:"Start Date"}),e.jsx(N,{type:"date",id:"jpfSchedStart",name:"jpfSchedStart",value:w(a.today),onChange:t=>u({...a,today:t.target.value})})]}),e.jsxs(D,{children:[e.jsx(y,{htmlFor:"jpfSchedEnd",children:"End Date"}),e.jsx(N,{type:"date",id:"jpfSchedEnd",name:"jpfSchedEnd",value:w(a.nextWeek),onChange:t=>u({...a,nextWeek:t.target.value})})]})]})}),e.jsx("div",{children:e.jsx(X,{className:"d-flex flex-row gap-2 mt-3",children:p.map((t,s)=>e.jsxs("div",{className:"d-flex flex-row gap-2 d-flex align-items-center",children:[e.jsx(P,{onClick:()=>M(t.text),className:t.isChecked?`btn btn-${t.color}`:"btn btn-outline-secondary"}),e.jsx("div",{className:"text-lowercase text-muted text-small",children:t.text})]},s))})}),E?e.jsx("p",{children:"Loading..."}):e.jsxs("div",{children:[e.jsx("hr",{}),x&&x.length>0&&e.jsxs("div",{className:"mb-3 text-uppercase d-flex flex-row gap-2",children:[e.jsxs("div",{children:["Fetched total of ",I," job postings for"]}),e.jsx("span",{className:"text-info mx-2",children:m(a.today)}),"-",e.jsx("span",{className:"text-info mx-2",children:m(a.nextWeek)})]}),e.jsx("ul",{className:"list-group",children:x.length===0?e.jsxs("p",{className:"text-uppercase",children:["No scheduled jobpostings found for",e.jsx("span",{className:"text-info mx-2",children:m(a.today)}),"-",e.jsx("span",{className:"text-info mx-2",children:m(a.nextWeek)})]}):x.map((t,s)=>e.jsxs("li",{className:"list-group-item d-flex flex-row gap-2 justify-content-between align-items-center ",children:[e.jsx("div",{className:"d-flex flex-row gap-2",children:e.jsxs("div",{children:[e.jsx("strong",{children:t.title}),e.jsxs("div",{className:"text-muted d-flex flex-row gap-2 align-items-center",children:[e.jsx("div",{style:{width:"15px",height:"15px"},className:`rounded
                                                ${t.status==="active"?"bg-success":"bg-danger"}`}),e.jsxs("div",{children:[m(t.schedule_start)," -"," ",m(t.schedule_end)]})]})]})}),e.jsx(Z,{content:"Review",placement:"top",children:e.jsx(P,{type:"button",onClick:()=>B(t._id),className:"btn btn-primary d-flex flex-row gap-2 align-items-center",children:e.jsx(H,{icon:J})})})]},s))})]})]}),e.jsx(ee,{className:"d-flex justify-content-center",children:e.jsxs(te,{children:[e.jsx(c,{onClick:()=>b("firstPage"),disabled:l===1,children:"«"}),l>3&&e.jsxs(e.Fragment,{children:[e.jsx(c,{onClick:()=>o(1),children:"1"}),e.jsx(c,{disabled:!0,children:"..."})]}),[...Array(i)].map((t,s)=>{const n=s+1;return n>=l-2&&n<=l+2?e.jsx(c,{onClick:()=>o(n),active:l===n,children:n},s):null}),l<i-2&&e.jsxs(e.Fragment,{children:[l<i-3&&e.jsx(c,{disabled:!0,children:"..."}),e.jsx(c,{onClick:()=>o(i),children:i})]}),e.jsx(c,{onClick:()=>b("nextPage"),disabled:l===i,children:"»"})]})})]})})})})})};export{ke as default};
