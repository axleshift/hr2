import{r as o,j as e,p as O,B as f}from"./index-_TqtwX6w.js";import{F as d,w as U,x as V,j as X,y as J}from"./index.es-CwpE4QZf.js";import{A as K}from"./AppPagination-BXM69PRw.js";import{z as b,u as Q,t as W}from"./zod-B6dXel7S.js";import{C}from"./CContainer-kHbYGt-9.js";import{C as T,a as Y}from"./CRow-1Wab6Vg5.js";import{C as Z,a as ee,c as se}from"./CFormInput-BaUwCMph.js";import{C as ae}from"./CInputGroup-DzKxmTWQ.js";import{a as P}from"./CButton-CHC_VKcH.js";import{C as re}from"./CTooltip-8uBjs3Xh.js";import{a as v}from"./DefaultLayout-CEJXcaDW.js";import{C as te,a as oe}from"./CCardBody-BihuB_Cx.js";import{C as ce,a as ne,b as A,c as n,d as le,e as l}from"./CTable-DfJNz12r.js";import"./index.esm-Chq8dfYl.js";const ie=({theme:de})=>{const[me,m]=o.useState(!1),[h,F]=o.useState([]),[x,w]=o.useState([]),[he,_]=o.useState({}),[xe,N]=o.useState(!1),[c,S]=o.useState([]),[p,D]=o.useState(!1),[B,E]=o.useState(""),[i,j]=o.useState(1),[g,pe]=o.useState(9),[I,M]=o.useState(1),y=async(s,a)=>{try{let t="";c.length>0&&(t=c.map(G=>`tags=${G}`).join(",")),console.log("Tags",t),console.log("Search Term",B),console.log("Search Mode",p);const r=p?await f(`/applicant/search?page=${s}&limit=${a}&${t}`):await f("/applicant/all");r.status===200?(w(r.data.data),M(r.data.totalPages),j(r.data.currentPage)):console.log("Error",r),console.log(x)}catch(t){console.error(t)}},$=async s=>{try{N(!0);const a=x.find(t=>t._id===s);_(a)}catch(a){console.error(a)}},k=async()=>{try{m(!0);const a=await f("/tags/category/applicant");a.status===200?(F(a.data.data),m(!1)):(console.log("Failed"),m(!1))}catch(s){console.log(s)}},R=s=>{if(c.includes(s)){const t=c.filter(r=>r!==s);S(t)}else S([...c,s])},H=b.object({searchTerm:b.string().min(1,"Search term is required")}),{register:z,handleSubmit:L,formState:{errors:u}}=Q({resolver:async(s,a,t)=>{const r=await W(H)(s,a,t);return console.log("Validation result:",r),r}}),q=s=>{const{searchTerm:a}=s;E(a),D(!0),j(1),y(i,g)};return o.useEffect(()=>{y(i,g),k()},[i,g,p]),e.jsx(e.Fragment,{children:e.jsxs(C,{className:"d-flex flex-column gap-3",children:[e.jsx(T,{children:e.jsxs(C,{className:"d-flex flex-column gap-3",children:[e.jsxs(Z,{onSubmit:L(q),children:[e.jsxs(ae,{children:[e.jsx(ee,{type:"text",placeholder:"Search",...z("searchTerm"),invalid:!!u.searchTerm}),e.jsx(P,{type:"submit",color:"primary",children:e.jsx(d,{icon:U})})]}),u.searchTerm&&e.jsx(se,{invalid:!0,children:u.searchTerm.message})]}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:h.map(s=>e.jsx(re,{content:c.includes(s._id)?"Remove":"Add",children:e.jsxs(v,{onClick:()=>R(s._id),color:c.includes(s._id)?"success":"danger",className:"d-flex align-items-center justify-content-between",children:[s.name,c.includes(s._id)&&e.jsx(d,{icon:V,className:"ms-2"})]})},s._id))})]})}),e.jsx(T,{children:e.jsx(C,{children:e.jsx(te,{children:e.jsx(oe,{children:e.jsxs(ce,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[e.jsx(ne,{children:e.jsxs(A,{children:[e.jsx(n,{children:e.jsx(d,{icon:X})}),e.jsx(n,{children:"Email"}),e.jsx(n,{children:"Phone"}),e.jsx(n,{children:"Tags"}),e.jsx(n,{children:"Action"})]})}),e.jsx(le,{children:x.map(s=>e.jsxs(A,{children:[e.jsx(l,{children:e.jsxs("div",{children:[s.lastname,", ",s.firstname]})}),e.jsx(l,{children:e.jsx("div",{children:s.email})}),e.jsx(l,{children:e.jsx("div",{children:s.phone})}),e.jsx(l,{children:e.jsx("div",{className:"d-flex gap-2",children:s.tags.map((a,t)=>e.jsx(v,{color:"primary",children:h.find(r=>r._id===a)&&h.find(r=>r._id===a).name},t))})}),e.jsx(l,{children:e.jsx(P,{onClick:()=>$(s._id),className:"btn btn-primary",size:"sm",children:e.jsx(d,{icon:J})})})]},s._id))})]})})})})}),e.jsx(T,{children:e.jsx(Y,{children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx(K,{currentPage:i,totalPages:I,onPageChange:j})})})})]})})};ie.propTypes={theme:O.string};export{ie as default};
