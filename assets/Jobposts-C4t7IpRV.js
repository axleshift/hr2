import{q as G,R as r,o as _,k as e,g,l as z,G as P}from"./index-Dk6_5N6K.js";import{F as N,G as H,H as L,P as O}from"./index.es-BSdU5o06.js";import{t as b,d as A,f as V}from"./index-DwkwGQiB.js";import{A as J}from"./AppPagination-DnfH6OCT.js";import{z as w,u as Q,t as K}from"./zod-DnROrqyI.js";import{C as U}from"./CContainer-BdNOM3xU.js";import{C as p,a as S}from"./CRow-DKnFeLN_.js";import{C as W,a as X,c as Z}from"./CFormInput-BLwMcdD1.js";import{C as ee}from"./CInputGroup-_a-lXNw4.js";import{C as l}from"./CTooltip-DPS0NbHF.js";import{C as se,a as te}from"./CCardBody-Dyab-lXI.js";import{C as ae,a as re,b as u,c as n,d as ne,e as t}from"./CTable-6QHLWPjk.js";import{a as o}from"./DefaultLayout-DgSBDSdo.js";import{C as ce}from"./CButtonGroup-DZ4c6VvG.js";import"./index.esm-CNBNEZs-.js";const Ae=()=>{const I=G(),{addToast:v}=r.useContext(_),[y,R]=r.useState([]),[T,d]=r.useState(!1),[i,D]=r.useState(1),[F,Y]=r.useState(1),[x,le]=r.useState(10),[oe,h]=r.useState(!1),[f,ie]=r.useState(""),C=async(s="",m,j)=>{d(!0);try{const a=s===""||s===null||s===void 0?await P(`/jobposter/all?page=${m}&limit=${j}`):await P(`/jobposter/all?query=${s}&page=${m}&limit=${j}`);if(a.status===200){console.log("Data:",a.data),R(a.data.data),Y(a.data.totalPages),d(!1),h(!1);return}else v("Info",`No data found for '${s}'`,"info"),d(!1),h(!1)}catch(a){v("Danger","Failed to fetch data","Error"),console.error(a),d(!1),h(!1)}},$=w.object({query:w.string().min(3,{message:"Search query must be at least 3 characters"})}),{register:k,reset:de,handleSubmit:q,formState:{error:c}}=Q({resolver:async(s,m,j)=>{const a=await K($)(s,m,j);return console.log("Validation result:",a),a}}),B=async s=>{h(!0),C(s.query,i,x)},M=()=>{C(f,i,x)},E=s=>{I(`/recruitment/jobposter/${s.ref_id}`)};return r.useEffect(()=>{C(f,i,x)},[f,i,x]),e.jsx(e.Fragment,{children:e.jsxs(U,{children:[e.jsx(p,{className:"mb-3",children:e.jsxs(S,{children:[e.jsx("h1",{children:"Jobpost Tracker"}),e.jsx("small",{className:"text-muted",children:"In this page, you can view all the jobpost tracker data in various platforms."})]})}),e.jsx(p,{className:"mb-3",children:e.jsx(S,{children:e.jsx(W,{onSubmit:q(B),children:e.jsxs(ee,{children:[e.jsx(X,{type:"text",placeholder:"Search...",...k("query"),invalid:!!(c!=null&&c.query)}),(c==null?void 0:c.query)&&e.jsx(Z,{className:"text-danger",children:c.query.message}),e.jsx(l,{content:"Search",placement:"top",children:e.jsx(g,{type:"submit",className:"btn btn-primary",children:e.jsx(N,{icon:H})})}),e.jsx(l,{content:"Refresh",placement:"top",children:e.jsx(g,{onClick:M,className:"btn btn-primary",children:e.jsx(N,{icon:L})})})]})})})}),e.jsx(p,{children:e.jsx(S,{children:e.jsx(se,{children:e.jsx(te,{children:e.jsxs(ae,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[e.jsx(re,{children:e.jsxs(u,{children:[e.jsx(n,{children:e.jsx("div",{className:"text-center",children:e.jsx("strong",{children:"#"})})}),e.jsx(n,{children:e.jsx("div",{className:"text-center",children:"Platform"})}),e.jsx(n,{children:e.jsx("div",{className:"text-center",children:"Approved"})}),e.jsx(n,{children:e.jsx("div",{className:"text-center",children:"Posted"})}),e.jsx(n,{children:e.jsx("div",{className:"text-center",children:"Deleted"})}),e.jsx(n,{children:e.jsx("div",{className:"text-center",children:"Expires At"})}),e.jsx(n,{children:"Content "}),e.jsx(n,{children:e.jsx("div",{className:"text-center",children:"Actions"})})]})}),e.jsx(ne,{children:T?e.jsx(u,{children:e.jsx(t,{colSpan:"8",className:"text-center",children:e.jsx(z,{color:"primary",variant:"grow"})})}):y.length===0?e.jsx(u,{children:e.jsx(t,{colSpan:"8",children:e.jsx("div",{className:"text-center",children:"No data"})})}):y.map(s=>e.jsxs(u,{children:[e.jsx(t,{children:e.jsx(l,{content:s._id,placement:"top",children:e.jsx("div",{className:"text-capitalize text-center",children:b(s._id,2)})})}),e.jsx(t,{children:e.jsx("div",{className:"text-capitalize text-center",children:s.platform})}),e.jsx(t,{className:"text-center",children:s.isApproved?e.jsx(o,{color:"success",children:"YES"}):e.jsx(o,{color:"danger",children:"NO"})}),e.jsx(t,{className:"text-center",children:s.isPosted?e.jsx(o,{color:"success",children:"YES"}):e.jsx(o,{color:"danger",children:"NO"})}),e.jsx(t,{className:"text-center",children:s.isDeleted?e.jsx(o,{color:"danger",children:"YES"}):e.jsx(o,{color:"info",children:"NO"})}),e.jsx(t,{className:"text-center",children:e.jsx(l,{content:A(s.expiresAt)+" days left",placement:"top",children:e.jsx("span",{className:A(s.expiresAt)>0?"text-info":"text-danger",children:V(s.expiresAt,"MMM d, YYYY")})})}),e.jsx(t,{children:e.jsx(l,{content:b(s.content,100),placement:"top",children:e.jsx("small",{children:b(s.content,50)})})}),e.jsx(t,{className:"text-center",children:e.jsx(ce,{children:e.jsx(l,{content:"View",placement:"top",children:e.jsx(g,{color:"info",onClick:()=>E(s),children:e.jsx(N,{icon:O})})})})})]},s._id))})]})})})})}),e.jsx(p,{children:e.jsx("div",{className:"mt-3 d-flex flex-row gap-2 justify-content-center align-items-center",children:e.jsx(J,{currentPage:i,totalPages:F,onPageChange:D})})})]})})};export{Ae as default};
