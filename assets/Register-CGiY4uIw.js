import{R as e,f as r}from"./react-router-dom-BnDDw25P.js";import{F as a,y as s,z as i,j as n,v as l}from"./index.es-BG4-w6_z.js";import{z as o}from"./zod-B0zZW6rS.js";import{s as t}from"./@hookform/resolvers/zod-1wp20Skh.js";import{u as c}from"./react-hook-form-DB8hWBdy.js";import{m,a as d,j as h,g as p,v as u}from"./index-BkC33Rp-.js";import{C as f}from"./CContainer-3twlesKM.js";import{C as g,a as C}from"./CRow-DZsVnqNG.js";import{C as w,a as v}from"./CCardBody-Dkq4-med.js";import{C as y}from"./CAlert-DcSYuv4x.js";import{C as b,a as j}from"./CFormLabel-B2EeT7hT.js";import{C as N}from"./CInputGroup-d1y9Lb6h.js";import{C as k}from"./CInputGroupText-CNCm7ktL.js";import{C as P}from"./CFormInput-DIPFzms0.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";const x=()=>{const{addToast:x}=e.useContext(m),[S,F]=e.useState(!1),[I,L]=e.useState(""),R=r(),A=o.object({firstname:o.string().min(3,{message:"Firstname must be at least 3 characters long"}),lastname:o.string().min(3,{message:"Lastname must be at least 3 characters long"}),username:o.string().min(3,{message:"Username must be at least 3 characters long"}),email:o.string().email({message:"Invalid email format"}),password:o.string().min(8,{message:"Password must be at least 8 characters long"}),repeatPassword:o.string().min(8,{message:"Repeat password must be at least 8 characters long"})}).refine((e=>e.password===e.repeatPassword),{message:"Passwords do not match",path:["repeatPassword"]}),{register:z,reset:E,handleSubmit:G,formState:{errors:T}}=c({resolver:async(e,r,a)=>await t(A)(e,r,a)});return d("div",{className:"d-flex flex-row align-items-center bg-body-tertiary min-vh-100",children:d(f,{children:d(g,{className:"justify-content-center",children:d(C,{md:9,lg:7,xl:6,children:d(w,{className:"mx-4",children:h(v,{className:"p-4",children:[I&&h(y,{color:"success",className:"d-flex align-items-center",children:[d("div",{className:"me-2",children:d(a,{icon:s})}),d("div",{children:d("span",{children:I})})]}),h(b,{onSubmit:G((async e=>{F(!0);try{if(201===(await u("/auth/register",e)).status){E();L(h("span",{children:["Account created successfully. Please check your ",d("strong",{children:"email"})," to verify your account."]})),F(!1)}else x("Error","An error occurred while creating account.","error"),F(!1)}catch(r){x("Error","An error occurred while creating account.","error"),F(!1)}})),children:[d(g,{children:h(C,{children:[d("h1",{children:"Register"}),d("p",{className:"text-body-secondary",children:"Create your account"})]})}),d(g,{children:d(C,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:i})}),d(P,{placeholder:"Firstname",autoComplete:"firstname",...z("firstname"),invalid:!!T.firstname}),T.firstname&&d(j,{invalid:!0,children:T.firstname.message}),d(k,{children:d(a,{icon:i})}),d(P,{placeholder:"Lastname",autoComplete:"lastname",...z("lastname"),invalid:!!T.lastname}),T.firstname&&d(j,{invalid:!0,children:T.firstname.message})]})})}),d(g,{children:d(C,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:i})}),d(P,{placeholder:"Username",autoComplete:"username",...z("username"),invalid:!!T.username}),T.username&&d(j,{invalid:!0,children:T.username.message})]})})}),d(g,{children:d(C,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:n})}),d(P,{placeholder:"Email",autoComplete:"email",...z("email"),invalid:!!T.email}),T.email&&d(j,{invalid:!0,children:T.email.message})]})})}),d(g,{children:d(C,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:l})}),d(P,{type:"password",placeholder:"Password",autoComplete:"new-password",...z("password"),invalid:!!T.password}),T.password&&d(j,{invalid:!0,children:T.password.message})]})})}),d(g,{children:d(C,{children:h(N,{className:"mb-4",children:[d(k,{children:d(a,{icon:l})}),d(P,{type:"password",placeholder:"Repeat password",autoComplete:"new-password",...z("repeatPassword"),invalid:!!T.repeatPassword}),T.repeatPassword&&d(j,{invalid:!0,children:T.repeatPassword.message})]})})}),h(g,{xs:{cols:1,gutter:2},md:{cols:2,gutter:2},className:"mb-3",children:[d(C,{className:"d-grid",children:d(p,{variant:"outline",color:"info",onClick:()=>{R("/login")},children:"Login"})}),d(C,{className:"d-grid",children:d(p,{type:"submit",color:"success",disabled:S,children:S?"Creating account...":"Create account"})})]}),d(g,{children:d(C,{children:d("p",{children:h("small",{children:["By continuing, you agree to our",h("a",{onClick:()=>R("/policy"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:[" ","Privacy Policy"," "]}),"and",h("a",{onClick:()=>R("/terms"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:[" ","Terms of Service"]}),"."]})})})})]})]})})})})})})};export{x as default};
