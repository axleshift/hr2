import{r as e,h as t,R as a}from"./react-router-dom-BnDDw25P.js";import{l,f as n,v as r,r as s,x as c}from"./index-CiY-rEab.js";import{u as m}from"./react-hook-form-DGCwHb0C.js";import{s as o}from"./@hookform/resolvers/zod-B5rlnuQ9.js";import{z as i}from"./zod-B0zZW6rS.js";import{F as u,Q as E,R as d,S as p,P as f,M as h,T as x,U as b}from"./index.es-DKauwFcn.js";import{b as y}from"./index-WoleBHU6.js";import{b as j,a as v,f as g,t as w}from"./index-BxAblS3e.js";import{C}from"./CContainer-8-VNTmu1.js";import{C as N,a as T}from"./CRow-DJPiItIX.js";import{C as S}from"./CTooltip-D0U68Pbx.js";import{C as F}from"./CCollapse-BByndfm7.js";import{C as P}from"./DefaultLayout-BRZEYjZe.js";import{a as O,C as k,c as D,b as I}from"./CFormInput-cRvMBsCQ.js";import{C as _}from"./CInputGroup-BpBhIKNn.js";import{C as L}from"./CInputGroupText-CZtvFoCK.js";import{C as R}from"./CFormTextarea-DVEACrCs.js";import{C as $,a as G}from"./CCardBody-ahB5vz_Q.js";import{C as q,a as z,b as A,c as J,d as B,e as H}from"./CTable-XLF672Os.js";import{C as M}from"./CButtonGroup-BX6BgOjF.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./isRTL-D5ORmfro.js";import"./getTransitionDurationFromElement-2nBpLMKS.js";import"./index.esm-BmXbUBDM.js";const Q=()=>{var Q,U;const V={},{addToast:W}=e.useContext(l),{id:Y}=t(),[K,Z]=e.useState(!0),[X,ee]=e.useState(!0),[te,ae]=e.useState([]),[le,ne]=e.useState([]),[re,se]=e.useState({jobposting:!0,jobposter:!0,tracker:!0}),[ce,me]=e.useState({twitter:!1,facebook:!1}),oe=async()=>{try{Z(!0);const e=await r(`/jobposting/${Y}`);200===e.status||201===e.status?(ae(e.data.data),Z(!1)):Z(!1)}catch(e){}},ie=async()=>{try{ee(!0);const e=await r(`/jobposter/${Y}`);200!==e.status&&201!==e.status||(ne(e.data.data),ee(!1))}catch(e){ee(!1)}},ue=i.object({twitterText:i.string().min(1,{message:"Please enter a valid text"}).max(280,{message:"Max of 280 characters"}).optional()}),{register:Ee,reset:de,handleSubmit:pe,formState:{errors:fe}}=m({resolver:async(e,t,a)=>await o(ue)(e,t,a)}),he=i.object({text:i.string().min(1,{message:"Please enter a valid text"}).optional()}),{register:xe,handleSubmit:be,formState:{errors:ye}}=m({resolver:async(e,t,a)=>await o(he)(e,t,a)});return e.useEffect((()=>{oe(),ie()}),[]),a.createElement(a.Fragment,null,K?a.createElement("div",null,"Loading..."):a.createElement(C,{className:"d-flex flex-column gap-2 mb-3"},a.createElement(N,null,a.createElement(T,null,a.createElement("h2",null,"Job Posting Details"),a.createElement("small",null,"This is the job posting details. It will show the details of the job posting.")),a.createElement(T,{className:"d-flex justify-content-end"},a.createElement("div",null,a.createElement(S,{content:re.jobposting?"Hide Job Posting Details":"Show Job Posting Details",placement:"top"},a.createElement(n,{color:"primary",onClick:()=>{return e="jobposting",void se({...re,[e]:!re[e]});var e}},a.createElement(u,{icon:re.jobposting?E:d})))))),a.createElement(N,null,a.createElement(T,null,a.createElement(F,{visible:re.jobposting},a.createElement(C,{className:"d-flex flex-column gap-2"},a.createElement(N,null,a.createElement(T,null,a.createElement(S,{content:"active"===(null==(Q=te.status)?void 0:Q.toLowerCase())?"This is an active job posting. This means that the job is currently open and accepting applications and have posted on social media.":"This is an inactive job posting. This means that the job posting is currently closed and not accepting applications.",placement:"top"},a.createElement(P,{color:"active"===(null==(U=te.status)?void 0:U.toLowerCase())?"success":"danger"},j(te.status))))),a.createElement(N,null,a.createElement(T,null,a.createElement(O,{id:"title",name:"title",label:"Title",value:j(te.title),readOnly:!0})),a.createElement(T,null,a.createElement(O,{id:"type",name:"type",label:"Type",value:j(te.type),readOnly:!0}))),a.createElement(N,null,a.createElement(T,null,a.createElement("label",{htmlFor:""},"Location"),a.createElement(_,{className:"mt-2"},a.createElement(L,null,a.createElement(u,{icon:p})),a.createElement(O,{id:"location",name:"location",value:j(te.location),readOnly:!0}))),a.createElement(T,null,a.createElement("label",{htmlFor:""},"Salary"),a.createElement(_,{className:"mt-2"},a.createElement(L,null,a.createElement(u,{icon:f})),a.createElement(O,{id:"salarymin",name:"salarymin",value:v(te.salary_min),readOnly:!0}),a.createElement(O,{id:"salarymax",name:"salarymax",value:v(te.salary_max),readOnly:!0})))),a.createElement(N,null,a.createElement(T,null,a.createElement("label",{htmlFor:""},"Description"),a.createElement(R,{id:"description",name:"description",value:te.description,readOnly:!0}))),a.createElement(N,null,a.createElement(T,null,a.createElement("label",{htmlFor:""},"Responsibilities"),a.createElement(R,{id:"responsibilities",name:"responsibilities",value:te.responsibilities,readOnly:!0}))),a.createElement(N,null,a.createElement(T,null,a.createElement("label",{htmlFor:""},"Requirements"),a.createElement(R,{id:"requirements",name:"requirements",value:te.requirements,readOnly:!0}))),a.createElement(N,null,a.createElement(T,null,a.createElement("label",{htmlFor:""},"Benefits"),a.createElement(R,{id:"benefits",name:"benefits",value:te.benefits,readOnly:!0}))),a.createElement(N,null,a.createElement(T,null,a.createElement("label",{htmlFor:""},"Schedule"),a.createElement(_,{className:"mt-2"},a.createElement(L,null,a.createElement(u,{icon:h})),a.createElement(L,null,"Start"),a.createElement(O,{type:"date",id:"scheduleStart",name:"scheduleStart",value:g(te.schedule_start),readOnly:!0}),a.createElement(L,null,"End"),a.createElement(O,{type:"date",id:"scheduleEnd",name:"scheduleEnd",value:g(te.schedule_end),readOnly:!0})))))))),a.createElement(N,null,a.createElement(T,null,a.createElement("hr",null),a.createElement(C,null,a.createElement(k,{onSubmit:pe((async e=>{try{const t={twitter:e.twitterText,facebook:e.facebookText};201===(await s(`/jobposter/${Y}/post`,t)).status?(W("Success","Posted successfully","success"),oe(),ie()):W("Failed","Failed to post","danger")}catch(t){W("Failed","Failed to post","danger")}})),className:"d-flex flex-column gap-2",classID:"twitterForm",ref:e=>V.twitterForm=e},a.createElement("h2",null,"Create Post"),a.createElement("div",null,a.createElement(D,{className:"d-flex flex-row gap-2 justify-items-center align-items-center"},a.createElement(u,{icon:y,className:"text-info"}),a.createElement("strong",null,"Create Twitter Post (280 characters)")),a.createElement(R,{id:"twitterText",name:"twitterText",placeholder:"Twitter Post description..",defaultValue:`NOW HIRING! \n${te.title}\nLocation: ${te.location}\nSalary: ${v(te.salary_min)} - ${v(te.salary_max)}\n=====\nPM me for more details!`,...Ee("twitterText"),invalid:!!fe.twitterText,className:"scalableCFormTextArea-200"}),a.createElement("small",{className:"text-muted"},"If left blank, the default text will be used."),a.createElement("br",null),a.createElement("small",{className:"text-muted mb-3"},"This summary will be posted on ",a.createElement("span",{className:"text-info"},"twitter"),", with a character limit of 280 characters. Due to this limitation, we recommend keeping the summary short and sweet."),fe.twitterText&&a.createElement(I,{invalid:!0},fe.twitterText.message)),a.createElement("div",{className:"d-flex justify-content-end"},a.createElement(n,{color:"primary",type:"submit",className:"mb-3"},"Post Tweet")))))),a.createElement(N,null,a.createElement(T,null,a.createElement(C,null,a.createElement("div",null,a.createElement("hr",null),a.createElement("h2",null,"Tracker"),a.createElement("small",null,"This is a tracker for the job posting. It will show the status of the job postings on various platforms.")),a.createElement($,null,a.createElement(G,null,a.createElement(q,{align:"middle",hover:!0,responsive:!0,striped:!0},a.createElement(z,null,a.createElement(A,null,a.createElement(J,null,a.createElement("div",{className:"text-center"},a.createElement("strong",null,"#"))),a.createElement(J,null,a.createElement("div",{className:"text-center"},"Platform")),a.createElement(J,null,a.createElement("div",{className:"text-center"},"Posted")),a.createElement(J,null,a.createElement("div",{className:"text-center"},"Deleted")),a.createElement(J,null,a.createElement("div",{className:"text-center"},"Expires At")),a.createElement(J,null,"Content "),a.createElement(J,null,a.createElement("div",{className:"text-center"},"Actions")))),a.createElement(B,null,X?a.createElement(A,null,a.createElement(H,{colSpan:"7"},"Loading...")):le.map(((e,t)=>e?a.createElement(A,{key:e._id},a.createElement(H,null,a.createElement(S,{content:e._id,placement:"top"},a.createElement("div",{className:"text-capitalize text-center"},w(e._id,2)))),a.createElement(H,null,a.createElement("div",{className:"text-capitalize text-center"},e.platform)),a.createElement(H,{className:"text-center"},e.isPosted?a.createElement(P,{color:"success"},"YES"):a.createElement(P,{color:"danger"},"NO")),a.createElement(H,{className:"text-center"},e.isDeleted?a.createElement(P,{color:"success"},"YES"):a.createElement(P,{color:"danger"},"NO")),a.createElement(H,{className:"text-center"},a.createElement("span",{className:"text-info"},g(e.expiresAt))),a.createElement(H,null,a.createElement(S,{content:e.content,placement:"top"},a.createElement("small",null,w(e.content,50)))),a.createElement(H,{className:"text-center"},a.createElement(M,null,a.createElement(S,{content:"Delete",placement:"top"},a.createElement(n,{color:"danger",onClick:()=>(async e=>{try{200===(await c(`/jobposter/${e}`)).status?(W("Success","Deleted successfully","success"),oe(),ie()):W("Failed","Failed to delete","danger"),ie()}catch(t){}})(e._id)},a.createElement(u,{icon:x}))),a.createElement(S,{content:"Use as Template",placement:"top"},a.createElement(n,{color:"info",onClick:()=>(async(e,t)=>{try{if("twitter"===t){const t={twitterText:e.content};me((e=>({...e,twitter:!0}))),de(t),W("Success","Post Fetched","success"),V.twitterForm.scrollIntoView({behavior:"smooth"})}}catch(a){}})(e,e.platform)},a.createElement(u,{icon:b})))))):null)))))))))))};export{Q as default};
