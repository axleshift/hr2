const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DKYXPAF2.js","./Calendar-DP4MJZ1F.js","./index-DpqZzGP6.js","./react-router-dom-BnDDw25P.js","./react-BF1r7_8g.js","./react-dom-DgB6LS8R.js","./index-BR_Z4VyY.css"])))=>i.map(i=>d[i]);
import{r as e,R as a}from"./react-router-dom-BnDDw25P.js";import{F as r,A as t,B as i,f as s,Q as n,R as c}from"./index.es-s389u1u9.js";import{m as l,a as o,F as d,j as h,l as m,g as p,k as u,w as f,i as g,v as C,p as S}from"./index-DpqZzGP6.js";import{f as y,b}from"./index-BVfmz2P_.js";import{C as v,a as j,b as w}from"./CModalHeader-CPYdA_Fi.js";import{C as x}from"./CModalTitle-DydU1_c4.js";import{C as N}from"./CFormLabel-QlgWDWwu.js";import{C as T}from"./CContainer-E21_-1fn.js";import{C as E,a as _}from"./CRow-BLpgN32S.js";import{C as k}from"./CFormSelect-Cmw6zubA.js";import{C as D}from"./DefaultLayout-HWBHCLkF.js";import{C as A,a as F}from"./CCardBody-DF6la3Ia.js";import{C as z,a as I,b as P,c as R,d as $,e as L}from"./CTable-B5UAN_-v.js";import{C as M}from"./CInputGroup-BSA1ZS4f.js";import{C as V}from"./CFormInput-vYVYTfgk.js";import{C as O}from"./CTooltip-B8R5V9d4.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./index.esm-DahFkpbe.js";import"./isRTL-D5ORmfro.js";const B=a.lazy((()=>g((()=>import("./index-DKYXPAF2.js")),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url))),q=({isVisible:a,onClose:r,isDarkMode:t,applicantData:i})=>{const{addToast:s}=e.useContext(l),[n,c]=e.useState([]),[g,S]=e.useState([]),[V,O]=e.useState([]),[q,H]=e.useState(""),[G,W]=e.useState(new Date),[J,Q]=e.useState([]),[U,Y]=e.useState(!1),[K,X]=e.useState(!1),Z=async()=>{try{const e=await f(`/facilities/events/${q._id}/${G}`);200===e.status?S(e.data.data):S([])}catch(e){s("error",e.message,"Error")}},ee=async e=>{try{X(!0);const a=new FormData;a.append("applicantId",i._id);const r=await C(`/facilities/events/${e}/book`,a);200!==r.status&&201!==r.status||(s("Success","Applicant has been booked to the event","success"),Z()),X(!1)}catch(a){s("error",a.message,"Error")}};return e.useEffect((()=>{q&&(G&&Z(),(async()=>{try{const e=G.getMonth()+1,a=G.getFullYear(),r=await f(`/facilities/events/${q._id}/calendar-states?month=${e}&year=${a}`);c(r.data.data)}catch(e){s("error",e.message,"Error")}})()),(async()=>{try{const e=await f("/facilities/all");O(e.data.data)}catch(e){s("error",e.message,"Error")}})()}),[q,G]),o(d,{children:h(v,{visible:a,onClose:()=>{r(),H(""),S([]),c([])},size:"xl",backdrop:"static",children:[o(j,{children:h(x,{children:["Schedule an Event for ",i.firstname,", ",i.lastname]})}),o(w,{children:o(N,{children:h(T,{children:[h(E,{xs:{cols:1,gutter:2},md:{cols:2,gutter:4},children:[o(_,{children:h(k,{children:[o("option",{value:"",children:"Select Facility"}),V.map((e=>o("option",{value:e._id,onClick:()=>{H(e),W(new Date),c([])},children:e.name},e._id)))]})}),o(_,{children:o("p",{className:"text-muted",children:q?h(d,{children:[h("strong",{children:[q.location," "]}),o("br",{}),q.description]}):o("span",{className:"text-danger",children:"*Please select a facility first."})})})]}),o(E,{children:o(_,{children:o(D,{color:"warning",children:"Has Events"})})}),o(E,{className:"mb-3",children:o(_,{children:o(B,{onChange:e=>{const a=new Date(e.getTime()-6e4*e.getTimezoneOffset());W(a)},className:t?"calendar dark-mode":"calendar",defaultValue:new Date,tileClassName:({date:e})=>{const a=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0];return n.some((e=>e.startsWith(a)))?"has-events":null}})})}),"development"===m.env,o(E,{children:o(_,{children:o(A,{children:o(F,{children:o(E,{children:o(_,{children:h(z,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[o(I,{children:h(P,{children:[o(R,{children:"Facilty"}),o(R,{children:"Type"}),o(R,{children:"Date"}),o(R,{children:"Time"}),o(R,{children:"Event"}),o(R,{children:"Capacity"}),o(R,{children:"Participants"}),o(R,{children:"Actions"})]})}),o($,{children:g.length>0?g.map((e=>h(P,{children:[o(L,{children:q.name}),o(L,{children:q.type}),o(L,{children:y(e.date)}),h(L,{children:[b(e.timeslot.start)," -"," ",b(e.timeslot.end)]}),o(L,{children:e.name}),o(L,{children:e.capacity}),o(L,{children:e.participants.length}),o(P,{children:o(M,{children:e.participants.some((e=>e.applicant.toString()===i._id.toString()))?o(p,{color:"success",disabled:!0,className:"text-white",size:"sm",onClick:()=>ee(e._id),children:"Booked"}):o(p,{color:"info",className:"text-white",size:"sm",onClick:()=>ee(e._id),children:K?o(u,{color:"light",size:"sm"}):"Book"})})})]},e._id))):o(P,{children:h(L,{colSpan:"8",className:"text-center",children:["No events available. Please select a date from the"," ",o("span",{className:"text-info",children:"calendar"}),"."]})})})]})})})})})})})]})})})]})})};q.propTypes={isVisible:S.bool.isRequired,isDarkMode:S.bool,onClose:S.func.isRequired,applicantData:S.object};const H=()=>{const{addToast:a}=e.useContext(l),[m,u]=e.useState([]),[g,C]=e.useState(!1),[S,y]=e.useState({}),[b,v]=e.useState(""),[j,w]=e.useState(!1),[x,k]=e.useState([]),[B,H]=e.useState([]),[G,W]=e.useState(!1),[J,Q]=e.useState(1),[U,Y]=e.useState(9),[K,X]=e.useState(0),[Z,ee]=e.useState(0),[ae,re]=e.useState(!1),te=async()=>{try{C(!0);const e=await f("/applicant/category/shortlisted");u(e.data.data),C(!1)}catch(e){C(!1),a("Error","An error occurred","danger")}};return e.useEffect((()=>{te(),(async()=>{try{const e="applicant",r=await f(`/tags/category/${e}`);200===r.status?k(r.data.data):a("Error","An error occurred","danger")}catch(e){a("Error","An error occurred","danger")}})()}),[]),o(d,{children:h(T,{children:[o(E,{className:"mb-3",children:h(_,{children:[o("h2",{children:"Shortlisted"}),h("small",{children:["In this page, you can ",o("span",{className:"text-info",children:"view"})," and"," ",o("span",{className:"text-danger",children:"remove"})," applicants from being qualified for the job. As well as"," ",o("span",{className:"text-primary",children:"schedule an APPLICANT for an interview"}),"."]})]})}),o(E,{className:"mb-3",children:o(_,{children:o(N,{children:h(M,{children:[o(V,{type:"search",placeholder:"Search...","aria-label":"Search"}),o(p,{type:"button",color:"primary",children:o(r,{icon:t})}),o(p,{type:"button",color:"primary",onClick:()=>te(),children:o(r,{icon:i})})]})})})}),o(E,{className:"mb-3",children:o(_,{children:o(A,{children:o(F,{children:h(z,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[o(I,{children:h(P,{children:[o(R,{children:o("strong",{children:"#"})}),o(R,{children:o(r,{icon:s})}),o(R,{children:"Email"}),o(R,{children:"Phone"}),o(R,{children:"Tags"}),o(R,{children:"Actions"})]})}),o($,{children:g?o(P,{children:o(L,{colSpan:"6",children:"Loading..."})}):m.map(((e,a)=>h(P,{children:[o(L,{children:e._id}),h(L,{children:[e.lastname,", ",e.firstname]}),o(L,{children:e.email}),o(L,{children:e.phone}),o(L,{children:o("div",{className:"d-flex flex-wrap",children:e.tags.map(((e,a)=>{var r;const t=null==(r=x.find((a=>a._id===e)))?void 0:r.name;return o(D,{shape:"rounded-pill",color:"primary",className:"me-1 mb-1",children:t},a)}))})}),o(L,{children:h("div",{className:"d-flex gap-2",children:[o(O,{content:"Remove from list",placement:"top",children:o(p,{color:"danger",size:"sm",children:o(r,{icon:n})})}),o(O,{content:"Schedule an interview",placement:"top",children:o(p,{color:"info",size:"sm",onClick:()=>{W(!0),y(e)},children:o(r,{icon:c})})})]})})]},a)))})]})})})})}),o(E,{}),o(E,{children:o(_,{children:o(q,{isVisible:G,onClose:()=>W(!1),isDarkMode:!0,applicantData:S})})})]})})};export{H as default};
