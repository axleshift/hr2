import{F as e,A as r,B as a}from"./index.es-BUpMRE3D.js";import{r as t}from"./react-router-dom-BnDDw25P.js";import{A as i,a as s,F as o,j as n,g as c,k as l,x as d}from"./index-DiLnYbjC.js";import{t as m}from"./index-BOi-5bX2.js";import{A as h}from"./AppPagination-CAajZQ_e.js";import{J as p}from"./JobForm-BKasaRg5.js";import{C as u}from"./CContainer-DzOuZpEx.js";import{C as f,a as j}from"./CRow-BNc0QFWW.js";import{C}from"./CFormLabel-DwEY-V3u.js";import{C as g}from"./CInputGroup-CqBjsx_2.js";import{C as b}from"./CFormInput-uT5SP9Ht.js";import{C as y,a as x}from"./CCardBody-BlNAuiwx.js";import{C as S,a as w,b as k,c as v,d as z,e as N}from"./CTable-Bp7z3h6O.js";import{C as $}from"./CTooltip-Dv1PmkHW.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./zod-B0zZW6rS.js";import"./react-hook-form-DB8hWBdy.js";import"./@hookform/resolvers/zod-1wp20Skh.js";import"./CModalHeader-BDpLr51j.js";import"./DefaultLayout-Cau2R5kl.js";import"./index.esm-Dwb_M0UQ.js";import"./isRTL-D5ORmfro.js";import"./CModalTitle-Cp-5Mm7J.js";import"./CFormTextarea-D1VEMpzQ.js";import"./CFormSelect-C1vm9vYc.js";const T=()=>{const{userInformation:T}=t.useContext(i),[F,I]=t.useState([]),[P,A]=t.useState(!1),[J,L]=t.useState(!1),[M,_]=t.useState({}),[E,R]=t.useState("view"),[q,B]=t.useState(""),[H,U]=t.useState(1),[V,D]=t.useState(9),[G,K]=t.useState(0),[O,W]=t.useState(0),X=async e=>{try{A(!0);const r=e?await d(`/job/all?query=${e}&page=${H}&limit=${V}&sort=desc`):await d(`/job/all?page=${H}&limit=${V}&sort=desc`);switch(r.status){case 200:A(!1),I(r.data.data),U(r.data.currentPage),W(r.data.totalItems),K(r.data.totalPages);break;case 404:A(!1),I([]),U(0),D(0),K(0);break;default:throw new Error(`Unexpected status code: ${r.status}`)}}catch(r){}};return t.useEffect((()=>{const e=setTimeout((()=>{q?X(q):X()}),500);return()=>clearTimeout(e)}),[q,H,G,O]),s(o,{children:n(u,{children:[s(f,{className:"mb-3",children:n(j,{children:[s("h2",{children:"Jobs"}),s("small",{children:"You can management job request in this page or make your own that can be used as base for jobposting."})]})}),s(f,{children:s(j,{className:"mb-3 d-flex justify-content-end",children:s(c,{color:"primary",size:"sm",onClick:()=>{L(!0),R("create")},children:"Create"})})}),s(f,{className:"mb-3",children:s(j,{children:s(C,{children:n(g,{type:"text",id:"searchInput",name:"searchInput",placeholder:"Search...",children:[s(b,{}),s(c,{color:"primary",size:"sm",children:s(e,{icon:r})}),s(c,{color:"primary",size:"sm",onClick:()=>X(),children:s(e,{icon:a})})]})})})}),s(f,{className:"mb-3",children:s(j,{children:s(y,{children:s(x,{children:n(S,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[s(w,{children:n(k,{children:[s(v,{children:"#"}),s(v,{children:"Title"}),s(v,{children:"Capacity"}),s(v,{children:"Author"}),s(v,{children:"Actions"})]})}),s(z,{children:P?s(k,{children:s(N,{colSpan:"12",children:n("div",{className:"d-flex justify-content-center",children:[s(l,{size:"sm"})," ",s("span",{children:"Loading..."})]})})}):0===F.length?s(k,{children:s(N,{colSpan:"12",children:s("div",{className:"d-flex justify-content-center",children:"No Jobs found."})})}):F.map((e=>n(k,{children:[s($,{position:"top",content:e._id,children:s(N,{children:m(e._id,10)})}),s(N,{children:e.title}),s(N,{children:e.capacity}),s(N,{children:"string"==typeof e.author?e.author:e.author&&e.author.firstname?`${e.author.firstname} ${e.author.lastname}`:"Unknown"}),s(N,{children:n("div",{className:"d-flex flex-row gap-2",children:[s(c,{color:"primary",size:"sm",onClick:()=>{_(e),L(!0),R("edit")},children:"Edit"}),s(c,{color:"primary",size:"sm",onClick:()=>{_(e),L(!0),R("view")},children:"View"}),["admin","manager","recruiter"].includes(T.role)&&s(c,{color:"warning",size:"sm",onClick:()=>{_(e),L(!0),R("edit")},children:"Manage"})]})})]},e._id)))})]})})})})}),s(f,{children:s(j,{children:s("div",{className:"d-flex flex-row gap-2 justify-content-center align-items-center",children:s(h,{currentPage:H,totalPages:G,onPageChange:U})})})}),s(f,{children:s(j,{children:s(p,{isVisible:J,onClose:()=>{L(!1),X()},state:E,job:M})})})]})})};export{T as default};
