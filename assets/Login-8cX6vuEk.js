import{r as p,_ as be,u as xe,R as B,T as we,a as Se,c as je,z as Re,p as l,b as Ce,B as _e,q as Oe,A as Le,o as Ne,k as o,l as Ee,D as ce,g as E}from"./index-CiV4mRcZ.js";import{z as K,u as Pe,t as ke}from"./zod-BQFeo2Z_.js";import{F as L,v as Ie,f as Te,w as $e,x as Ae,y as Fe}from"./index.es-ba-Ohs3A.js";import{f as De,a as Ue}from"./index-Cfd0Oj9N.js";import{C as Me}from"./CContainer-Do4jvznw.js";import{C as ze,a as Ge}from"./CRow-DuUDi8eX.js";import{C as He,a as Ve}from"./CCardBody-BSH2F1wg.js";import{C as We,a as de}from"./CFormInput-DTJIjxRp.js";import{C as le}from"./CInputGroup-C2Au0wq3.js";import{C as Y}from"./CInputGroupText-B9bzS8Cq.js";import{C as qe}from"./CTooltip-blDH3YDi.js";import{C as Be}from"./CButtonGroup-Bcv8H7hU.js";var te=p.forwardRef(function(e,n){var i=e.children,r=e.className,t=e.color,c=t===void 0?"primary":t,m=e.dismissible,x=e.variant,u=e.visible,y=u===void 0?!0:u,w=e.onClose,d=be(e,["children","className","color","dismissible","variant","visible","onClose"]),s=p.useRef(null),h=xe(n,s),g=p.useState(y),_=g[0],C=g[1];return p.useEffect(function(){C(y)},[y]),B.createElement(we,{in:_,mountOnEnter:!0,nodeRef:s,onExit:w,timeout:150,unmountOnExit:!0},function(S){return B.createElement("div",Se({className:je("alert",x==="solid"?"bg-".concat(c," text-white"):"alert-".concat(c),{"alert-dismissible fade":m,show:S==="entered"},r),role:"alert"},d,{ref:h}),i,m&&B.createElement(Re,{onClick:function(){return C(!1)}}))})});te.propTypes={children:l.node,className:l.string,color:Ce.isRequired,dismissible:l.bool,onClose:l.func,variant:l.string,visible:l.bool};te.displayName="CAlert";var Ke=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function J(){return J=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},J.apply(this,arguments)}function Ye(e,n){if(e==null)return{};var i={},r=Object.keys(e),t,c;for(c=0;c<r.length;c++)t=r[c],!(n.indexOf(t)>=0)&&(i[t]=e[t]);return i}function T(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Je(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,X(e,n)}function X(e,n){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},X(e,n)}var $=function(e){Je(n,e);function n(){var r;return r=e.call(this)||this,r.handleExpired=r.handleExpired.bind(T(r)),r.handleErrored=r.handleErrored.bind(T(r)),r.handleChange=r.handleChange.bind(T(r)),r.handleRecaptchaRef=r.handleRecaptchaRef.bind(T(r)),r}var i=n.prototype;return i.getCaptchaFunction=function(t){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[t]:this.props.grecaptcha[t]:null},i.getValue=function(){var t=this.getCaptchaFunction("getResponse");return t&&this._widgetId!==void 0?t(this._widgetId):null},i.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},i.execute=function(){var t=this.getCaptchaFunction("execute");if(t&&this._widgetId!==void 0)return t(this._widgetId);this._executeRequested=!0},i.executeAsync=function(){var t=this;return new Promise(function(c,m){t.executionResolve=c,t.executionReject=m,t.execute()})},i.reset=function(){var t=this.getCaptchaFunction("reset");t&&this._widgetId!==void 0&&t(this._widgetId)},i.forceReset=function(){var t=this.getCaptchaFunction("reset");t&&t()},i.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},i.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},i.handleChange=function(t){this.props.onChange&&this.props.onChange(t),this.executionResolve&&(this.executionResolve(t),delete this.executionReject,delete this.executionResolve)},i.explicitRender=function(){var t=this.getCaptchaFunction("render");if(t&&this._widgetId===void 0){var c=document.createElement("div");this._widgetId=t(c,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(c)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},i.componentDidMount=function(){this.explicitRender()},i.componentDidUpdate=function(){this.explicitRender()},i.handleRecaptchaRef=function(t){this.captcha=t},i.render=function(){var t=this.props;t.sitekey,t.onChange,t.theme,t.type,t.tabindex,t.onExpired,t.onErrored,t.size,t.stoken,t.grecaptcha,t.badge,t.hl,t.isolated;var c=Ye(t,Ke);return p.createElement("div",J({},c,{ref:this.handleRecaptchaRef}))},n}(p.Component);$.displayName="ReCAPTCHA";$.propTypes={sitekey:l.string.isRequired,onChange:l.func,grecaptcha:l.object,theme:l.oneOf(["dark","light"]),type:l.oneOf(["image","audio"]),tabindex:l.number,onExpired:l.func,onErrored:l.func,size:l.oneOf(["compact","normal","invisible"]),stoken:l.string,hl:l.string,badge:l.oneOf(["bottomright","bottomleft","inline"]),isolated:l.bool};$.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var he={exports:{}},a={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=typeof Symbol=="function"&&Symbol.for,re=f?Symbol.for("react.element"):60103,ne=f?Symbol.for("react.portal"):60106,A=f?Symbol.for("react.fragment"):60107,F=f?Symbol.for("react.strict_mode"):60108,D=f?Symbol.for("react.profiler"):60114,U=f?Symbol.for("react.provider"):60109,M=f?Symbol.for("react.context"):60110,oe=f?Symbol.for("react.async_mode"):60111,z=f?Symbol.for("react.concurrent_mode"):60111,G=f?Symbol.for("react.forward_ref"):60112,H=f?Symbol.for("react.suspense"):60113,Xe=f?Symbol.for("react.suspense_list"):60120,V=f?Symbol.for("react.memo"):60115,W=f?Symbol.for("react.lazy"):60116,Qe=f?Symbol.for("react.block"):60121,Ze=f?Symbol.for("react.fundamental"):60117,et=f?Symbol.for("react.responder"):60118,tt=f?Symbol.for("react.scope"):60119;function b(e){if(typeof e=="object"&&e!==null){var n=e.$$typeof;switch(n){case re:switch(e=e.type,e){case oe:case z:case A:case D:case F:case H:return e;default:switch(e=e&&e.$$typeof,e){case M:case G:case W:case V:case U:return e;default:return n}}case ne:return n}}}function me(e){return b(e)===z}a.AsyncMode=oe;a.ConcurrentMode=z;a.ContextConsumer=M;a.ContextProvider=U;a.Element=re;a.ForwardRef=G;a.Fragment=A;a.Lazy=W;a.Memo=V;a.Portal=ne;a.Profiler=D;a.StrictMode=F;a.Suspense=H;a.isAsyncMode=function(e){return me(e)||b(e)===oe};a.isConcurrentMode=me;a.isContextConsumer=function(e){return b(e)===M};a.isContextProvider=function(e){return b(e)===U};a.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===re};a.isForwardRef=function(e){return b(e)===G};a.isFragment=function(e){return b(e)===A};a.isLazy=function(e){return b(e)===W};a.isMemo=function(e){return b(e)===V};a.isPortal=function(e){return b(e)===ne};a.isProfiler=function(e){return b(e)===D};a.isStrictMode=function(e){return b(e)===F};a.isSuspense=function(e){return b(e)===H};a.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===A||e===z||e===D||e===F||e===H||e===Xe||typeof e=="object"&&e!==null&&(e.$$typeof===W||e.$$typeof===V||e.$$typeof===U||e.$$typeof===M||e.$$typeof===G||e.$$typeof===Ze||e.$$typeof===et||e.$$typeof===tt||e.$$typeof===Qe)};a.typeOf=b;he.exports=a;var rt=he.exports,ie=rt,nt={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ot={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},it={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ye={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},se={};se[ie.ForwardRef]=it;se[ie.Memo]=ye;function ue(e){return ie.isMemo(e)?ye:se[e.$$typeof]||nt}var st=Object.defineProperty,at=Object.getOwnPropertyNames,pe=Object.getOwnPropertySymbols,ct=Object.getOwnPropertyDescriptor,dt=Object.getPrototypeOf,fe=Object.prototype;function ge(e,n,i){if(typeof n!="string"){if(fe){var r=dt(n);r&&r!==fe&&ge(e,r,i)}var t=at(n);pe&&(t=t.concat(pe(n)));for(var c=ue(e),m=ue(n),x=0;x<t.length;++x){var u=t[x];if(!ot[u]&&!(i&&i[u])&&!(m&&m[u])&&!(c&&c[u])){var y=ct(n,u);try{st(e,u,y)}catch{}}}}return e}var lt=ge;const ut=_e(lt);function Q(){return Q=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Q.apply(this,arguments)}function pt(e,n){if(e==null)return{};var i={},r=Object.keys(e),t,c;for(c=0;c<r.length;c++)t=r[c],!(n.indexOf(t)>=0)&&(i[t]=e[t]);return i}function ft(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}var R={},ht=0;function mt(e,n){return n=n||{},function(r){var t=r.displayName||r.name||"Component",c=function(x){ft(u,x);function u(w,d){var s;return s=x.call(this,w,d)||this,s.state={},s.__scriptURL="",s}var y=u.prototype;return y.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+ht++),this.__scriptLoaderID},y.setupScriptURL=function(){return this.__scriptURL=typeof e=="function"?e():e,this.__scriptURL},y.asyncScriptLoaderHandleLoad=function(d){var s=this;this.setState(d,function(){return s.props.asyncScriptOnLoad&&s.props.asyncScriptOnLoad(s.state)})},y.asyncScriptLoaderTriggerOnScriptLoaded=function(){var d=R[this.__scriptURL];if(!d||!d.loaded)throw new Error("Script is not loaded.");for(var s in d.observers)d.observers[s](d);delete window[n.callbackName]},y.componentDidMount=function(){var d=this,s=this.setupScriptURL(),h=this.asyncScriptLoaderGetScriptLoaderID(),g=n,_=g.globalName,C=g.callbackName,S=g.scriptId;if(_&&typeof window[_]<"u"&&(R[s]={loaded:!0,observers:{}}),R[s]){var O=R[s];if(O&&(O.loaded||O.errored)){this.asyncScriptLoaderHandleLoad(O);return}O.observers[h]=function(v){return d.asyncScriptLoaderHandleLoad(v)};return}var P={};P[h]=function(v){return d.asyncScriptLoaderHandleLoad(v)},R[s]={loaded:!1,observers:P};var j=document.createElement("script");j.src=s,j.async=!0;for(var k in n.attributes)j.setAttribute(k,n.attributes[k]);S&&(j.id=S);var I=function(N){if(R[s]){var ve=R[s],q=ve.observers;for(var ae in q)N(q[ae])&&delete q[ae]}};C&&typeof window<"u"&&(window[C]=function(){return d.asyncScriptLoaderTriggerOnScriptLoaded()}),j.onload=function(){var v=R[s];v&&(v.loaded=!0,I(function(N){return C?!1:(N(v),!0)}))},j.onerror=function(){var v=R[s];v&&(v.errored=!0,I(function(N){return N(v),!0}))},document.body.appendChild(j)},y.componentWillUnmount=function(){var d=this.__scriptURL;if(n.removeOnUnmount===!0)for(var s=document.getElementsByTagName("script"),h=0;h<s.length;h+=1)s[h].src.indexOf(d)>-1&&s[h].parentNode&&s[h].parentNode.removeChild(s[h]);var g=R[d];g&&(delete g.observers[this.asyncScriptLoaderGetScriptLoaderID()],n.removeOnUnmount===!0&&delete R[d])},y.render=function(){var d=n.globalName,s=this.props;s.asyncScriptOnLoad;var h=s.forwardedRef,g=pt(s,["asyncScriptOnLoad","forwardedRef"]);return d&&typeof window<"u"&&(g[d]=typeof window[d]<"u"?window[d]:void 0),g.ref=h,p.createElement(r,g)},u}(p.Component),m=p.forwardRef(function(x,u){return p.createElement(c,Q({},x,{forwardedRef:u}))});return m.displayName="AsyncScriptLoader("+t+")",m.propTypes={asyncScriptOnLoad:l.func},ut(m,r)}}var Z="onloadcallback",yt="grecaptcha";function ee(){return typeof window<"u"&&window.recaptchaOptions||{}}function gt(){var e=ee(),n=e.useRecaptchaNet?"recaptcha.net":"www.google.com";return e.enterprise?"https://"+n+"/recaptcha/enterprise.js?onload="+Z+"&render=explicit":"https://"+n+"/recaptcha/api.js?onload="+Z+"&render=explicit"}const vt=mt(gt,{callbackName:Z,globalName:yt,attributes:ee().nonce?{nonce:ee().nonce}:{}})($),Pt=()=>{const e=Oe(),n=p.useRef(),{login:i,isAuthenticated:r,userInformation:t}=p.useContext(Le),{addToast:c}=p.useContext(Ne),[m,x]=p.useState(!1),[u,y]=p.useState(""),[w,d]=p.useState(""),[s,h]=p.useState(!1),g=K.object({username:K.string().min(3,{message:"Username must be at least 3 characters long"}).max(20,{message:"Username must be at most 20 characters long"}),password:K.string().min(8,{message:"Password must be at least 8 characters long"}).max(50,{message:"Password must be at most 50 characters long"})}),{register:_,handleSubmit:C,formState:{errors:S}}=Pe({resolver:ke(g)}),O=j=>{h(!0);const k=n.current.getValue();d(k),i(j.username,j.password,I=>{if(I){h(!1);const v=t.username;console.log("Login.js: onSubmit: userInformation: ",JSON.stringify(t)),console.log("Login.js: onSubmit: username: ",v),c("Login successful",`
          Welcome back, ${j.username}! You have successfully logged in.
          `,"success"),e("/dashboard")}else y("Invalid username or password"),h(!1)})},P=()=>{};return p.useEffect(()=>{r&&e("/dashboard")},[r]),o.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:o.jsxs(Me,{children:[s&&o.jsx("div",{className:"loading-overlay",children:o.jsx(Ee,{color:"primary",variant:"grow"})}),o.jsx(ze,{className:"justify-content-center",children:o.jsx(Ge,{md:8,lg:6,xl:5,className:"my-2",children:o.jsx(He,{className:"p-1 p-sm-4 shadow",children:o.jsxs(Ve,{children:[u&&o.jsxs(te,{color:"danger",className:"d-flex align-items-center",children:[o.jsx("div",{className:"me-2",children:o.jsx(L,{icon:Ie})}),o.jsx("div",{children:o.jsx("span",{children:u})})]}),o.jsxs(We,{onSubmit:C(O),children:[o.jsx("h1",{children:"Login"}),o.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),o.jsx(vt,{ref:n,size:"invisible",sitekey:ce.google.recaptcha.siteKey}),o.jsxs(le,{className:"mb-3",children:[o.jsx(Y,{children:o.jsx(L,{icon:Te})}),o.jsx(de,{type:"text",placeholder:"Username",autoComplete:"username",..._("username"),invalid:!!S.username}),S.username&&o.jsx("div",{className:"invalid-feedback",children:S.username.message})]}),o.jsxs(le,{className:"mb-3",children:[o.jsx(Y,{children:o.jsx(L,{icon:$e})}),o.jsx(de,{type:m?"text":"password",placeholder:"Password",autoComplete:"current-password",..._("password"),invalid:!!S.password}),o.jsx(Y,{children:o.jsx(qe,{content:m?"Hide password":"Show password",placement:"top",children:o.jsx("span",{onClick:()=>x(!m),children:o.jsx(L,{icon:m?Ae:Fe})})})}),S.password&&o.jsx("div",{className:"invalid-feedback",children:S.password.message})]}),o.jsx("p",{children:o.jsxs("small",{children:["By continuing, you agree to our",o.jsxs("a",{onClick:()=>e("/policy"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:[" ","Privacy Policy"," "]}),"and",o.jsxs("a",{onClick:()=>e("/terms"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:[" ","Terms of Service"]}),"."]})}),o.jsx("div",{className:"d-grid mb-3",children:o.jsxs(Be,{children:[o.jsx(E,{type:"submit",color:"primary",className:"me-2 rounded",children:"Login"}),o.jsx(E,{disabled:!0,color:"outline-primary",className:"me-2 rounded",children:"Signup"})]})}),o.jsxs("div",{className:"text-center visually-hidden",children:[o.jsx("span",{className:"text-muted d-block mb-1",children:o.jsx("small",{children:"Or continue with"})}),o.jsx(E,{color:"outline-primary",className:"me-2",onClick:P,children:o.jsx(L,{icon:De})}),o.jsx(E,{color:"outline-primary",className:"me-2",children:o.jsx(L,{icon:Ue})})]})]}),o.jsx(E,{color:"link",className:"px-0 link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",onClick:()=>e("/forgot-password"),children:"Forgot password?"})]})})})}),ce.env==="development"]})})};export{Pt as default};
