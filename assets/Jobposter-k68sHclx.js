import{r as l,o as te,H as ae,k as e,g as y,G as R,I as re,F as ie}from"./index-UTTuAW8U.js";import{z as C,u as $,t as B}from"./zod-BWNvkW38.js";import{F as d,L as ne,M as le,H as oe,J as ce,I as de,N as xe,O as he}from"./index.es-BAdYZpO5.js";import{b as me}from"./index-Cfd0Oj9N.js";import{b as w,a as T,f as D,t as H}from"./index-DQqLSrbO.js";import{C as v}from"./CContainer-C1-PhLTA.js";import{C as i,a}from"./CRow-CtyKWugl.js";import{C as j}from"./CTooltip-CT0N7Q5s.js";import{C as je}from"./CCollapse-Di6yrXkh.js";import{a as p}from"./DefaultLayout-zyy4DIyJ.js";import{a as x,C as ue,b as pe,c as fe}from"./CFormInput-CYqszj66.js";import{C as P}from"./CInputGroup-BbQKEH9b.js";import{C as f}from"./CInputGroupText-k37NtXda.js";import{C as b}from"./CFormTextarea-B0dRZNEj.js";import{C as be,a as ge}from"./CCardBody-D2FqdOjE.js";import{C as ye,a as Ce,b as I,c as h,d as we,e as o}from"./CTable-DLxNqTMQ.js";import{C as Te}from"./CButtonGroup-qJ5GgEZr.js";import"./index.esm-D3MO8Nld.js";const qe=()=>{var L,_;const O={},{addToast:m}=l.useContext(te),{id:N}=ae(),[A,E]=l.useState(!0),[G,F]=l.useState(!0),[t,J]=l.useState([]),[q,M]=l.useState([]),[u,V]=l.useState({jobposting:!0,jobposter:!0,tracker:!0}),[ve,z]=l.useState({twitter:!1,facebook:!1}),U=s=>{V({...u,[s]:!u[s]})},S=async()=>{try{E(!0);const s=await R(`/jobposting/${N}`);J(s.data.data),E(!1)}catch(s){console.log(s)}},g=async()=>{try{F(!0);const s=await R(`/jobposter/${N}`);(s.status===200||s.status===201)&&(M(s.data.data),F(!1))}catch(s){console.log(s),F(!1)}},Y=async s=>{try{const r=await re(`/jobposter/${s}`);console.log("deleteTrackerData:",r),r.status===200?(m("Success","Deleted successfully","success"),S(),g()):m("Failed","Failed to delete","danger"),g()}catch(r){console.log(r)}},Q=C.object({twitterText:C.string().min(1,{message:"Please enter a valid text"}).max(280,{message:"Max of 280 characters"}).optional()}),{register:W,reset:K,handleSubmit:X,formState:{errors:k}}=$({resolver:async(s,r,n)=>{const c=await B(Q)(s,r,n);return console.log("Validation result:",c),c}}),Z=C.object({text:C.string().min(1,{message:"Please enter a valid text"}).optional()});$({resolver:async(s,r,n)=>{const c=await B(Z)(s,r,n);return console.log("Validation result:",c),c}});const ee=async s=>{try{const r={twitter:s.twitterText,facebook:s.facebookText},n=await ie(`/jobposter/${N}/post`,r);n.status===201?(m("Success","Posted successfully","success"),S(),g()):(console.log("submitSummary: ",n),m("Failed","Failed to post","danger"))}catch{m("Failed","Failed to post","danger")}},se=async(s,r)=>{try{if(r==="twitter"){const n={twitterText:s.content};z(c=>({...c,twitter:!0})),K(n),m("Success","Post Fetched","success"),O.twitterForm.scrollIntoView({behavior:"smooth"})}}catch(n){console.log(n)}};return l.useEffect(()=>{S(),g()},[]),e.jsx(e.Fragment,{children:A?e.jsx("div",{children:"Loading..."}):e.jsxs(v,{className:"d-flex flex-column gap-2 mb-3",children:[e.jsxs(i,{children:[e.jsxs(a,{children:[e.jsx("h2",{children:"Job Posting Details"}),e.jsx("small",{children:"This is the job posting details. It will show the details of the job posting."})]}),e.jsx(a,{className:"d-flex justify-content-end",children:e.jsx("div",{children:e.jsx(j,{content:u.jobposting?"Hide Job Posting Details":"Show Job Posting Details",placement:"top",children:e.jsx(y,{color:"primary",onClick:()=>U("jobposting"),children:e.jsx(d,{icon:u.jobposting?ne:le})})})})})]}),e.jsx(i,{children:e.jsx(a,{children:e.jsx(je,{visible:u.jobposting,children:e.jsxs(v,{className:"d-flex flex-column gap-2",children:[e.jsx(i,{children:e.jsx(a,{children:e.jsx(j,{content:((L=t.status)==null?void 0:L.toLowerCase())==="active"?"This is an active job posting. This means that the job is currently open and accepting applications and have posted on social media.":"This is an inactive job posting. This means that the job posting is currently closed and not accepting applications.",placement:"top",children:e.jsx(p,{color:((_=t.status)==null?void 0:_.toLowerCase())==="active"?"success":"danger",children:w(t.status)})})})}),e.jsxs(i,{children:[e.jsx(a,{children:e.jsx(x,{id:"title",name:"title",label:"Title",value:w(t.title),readOnly:!0})}),e.jsx(a,{children:e.jsx(x,{id:"type",name:"type",label:"Type",value:w(t.type),readOnly:!0})})]}),e.jsxs(i,{children:[e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Location"}),e.jsxs(P,{className:"mt-2",children:[e.jsx(f,{children:e.jsx(d,{icon:oe})}),e.jsx(x,{id:"location",name:"location",value:w(t.location),readOnly:!0})]})]}),e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Salary"}),e.jsxs(P,{className:"mt-2",children:[e.jsx(f,{children:e.jsx(d,{icon:ce})}),e.jsx(x,{id:"salarymin",name:"salarymin",value:T(t.salary_min),readOnly:!0}),e.jsx(x,{id:"salarymax",name:"salarymax",value:T(t.salary_max),readOnly:!0})]})]})]}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Description"}),e.jsx(b,{id:"description",name:"description",value:t.description,readOnly:!0})]})}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Responsibilities"}),e.jsx(b,{id:"responsibilities",name:"responsibilities",value:t.responsibilities,readOnly:!0})]})}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Requirements"}),e.jsx(b,{id:"requirements",name:"requirements",value:t.requirements,readOnly:!0})]})}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Benefits"}),e.jsx(b,{id:"benefits",name:"benefits",value:t.benefits,readOnly:!0})]})}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Schedule"}),e.jsxs(P,{className:"mt-2",children:[e.jsx(f,{children:e.jsx(d,{icon:de})}),e.jsx(f,{children:"Start"}),e.jsx(x,{type:"date",id:"scheduleStart",name:"scheduleStart",value:D(t.schedule_start),readOnly:!0}),e.jsx(f,{children:"End"}),e.jsx(x,{type:"date",id:"scheduleEnd",name:"scheduleEnd",value:D(t.schedule_end),readOnly:!0})]})]})})]})})})}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("hr",{}),e.jsx(v,{children:e.jsxs(ue,{onSubmit:X(ee),className:"d-flex flex-column gap-2",classID:"twitterForm",ref:s=>O.twitterForm=s,children:[e.jsx("h2",{children:"Create Post"}),e.jsxs("div",{children:[e.jsxs(pe,{className:"d-flex flex-row gap-2 justify-items-center align-items-center",children:[e.jsx(d,{icon:me,className:"text-info"}),e.jsx("strong",{children:"Create Twitter Post (280 characters)"})]}),e.jsx(b,{id:"twitterText",name:"twitterText",placeholder:"Twitter Post description..",defaultValue:`NOW HIRING! 
${t.title}
Location: ${t.location}
Salary: ${T(t.salary_min)} - ${T(t.salary_max)}
=====
PM me for more details!`,...W("twitterText"),invalid:!!k.twitterText,className:"scalableCFormTextArea-200"}),e.jsx("small",{className:"text-muted",children:"If left blank, the default text will be used."}),e.jsx("br",{}),e.jsxs("small",{className:"text-muted mb-3",children:["This summary will be posted on ",e.jsx("span",{className:"text-info",children:"twitter"}),", with a character limit of 280 characters. Due to this limitation, we recommend keeping the summary short and sweet."]}),k.twitterText&&e.jsx(fe,{invalid:!0,children:k.twitterText.message})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(y,{color:"primary",type:"submit",className:"mb-3",children:"Post Tweet"})})]})})]})}),e.jsx(i,{children:e.jsx(a,{children:e.jsxs(v,{children:[e.jsxs("div",{children:[e.jsx("hr",{}),e.jsx("h2",{children:"Tracker"}),e.jsx("small",{children:"This is a tracker for the job posting. It will show the status of the job postings on various platforms."})]}),e.jsx(be,{children:e.jsx(ge,{children:e.jsxs(ye,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[e.jsx(Ce,{children:e.jsxs(I,{children:[e.jsx(h,{children:e.jsx("div",{className:"text-center",children:e.jsx("strong",{children:"#"})})}),e.jsx(h,{children:e.jsx("div",{className:"text-center",children:"Platform"})}),e.jsx(h,{children:e.jsx("div",{className:"text-center",children:"Posted"})}),e.jsx(h,{children:e.jsx("div",{className:"text-center",children:"Deleted"})}),e.jsx(h,{children:e.jsx("div",{className:"text-center",children:"Expires At"})}),e.jsx(h,{children:"Content "}),e.jsx(h,{children:e.jsx("div",{className:"text-center",children:"Actions"})})]})}),e.jsx(we,{children:G?e.jsx(I,{children:e.jsx(o,{colSpan:"7",children:"Loading..."})}):q.map((s,r)=>s?e.jsxs(I,{children:[e.jsx(o,{children:e.jsx(j,{content:s._id,placement:"top",children:e.jsx("div",{className:"text-capitalize text-center",children:H(s._id,2)})})}),e.jsx(o,{children:e.jsx("div",{className:"text-capitalize text-center",children:s.platform})}),e.jsx(o,{className:"text-center",children:s.isPosted?e.jsx(p,{color:"success",children:"YES"}):e.jsx(p,{color:"danger",children:"NO"})}),e.jsx(o,{className:"text-center",children:s.isDeleted?e.jsx(p,{color:"success",children:"YES"}):e.jsx(p,{color:"danger",children:"NO"})}),e.jsx(o,{className:"text-center",children:e.jsx("span",{className:"text-info",children:D(s.expiresAt)})}),e.jsx(o,{children:e.jsx(j,{content:s.content,placement:"top",children:e.jsx("small",{children:H(s.content,50)})})}),e.jsx(o,{className:"text-center",children:e.jsxs(Te,{children:[e.jsx(j,{content:"Delete",placement:"top",children:e.jsx(y,{color:"danger",onClick:()=>Y(s._id),children:e.jsx(d,{icon:xe})})}),e.jsx(j,{content:"Use as Template",placement:"top",children:e.jsx(y,{color:"info",onClick:()=>se(s,s.platform),children:e.jsx(d,{icon:he})})})]})})]},s._id):null)})]})})})]})})})]})})};export{qe as default};
