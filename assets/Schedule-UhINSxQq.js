import{r as a,v as _,j as e,y as O}from"./index-DJmP4oi1.js";import{z as h,u as z,t as G}from"./zod-DUXwhK-0.js";import{f as v,a as o}from"./index-B7W5ZAKh.js";import{A as H}from"./DefaultLayout-B3wRVOO4.js";import{F as J,p as U}from"./index-eE9MX41S.js";import{C}from"./CContainer-Bi4TmV07.js";import{C as w,a as S}from"./CRow-C4bqXax5.js";import{C as Y,a as q}from"./CCardBody-CsRVGBr3.js";import{C as K}from"./CCardHeader-fZYpQjk6.js";import{C as Q}from"./CForm-CXAWI-AN.js";import{C as b}from"./CFormLabel-ByYPne7n.js";import{C as D}from"./CFormInput-CXMpxMYz.js";import{C as V}from"./CButtonGroup-Dr5SINpO.js";import{a as y}from"./CButton-BokoXM6Y.js";import{C as X}from"./CTooltip-SjvLySxl.js";import{C as Z}from"./CCardFooter-D3-cekKp.js";import"./index.esm-ChogiBHI.js";import"./cil-user-Dlmw-Gem.js";import"./CFormControlWrapper-4INfD17j.js";import"./CFormControlValidation-CkCCXccc.js";import"./getRTLPlacement-DNCpgelB.js";import"./getTransitionDurationFromElement-Cpu4p4hx.js";const ye=()=>{a.useState(!1);const[i,N]=a.useState([]),[k,d]=a.useState(!0),[s,f]=a.useState({start:new Date,end:new Date,today:new Date(new Date().setDate(new Date().getDate()-1)),tomorrow:new Date(new Date().setDate(new Date().getDate()+1)),nextWeek:new Date(new Date().setDate(new Date().getDate()+7))}),[r,P]=a.useState({active:!1,inactive:!1,all:!0}),[m,u]=a.useState(1),[j,ee]=a.useState(9),[F,E]=a.useState(0),[L,$]=a.useState(0),[x,I]=a.useState([{color:"success",text:"active",isChecked:r.active},{color:"danger",text:"inactive",isChecked:r.inactive},{color:"warning",text:"both",isChecked:r.all}]),W=h.object({jpfSchedStart:h.date().optional(),jpfSchedEnd:h.date().optional()}).refine(t=>t.jpfSchedEnd>t.jpfSchedStart,{message:"End Date must be after Start Date",path:["jpfSchedEnd"]}),{register:te,handleSubmit:A,formState:{errors:se}}=z({resolver:G(W)}),g=async(t,n)=>{try{d(!0);const l=Object.keys(r).find(M=>r[M]===!0),c=await O(`/jobposting/scheduled?start=${s.today}&end=${s.nextWeek}&page=${t}&limit=${n}&sort=desc&filter=${l}`);N(c.data.data),u(c.data.currentPage),E(c.data.totalPages),$(c.data.total),d(!1)}catch(l){console.log(l),d(!1)}},R=_(),T=t=>{R(`/recruitment/jobposter/${t}`),console.log("Reviewing: ",t)},B=t=>{console.log("Legend: ",t);let n={active:!1,inactive:!1,all:!1};switch(t){case"active":n={active:!0,inactive:!1,all:!1};break;case"inactive":n={active:!1,inactive:!0,all:!1};break;case"both":n={active:!1,inactive:!1,all:!0};break;default:console.warn("Unknown legend:",t)}P(n),I(l=>l.map(p=>({...p,isChecked:p.text===t})))};return a.useEffect(()=>{g(m,j),console.log("Legends: ",x)},[s,m,j,r,x]),e.jsx(e.Fragment,{children:e.jsx(C,{children:e.jsx(w,{children:e.jsx(C,{children:e.jsxs(Y,{children:[e.jsx(K,{children:e.jsx("div",{className:"d-flex justify-content-between align-items-center",children:e.jsx("strong",{children:"Scheduled Job Postings"})})}),e.jsxs(q,{children:[e.jsx("p",{className:"text-muted",children:"You can view all scheduled job postings here. The system will not post the job posting until its given approval. by Default, the system will display all scheduled job postings from today to next week."}),e.jsx(Q,{onSubmit:A(g),children:e.jsxs(w,{className:"d-flex gap-2 align-items-end",children:[e.jsxs(S,{children:[e.jsx(b,{htmlFor:"jpfSchedStart",children:"Start Date"}),e.jsx(D,{type:"date",id:"jpfSchedStart",name:"jpfSchedStart",value:v(s.today),onChange:t=>f({...s,today:t.target.value})})]}),e.jsxs(S,{children:[e.jsx(b,{htmlFor:"jpfSchedEnd",children:"End Date"}),e.jsx(D,{type:"date",id:"jpfSchedEnd",name:"jpfSchedEnd",value:v(s.nextWeek),onChange:t=>f({...s,nextWeek:t.target.value})})]})]})}),e.jsx("div",{children:e.jsx(V,{className:"d-flex flex-row gap-2 mt-3",children:x.map((t,n)=>e.jsxs("div",{className:"d-flex flex-row gap-2 d-flex align-items-center",children:[e.jsx(y,{onClick:()=>B(t.text),className:t.isChecked?`btn btn-${t.color}`:"btn btn-outline-secondary"}),e.jsx("div",{className:"text-lowercase text-muted text-small",children:t.text})]},n))})}),k?e.jsx("p",{children:"Loading..."}):e.jsxs("div",{children:[e.jsx("hr",{}),i&&i.length>0&&e.jsxs("div",{className:"mb-3 text-uppercase d-flex flex-row gap-2",children:[e.jsxs("div",{children:["Fetched total of ",L," job postings for"]}),e.jsx("span",{className:"text-info mx-2",children:o(s.today)}),"-",e.jsx("span",{className:"text-info mx-2",children:o(s.nextWeek)})]}),e.jsx("ul",{className:"list-group",children:i.length===0?e.jsxs("p",{className:"text-uppercase",children:["No scheduled jobpostings found for",e.jsx("span",{className:"text-info mx-2",children:o(s.today)}),"-",e.jsx("span",{className:"text-info mx-2",children:o(s.nextWeek)})]}):i.map((t,n)=>e.jsxs("li",{className:"list-group-item d-flex flex-row gap-2 justify-content-between align-items-center ",children:[e.jsx("div",{className:"d-flex flex-row gap-2",children:e.jsxs("div",{children:[e.jsx("strong",{children:t.title}),e.jsxs("div",{className:"text-muted d-flex flex-row gap-2 align-items-center",children:[e.jsx("div",{style:{width:"15px",height:"15px"},className:`rounded
                                                ${t.status==="active"?"bg-success":"bg-danger"}`}),e.jsxs("div",{children:[o(t.schedule_start)," -"," ",o(t.schedule_end)]})]})]})}),e.jsx(X,{content:"Review",placement:"top",children:e.jsx(y,{type:"button",onClick:()=>T(t._id),className:"btn btn-primary d-flex flex-row gap-2 align-items-center",children:e.jsx(J,{icon:U})})})]},n))})]})]}),e.jsx(Z,{className:"d-flex justify-content-center",children:e.jsx(H,{currentPage:m,totalPages:F,onPageChange:u})})]})})})})})};export{ye as default};
