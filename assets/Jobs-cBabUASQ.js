import{F as e,B as i,C as a}from"./index.es-C3trJVa-.js";import{r}from"./react-router-dom-BnDDw25P.js";import{m as t,A as s,a as n,j as l,F as c,k as o,g as d,w as m,v as p,x as h,p as u}from"./index-D3tAU7AY.js";import{t as b}from"./index-DCO1bnrX.js";import{z as f}from"./zod-B0zZW6rS.js";import{u as y}from"./react-hook-form-DB8hWBdy.js";import{s as g}from"./@hookform/resolvers/zod-1wp20Skh.js";import{C}from"./CContainer-BR4ie7fq.js";import{C as j,a as x}from"./CRow-BNYOpc2u.js";import{C as v,a as N,b as q}from"./CModalHeader-B7MHNovK.js";import{C as w}from"./CModalTitle-hcPyglLB.js";import{C as S,a as z,b as F}from"./CFormLabel-Dokt-hw2.js";import{C as T}from"./CFormInput-8wEkUehS.js";import{C as E}from"./CFormTextarea-CSUq8iIt.js";import{C as V}from"./CFormSelect-DnZCZSEx.js";import{C as I}from"./CInputGroup-DtFQFAYz.js";import{C as O,a as k}from"./CCardBody-DiGo_jhZ.js";import{C as L,a as M,b as _,c as A,d as R,e as B}from"./CTable-BVtvZRLu.js";import{C as J}from"./CTooltip-DWX4KEIk.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./DefaultLayout-I7g3Xi84.js";import"./index.esm-D05r2ZOM.js";import"./isRTL-D5ORmfro.js";const Q=["internship","full-time","part-time","contract","temporary","freelance"],D=f.object({title:f.string().min(3).max(50),responsibilities:f.string().min(3).max(250),requirements:f.string().min(3).max(250),qualifications:f.string().min(3).max(250),benefits:f.string().min(3).max(250),category:f.enum(Q),capacity:f.number().min(1).default(1)}),G=({isVisible:e,onClose:i,state:a,job:u})=>{const{addToast:b}=r.useContext(t),{userInformation:f}=r.useContext(s),[I,O]=r.useState(!1),[k,L]=r.useState(!1),[M,_]=r.useState(!1),{register:A,watch:R,handleSubmit:B,reset:J,formState:{errors:G},setValue:H}=y({resolver:async(e,i,a)=>await g(D)(e,i,a)});return r.useEffect((()=>{e&&u&&(async()=>{try{_(!0);const e=await m(`/job/${u._id}`);200===e.status&&(_(!1),J(e.data.data))}catch(e){}})()}),[u,e]),r.useEffect((()=>{L("edit"!==a&&"create"!==a)}),[a]),n(C,{children:n(j,{children:n(x,{children:l(v,{visible:e,onClose:()=>{i(),(async()=>{J({title:"",responsibilities:"",requirements:"",qualifications:"",benefits:"",category:"temporary",capacity:1})})()},size:"lg",children:[n(N,{children:n(w,{children:"edit"===a||"create"===a?"Manage Event":"View Event"})}),n(q,{children:M?l(c,{children:[n(o,{size:"sm"}),n("span",{children:"Loading..."})]}):l(S,{onSubmit:B((async e=>{try{const i=new FormData;i.append("title",e.title),i.append("responsibilities",e.responsibilities),i.append("requirements",e.requirements),i.append("qualifications",e.qualifications),i.append("benefits",e.benefits),i.append("category",e.category),i.append("capacity",e.capacity);const r="edit"!==a?await p("/job/",i):await h(`/job/${u._id}`,i);200!==r.status&&201!==r.status||b("Success",r.data.message,"success")}catch(i){b("Error",res.message,"danger")}})),children:[n(j,{className:"mb-3",children:l(x,{children:[n(T,{type:"text",label:"Title",placeholder:"",readOnly:k,...A("title"),invalid:G.title}),G.title&&n(z,{invalid:!0,className:"text-danger",children:G.title.message})]})}),n(j,{className:"mb-3",children:l(x,{children:[n(E,{type:"text",label:"Responsibilities",placeholder:"",readOnly:k,...A("responsibilities"),invalid:G.responsibilities}),G.responsibilities&&n(z,{invalid:!0,className:"text-danger",children:G.responsibilities.message})]})}),n(j,{className:"mb-3",children:l(x,{children:[n(E,{type:"text",label:"Requirements",placeholder:"",readOnly:k,...A("requirements"),invalid:G.requirements}),G.requirements&&n(z,{invalid:!0,className:"text-danger",children:G.requirements.message})]})}),n(j,{className:"mb-3",children:l(x,{children:[n(E,{type:"text",label:"Qualifications",placeholder:"",readOnly:k,...A("qualifications"),invalid:G.qualifications}),G.qualifications&&n(z,{invalid:!0,className:"text-danger",children:G.qualifications.message})]})}),n(j,{className:"mb-3",children:l(x,{children:[n(E,{type:"text",label:"Benefits",placeholder:"",readOnly:k,...A("benefits"),invalid:G.benefits}),G.benefits&&n(z,{invalid:!0,className:"text-danger",children:G.benefits.message})]})}),n(j,{className:"mb-3",children:l(x,{children:[n(F,{htmlFor:"category",children:"Category"}),l(V,{id:"category",readOnly:k,...A("category",{required:"Please select a category"}),invalid:!!G.category,children:[n("option",{value:"",children:"Select a category"}),Q.map((e=>n("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))]}),G.category&&n(z,{invalid:!0,className:"text-danger",children:G.category.message})]})}),n(j,{className:"mb-3",children:l(x,{children:[n(T,{type:"number",label:"Capacity",defaultValue:1,placeholder:"",readOnly:k,...A("capacity",{valueAsNumber:!0}),invalid:G.capacity}),G.capacity&&n(z,{invalid:!0,className:"text-danger",children:G.capacity.message})]})}),"view"!==a&&n(j,{className:"mb-3",children:n(x,{className:"d-flex justify-content-end",children:n(d,{type:"submit",color:"primary",size:"sm",children:"edit"===a?"Update":"Create"})})}),("admin"===f.role||"manager"===f.role||"recruiter"===f)&&"create"!==a&&n(j,{children:n(x,{className:"d-flex justify-content-end",children:n(d,{color:"info",size:"sm",children:"Create Jobposting from this job?"})})})]})})]})})})})};G.propTypes={isVisible:u.bool,onClose:u.func,state:u.string,job:u.object};const H=()=>{const{userInformation:t}=r.useContext(s),[p,h]=r.useState([]),[u,f]=r.useState(!1),[y,g]=r.useState(!1),[v,N]=r.useState({}),[q,w]=r.useState("view");return r.useEffect((()=>{(async()=>{try{f(!0);const e=await m("/job/all");200===e.status&&(f(!1),h(e.data.data))}catch(e){}})()}),[]),n(c,{children:l(C,{children:[n(j,{className:"mb-3",children:l(x,{children:[n("h2",{children:"Jobs"}),n("small",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Et minima laboriosam quae beatae, tenetur tempore dignissimos voluptatum. Ea nam doloribus soluta rem. Quasi alias temporibus, error facere ad minima optio."})]})}),n(j,{children:n(x,{className:"mb-3 d-flex justify-content-end",children:n(d,{color:"primary",size:"sm",onClick:()=>{g(!0),w("create")},children:"Create"})})}),n(j,{className:"mb-3",children:n(x,{children:n(S,{children:l(I,{type:"text",id:"searchInput",name:"searchInput",placeholder:"Search...",children:[n(T,{}),n(d,{color:"primary",size:"sm",children:n(e,{icon:i})}),n(d,{color:"primary",size:"sm",children:n(e,{icon:a})})]})})})}),n(j,{children:n(x,{children:n(O,{children:n(k,{children:l(L,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[n(M,{children:l(_,{children:[n(A,{children:"#"}),n(A,{children:"Title"}),n(A,{children:"Capacity"}),n(A,{children:"Actions"})]})}),n(R,{children:u?n(_,{children:l(B,{colSpan:"4",children:[n(o,{size:"sm"})," Loading..."]})}):p.map((e=>l(_,{children:[n(J,{position:"top",content:e._id,children:n(B,{children:b(e._id,10)})}),n(B,{children:e.title}),n(B,{children:e.capacity}),n(B,{children:l("div",{className:"d-flex flex-row gap-2",children:[n(d,{color:"primary",size:"sm",onClick:()=>{N(e),g(!0),w("view")},children:"View"}),("admin"===t.role||"manager"===t.role||"recruiter"===t.role)&&n(d,{color:"warning",size:"sm",onClick:()=>{N(e),g(!0),w("edit")},children:"Manage"})]})})]},e._id)))})]})})})})}),n(j,{children:n(x,{children:n(G,{isVisible:y,onClose:()=>{g(!1)},state:q,job:v})})})]})})};export{H as default};
