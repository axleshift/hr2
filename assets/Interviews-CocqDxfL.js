import{r as e}from"./react-router-dom-BnDDw25P.js";import{F as r,A as i,B as t}from"./index.es-C7rQvpfu.js";import{A as s,a,F as n,j as o,g as l,k as c,w as d}from"./index-BJT4fTiC.js";import{t as m,f as h,b as p}from"./index-DCO1bnrX.js";import u from"./EventForm-CVpBRKaI.js";import{C as f}from"./CContainer-DbpNrOOa.js";import{C as j,a as C}from"./CRow-CBvILoJo.js";import{C as v}from"./CFormLabel-6XxpHli6.js";import{C as g}from"./CInputGroup-DtzeIo2t.js";import{C as x}from"./CFormInput-ChuQ9HWE.js";import{C as w,a as y}from"./CCardBody--50oArVU.js";import{C as S,a as N,b,c as T,d as A,e as F}from"./CTable-ByJVcr_J.js";import{C as k}from"./CTooltip-DaMyn26V.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./zod-B0zZW6rS.js";import"./react-hook-form-DB8hWBdy.js";import"./@hookform/resolvers/zod-1wp20Skh.js";import"./AppPagination-DMq9VxDB.js";import"./CModalHeader-BU-RWpvT.js";import"./DefaultLayout-D2tYzXUY.js";import"./index.esm-DSBubaFD.js";import"./isRTL-D5ORmfro.js";import"./CModalTitle-C_idPema.js";import"./CTabList-Be9-ofhm.js";import"./getTransitionDurationFromElement-2nBpLMKS.js";import"./CFormSelect-DMCzRg7Z.js";import"./CFormRange-B1FkkCrP.js";import"./CFormTextarea-D6rjc7Fq.js";import"./ConfirmationDialog-vq-2B59V.js";import"./CCardHeader-Bro6BOiY.js";const I=()=>{const{userInformation:I}=e.useContext(s),[z,L]=e.useState([]),[R,D]=e.useState(!1),[E,_]=e.useState(!1),[H,M]=e.useState("view"),[V,B]=e.useState({}),[G,P]=e.useState(1),[q,J]=e.useState(9),[K,O]=e.useState(0),[Q,W]=e.useState(0),X=async()=>{try{D(!0);const e=await d("/facilities/events/upcoming");200===e.status&&(L(e.data.data),D(!1))}catch(e){D(!1)}};return e.useEffect((()=>{const e=setTimeout((()=>{X()}),500);return()=>clearTimeout(e)}),[G,K,Q]),a(n,{children:o(f,{children:[a(j,{className:"mb-3",children:o(C,{children:[a("h2",{children:"Interviews"}),o("small",{children:["In this page, you can ",a("span",{className:"text-info",children:"view"})," and"," ",a("span",{className:"text-warning",children:"edit"})," the list of upcoming interviews."]})]})}),a(j,{className:"mb-3",children:a(C,{children:a(v,{children:o(g,{children:[a(x,{type:"search",placeholder:"Search...","aria-label":"Search"}),a(l,{type:"button",color:"primary",children:a(r,{icon:i})}),a(l,{type:"button",color:"primary",onClick:()=>{X()},children:a(r,{icon:t})})]})})})}),a(j,{className:"mb-3",children:a(C,{children:a(w,{children:a(y,{children:o(S,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[a(N,{children:o(b,{children:[a(T,{children:"#"}),a(T,{children:"Event"}),a(T,{children:"Author"}),a(T,{children:"Type"}),a(T,{children:"Date"}),a(T,{children:"Timeslot"}),a(T,{children:"Participants"}),a(T,{children:"Approved"}),a(T,{children:"Actions"})]})}),a(A,{children:R?a(b,{children:a(F,{colSpan:"12",children:a("div",{className:"d-flex justify-content-center",children:a(c,{variant:"grow",size:"sm"})})})}):0===z.length?a(b,{children:a(F,{colSpan:"12",children:a("div",{className:"d-flex justify-content-center",children:"No upcoming interviews found"})})}):z.map((e=>{var r,i,t;return o(b,{children:[a(k,{placement:"top",content:e._id,children:a(F,{children:m(e._id,10)})}),a(F,{children:e.name}),o(F,{children:[e.author.lastname,", ",e.author.firstname]}),a(F,{children:e.type}),a(F,{children:h(e.date)}),o(F,{children:[p(null==(r=e.timeslot)?void 0:r.start)," - ",p(null==(i=e.timeslot)?void 0:i.end)," "]}),a(F,{children:a("div",{className:"d-flex justify-content-center",children:null==(t=e.participants)?void 0:t.length})}),a(F,{children:e.isApproved.status?a("span",{className:"text-success",children:"Approved"}):a("small",{className:"text-danger",children:"Requires Approval"})}),a(F,{children:o("div",{className:"d-flex gap-2 flex-row",children:[a(l,{color:"info",size:"sm",onClick:()=>{M("view"),_(!0),B(e.timeslot)},children:"View"}),("admin"===I.role||"manager"===I.role)&&a(l,{color:"warning",size:"sm",onClick:()=>{M("edit"),_(!0),B(e.timeslot)},children:"Manage"})]})})]},e._id)}))})]})})})})}),a(j,{children:a(C,{children:a(u,{isVisible:E,onClose:()=>{M("view"),_(!1)},state:H,slot:V})})})]})})};export{I as default};
