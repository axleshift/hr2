import{r as c,o as ae,H as re,k as e,g as C,G as L,I as ne,F as ie}from"./index-8dmFFJ_i.js";import{z as y,u as _,t as R}from"./zod-w4xg3E0H.js";import{F as x,m as le,n as ce,p as oe,r as de,q as xe,t as he,s as me}from"./index.es-BY3aiGxY.js";import{b as je}from"./index-Dpuby3xz.js";import{C as u,c as v,b as w,f as $,t as B,a as ue}from"./index-TUeKpTRY.js";import{C as T}from"./CContainer-DYk49lQp.js";import{C as n,a as r}from"./CRow-BNC0kilN.js";import{C as A,a as H}from"./CCardBody-6MR8J0sZ.js";import{C as pe}from"./CCardHeader-DcdlUJ7o.js";import{C as fe}from"./CCollapse-DOg9hZxg.js";import{a as m}from"./DefaultLayout-DS1H8VXZ.js";import{a as h,C as be,b as ge,c as Ce}from"./CFormInput-B0ldU7KH.js";import{C as D}from"./CInputGroup-DJqzcEZc.js";import{C as p}from"./CInputGroupText-BD9Wt1Ca.js";import{C as f}from"./CFormTextarea-DmMW_-u1.js";import{C as ye,a as ve,b as P,c as o,d as we,e as l}from"./CTable-CQkdaWOv.js";import{C as Te}from"./CButtonGroup-X1A2YeKA.js";import"./index.esm-BtpFi0sf.js";const ze=()=>{var O,I;const{addToast:j}=c.useContext(ae),{id:N}=re(),[M,E]=c.useState(!0),[q,S]=c.useState(!0),[t,G]=c.useState([]),[z,U]=c.useState([]),[b,V]=c.useState({jobposting:!0,jobposter:!0,tracker:!0}),[Ne,J]=c.useState({twitter:!1,facebook:!1}),Y=s=>{V({...b,[s]:!b[s]})},F=async()=>{try{E(!0);const s=await L(`/jobposting/${N}`);G(s.data.data),E(!1)}catch(s){console.log(s)}},g=async()=>{try{S(!0);const s=await L(`/jobposter/${N}`);(s.status===200||s.status===201)&&(U(s.data.data),S(!1))}catch(s){console.log(s),S(!1)}},W=async s=>{try{const a=await ne(`/jobposter/${s}`);console.log("deleteTrackerData:",a),a.status===200?(j("Success","Deleted successfully","success"),F(),g()):j("Failed","Failed to delete","danger"),g()}catch(a){console.log(a)}},K=y.object({twitterText:y.string().min(1,{message:"Please enter a valid text"}).max(280,{message:"Max of 280 characters"}).optional()}),{register:Q,reset:X,handleSubmit:Z,formState:{errors:k}}=_({resolver:async(s,a,i)=>{const d=await R(K)(s,a,i);return console.log("Validation result:",d),d}}),ee=y.object({text:y.string().min(1,{message:"Please enter a valid text"}).optional()});_({resolver:async(s,a,i)=>{const d=await R(ee)(s,a,i);return console.log("Validation result:",d),d}});const se=async s=>{try{const a={twitter:s.twitterText,facebook:s.facebookText},i=await ie(`/jobposter/${N}/post`,a);i.status===201?(j("Success","Posted successfully","success"),F(),g()):(console.log("submitSummary: ",i),j("Failed","Failed to post","danger"))}catch{j("Failed","Failed to post","danger")}},te=async(s,a)=>{try{if(a==="twitter"){const i={twitterText:s.content};J(d=>({...d,twitter:!0})),X(i)}}catch(i){console.log(i)}};return c.useEffect(()=>{F(),g()},[]),e.jsx(e.Fragment,{children:M?e.jsx("div",{children:"Loading..."}):e.jsxs(T,{className:"d-flex flex-column gap-2 mb-3",children:[e.jsx(n,{children:e.jsx(r,{children:e.jsxs(A,{children:[e.jsxs(pe,{className:"d-flex flex-row justify-content-between align-items-center",children:[e.jsx("strong",{children:"Job Posting Details"}),e.jsx(C,{color:"primary",onClick:()=>Y("jobposting"),children:e.jsx(x,{icon:b.jobposting?le:ce})})]}),e.jsx(fe,{visible:b.jobposting,children:e.jsx(H,{children:e.jsxs(T,{className:"d-flex flex-column gap-2",children:[e.jsx(n,{children:e.jsx(r,{children:e.jsx(u,{content:((O=t.status)==null?void 0:O.toLowerCase())==="active"?"This is an active job posting. This means that the job is currently open and accepting applications and have posted on social media.":"This is an inactive job posting. This means that the job posting is currently closed and not accepting applications.",placement:"top",children:e.jsx(m,{color:((I=t.status)==null?void 0:I.toLowerCase())==="active"?"success":"danger",children:v(t.status)})})})}),e.jsxs(n,{children:[e.jsx(r,{children:e.jsx(h,{id:"title",name:"title",label:"Title",value:v(t.title),readOnly:!0})}),e.jsx(r,{children:e.jsx(h,{id:"type",name:"type",label:"Type",value:v(t.type),readOnly:!0})})]}),e.jsxs(n,{children:[e.jsxs(r,{children:[e.jsx("label",{htmlFor:"",children:"Location"}),e.jsxs(D,{className:"mt-2",children:[e.jsx(p,{children:e.jsx(x,{icon:oe})}),e.jsx(h,{id:"location",name:"location",value:v(t.location),readOnly:!0})]})]}),e.jsxs(r,{children:[e.jsx("label",{htmlFor:"",children:"Salary"}),e.jsxs(D,{className:"mt-2",children:[e.jsx(p,{children:e.jsx(x,{icon:de})}),e.jsx(h,{id:"salarymin",name:"salarymin",value:w(t.salary_min),readOnly:!0}),e.jsx(h,{id:"salarymax",name:"salarymax",value:w(t.salary_max),readOnly:!0})]})]})]}),e.jsx(n,{children:e.jsxs(r,{children:[e.jsx("label",{htmlFor:"",children:"Description"}),e.jsx(f,{id:"description",name:"description",value:t.description,readOnly:!0})]})}),e.jsx(n,{children:e.jsxs(r,{children:[e.jsx("label",{htmlFor:"",children:"Responsibilities"}),e.jsx(f,{id:"responsibilities",name:"responsibilities",value:t.responsibilities,readOnly:!0})]})}),e.jsx(n,{children:e.jsxs(r,{children:[e.jsx("label",{htmlFor:"",children:"Requirements"}),e.jsx(f,{id:"requirements",name:"requirements",value:t.requirements,readOnly:!0})]})}),e.jsx(n,{children:e.jsxs(r,{children:[e.jsx("label",{htmlFor:"",children:"Benefits"}),e.jsx(f,{id:"benefits",name:"benefits",value:t.benefits,readOnly:!0})]})}),e.jsx(n,{children:e.jsxs(r,{children:[e.jsx("label",{htmlFor:"",children:"Schedule"}),e.jsxs(D,{className:"mt-2",children:[e.jsx(p,{children:e.jsx(x,{icon:xe})}),e.jsx(p,{children:"Start"}),e.jsx(h,{type:"date",id:"scheduleStart",name:"scheduleStart",value:$(t.schedule_start),readOnly:!0}),e.jsx(p,{children:"End"}),e.jsx(h,{type:"date",id:"scheduleEnd",name:"scheduleEnd",value:$(t.schedule_end),readOnly:!0})]})]})})]})})})]})})}),e.jsx(n,{children:e.jsxs(r,{children:[e.jsx("hr",{}),e.jsx(T,{children:e.jsxs(be,{onSubmit:Z(se),className:"d-flex flex-column gap-2",children:[e.jsx("h2",{children:"Create Post"}),e.jsxs("div",{children:[e.jsxs(ge,{className:"d-flex flex-row gap-2 justify-items-center align-items-center",children:[e.jsx(x,{icon:je,className:"text-info"}),e.jsx("strong",{children:"Create Twitter Post (280 characters)"})]}),e.jsx(f,{id:"twitterText",name:"twitterText",placeholder:"Twitter Post description..",defaultValue:`NOW HIRING! 
${t.title}
Location: ${t.location}
Salary: ${w(t.salary_min)} - ${w(t.salary_max)}
=====
PM me for more details!`,...Q("twitterText"),invalid:!!k.twitterText}),e.jsx("small",{className:"text-muted",children:"If left blank, the default text will be used."}),e.jsx("br",{}),e.jsxs("small",{className:"text-muted mb-3",children:["This summary will be posted on ",e.jsx("span",{className:"text-info",children:"twitter"}),", with a character limit of 280 characters. Due to this limitation, we recommend keeping the summary short and sweet."]}),k.twitterText&&e.jsx(Ce,{invalid:!0,children:k.twitterText.message})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(C,{color:"primary",type:"submit",className:"mb-3",children:"Post Tweet"})})]})})]})}),e.jsx(n,{children:e.jsx(r,{children:e.jsxs(T,{children:[e.jsx("hr",{}),e.jsx("h2",{children:"Tracker"}),e.jsx("small",{children:"This is a tracker for the job posting. It will show the status of the job posting for this job."}),e.jsx(A,{children:e.jsx(H,{children:e.jsxs(ye,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[e.jsx(ve,{children:e.jsxs(P,{children:[e.jsx(o,{children:e.jsx("div",{className:"text-center",children:e.jsx("strong",{children:"#"})})}),e.jsx(o,{children:e.jsx("div",{className:"text-center",children:"Platform"})}),e.jsx(o,{children:e.jsx("div",{className:"text-center",children:"Status"})}),e.jsx(o,{children:e.jsx("div",{className:"text-center",children:"Posted"})}),e.jsx(o,{children:e.jsx("div",{className:"text-center",children:"Deleted"})}),e.jsx(o,{children:e.jsx("div",{className:"text-center",children:"Expires At"})}),e.jsx(o,{children:"Content "}),e.jsx(o,{children:e.jsx("div",{className:"text-center",children:"Actions"})})]})}),e.jsx(we,{children:q?e.jsx(P,{children:e.jsx(l,{colSpan:"7",children:"Loading..."})}):z.map((s,a)=>s?e.jsxs(P,{children:[e.jsx(l,{children:e.jsx(u,{content:s._id,placement:"top",interactive:!0,offset:[-10,0],children:e.jsx("div",{className:"text-capitalize text-center",children:B(s._id,2)})})}),e.jsx(l,{children:e.jsx("div",{className:"text-capitalize text-center",children:s.platform})}),e.jsx(l,{className:"text-center",children:e.jsx(m,{color:s.status==="active"?"success":"danger",children:s.status==="active"?"Active":"Inactive"})}),e.jsx(l,{className:"text-center",children:s.isPosted?e.jsx(m,{color:"success",children:"YES"}):e.jsx(m,{color:"danger",children:"NO"})}),e.jsx(l,{className:"text-center",children:s.isDeleted?e.jsx(m,{color:"success",children:"YES"}):e.jsx(m,{color:"danger",children:"NO"})}),e.jsx(l,{className:"text-center",children:e.jsx("span",{className:"text-info",children:ue(s.expiresAt)})}),e.jsx(l,{children:e.jsx(u,{content:s.content,placement:"top",interactive:!0,offset:[-10,0],children:e.jsx("small",{children:B(s.content,50)})})}),e.jsx(l,{className:"text-center",children:e.jsxs(Te,{children:[e.jsx(u,{content:"Delete",placement:"top",children:e.jsx(C,{color:"danger",onClick:()=>W(s._id),children:e.jsx(x,{icon:he})})}),e.jsx(u,{content:"Use as Template",placement:"top",children:e.jsx(C,{color:"info",onClick:()=>te(s,s.platform),children:e.jsx(x,{icon:me})})})]})})]},s._id):null)})]})})})]})})})]})})};export{ze as default};
