import{f as e,R as t}from"./react-router-dom-BnDDw25P.js";import{F as a,I as r,J as l,U as n}from"./index.es-DuBIM0a-.js";import{l as s,f as m,i as c,v as o}from"./index-B7GOa2VM.js";import{t as i,d as E,f as p}from"./index-BxAblS3e.js";import{A as u}from"./AppPagination-Dv-fpX9O.js";import{z as d}from"./zod-B0zZW6rS.js";import{u as f}from"./react-hook-form-DGCwHb0C.js";import{s as x}from"./@hookform/resolvers/zod-B5rlnuQ9.js";import{C as g}from"./CContainer-Cm5KmpuN.js";import{C as j,a as N}from"./CRow-Br3xIw5l.js";import{C as v,a as C,b as y}from"./CFormInput-XbKHKQ6a.js";import{C as b}from"./CInputGroup-CvVVsLPQ.js";import{C as S}from"./CTooltip-jIN1Mygx.js";import{C as h,a as A}from"./CCardBody-BBjnVtJK.js";import{C as q,a as w,b as P,c as k,d as F,e as T}from"./CTable-CkRzeAO8.js";import{C as Y}from"./DefaultLayout-ChKxIIMN.js";import{C as $}from"./CButtonGroup-C3ld0ua5.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./isRTL-D5ORmfro.js";import"./getTransitionDurationFromElement-2nBpLMKS.js";import"./index.esm-f6pRpclZ.js";const I=()=>{const I=e(),{addToast:R}=t.useContext(s),[z,_]=t.useState([]),[D,G]=t.useState(!1),[J,L]=t.useState(1),[M,O]=t.useState(1),[B,V]=t.useState(10),[H,K]=t.useState(!1),[Q,U]=t.useState(""),W=async(e="",t,a)=>{G(!0);try{const r=""===e||null==e?await o(`/jobposter/all?page=${t}&limit=${a}`):await o(`/jobposter/all?query=${e}&page=${t}&limit=${a}`);if(200===r.status)return _(r.data.data),O(r.data.totalPages),G(!1),void K(!1);R("Jobposts",r.message.message,"danger"),G(!1),K(!1)}catch(r){R("Danger","Failed to fetch data","Error"),G(!1),K(!1)}},X=d.object({query:d.string().min(3,{message:"Search query must be at least 3 characters"})}),{register:Z,reset:ee,handleSubmit:te,formState:{error:ae}}=f({resolver:async(e,t,a)=>await x(X)(e,t,a)});return t.useEffect((()=>{W(Q,J,B)}),[Q,J,B]),t.createElement(t.Fragment,null,t.createElement(g,null,t.createElement(j,{className:"mb-3"},t.createElement(N,null,t.createElement("h1",null,"Jobpost Tracker"),t.createElement("small",{className:"text-muted"},"In this page, you can view all the jobpost tracker data in various platforms."))),t.createElement(j,{className:"mb-3"},t.createElement(N,null,t.createElement(v,{onSubmit:te((async e=>{K(!0),W(e.query,J,B)}))},t.createElement(b,null,t.createElement(C,{type:"text",placeholder:"Search...",...Z("query"),invalid:!!(null==ae?void 0:ae.query)}),(null==ae?void 0:ae.query)&&t.createElement(y,{className:"text-danger"},ae.query.message),t.createElement(S,{content:"Search",placement:"top"},t.createElement(m,{type:"submit",className:"btn btn-primary"},t.createElement(a,{icon:r}))),t.createElement(S,{content:"Refresh",placement:"top"},t.createElement(m,{onClick:()=>{W(Q,J,B)},className:"btn btn-primary"},t.createElement(a,{icon:l}))))))),t.createElement(j,null,t.createElement(N,null,t.createElement(h,null,t.createElement(A,null,t.createElement(q,{align:"middle",hover:!0,responsive:!0,striped:!0},t.createElement(w,null,t.createElement(P,null,t.createElement(k,null,t.createElement("div",{className:"text-center"},t.createElement("strong",null,"#"))),t.createElement(k,null,t.createElement("div",{className:"text-center"},"Platform")),t.createElement(k,null,t.createElement("div",{className:"text-center"},"Approved")),t.createElement(k,null,t.createElement("div",{className:"text-center"},"Posted")),t.createElement(k,null,t.createElement("div",{className:"text-center"},"Expires At")),t.createElement(k,null,"Content "),t.createElement(k,null,t.createElement("div",{className:"text-center"},"Actions")))),t.createElement(F,null,D?t.createElement(P,null,t.createElement(T,{colSpan:"8",className:"text-center"},t.createElement(c,{color:"primary",variant:"grow"}))):0===z.length?t.createElement(P,null,t.createElement(T,{colSpan:"8"},t.createElement("div",{className:"text-center"},"No data"))):z.map((e=>t.createElement(P,{key:e._id},t.createElement(T,null,t.createElement(S,{content:e._id,placement:"top"},t.createElement("div",{className:"text-capitalize text-center"},i(e._id,2)))),t.createElement(T,null,t.createElement("div",{className:"text-capitalize text-center"},e.platform)),t.createElement(T,{className:"text-center"},e.isApproved?t.createElement(Y,{color:"success"},"YES"):t.createElement(Y,{color:"danger"},"NO")),t.createElement(T,{className:"text-center"},e.isPosted?t.createElement(Y,{color:"success"},"YES"):t.createElement(Y,{color:"danger"},"NO")),t.createElement(T,{className:"text-center"},t.createElement(S,{content:E(e.expiresAt)+" days left",placement:"top"},t.createElement("span",{className:E(e.expiresAt)>0?"text-info":"text-danger"},p(e.expiresAt,"MMM d, YYYY")))),t.createElement(T,null,t.createElement(S,{content:i(e.content,100),placement:"top"},t.createElement("small",null,i(e.content,50)))),t.createElement(T,{className:"text-center"},t.createElement($,null,t.createElement(S,{content:"View",placement:"top"},t.createElement(m,{color:"info",onClick:()=>(e=>{I(`/recruitment/jobposter/${e.ref_id}`)})(e)},t.createElement(a,{icon:n})))))))))))))),t.createElement(j,null,t.createElement("div",{className:"mt-3 d-flex flex-row gap-2 justify-content-center align-items-center"},t.createElement(u,{currentPage:J,totalPages:M,onPageChange:L})))))};export{I as default};
