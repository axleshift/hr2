import{r as c,j as e}from"./index-BTqRlzNU.js";import{z as i,u as M,e as ae,g as I,c as _,p as te,d as re}from"./index-CQgnhZE6.js";import{F as j,f as q,a as ne,b as ce,q as oe,h as le}from"./DefaultLayout-0iBsoURn.js";import{C as p}from"./index.esm-DUs5EjL4.js";import{C as d,a as u}from"./CRow-CW1B0TsK.js";import{C as k,a as E}from"./CCardBody-CuNyQdm_.js";import{C as B}from"./CCardHeader-BEx_8av2.js";import{C as f}from"./CTooltip-BYB7Nj9L.js";import{a as h}from"./cil-user-BAdj4vKc.js";import{C as ie}from"./CCollapse-Bh6PaIOH.js";import{C as H}from"./CForm-s-jRDDLq.js";import{C as S}from"./CFormInput-C8AdvKAf.js";import{C as N}from"./CFormControlValidation-6c7fEoYD.js";import{C as U}from"./CCardFooter-BtpfoN25.js";import{C as de}from"./CButtonGroup-IblmJUXg.js";import{C as me,a as m}from"./CPaginationItem-DqwP66dq.js";import"./getRTLPlacement-BWaqstQ-.js";import"./getTransitionDurationFromElement-Cpu4p4hx.js";import"./CFormControlWrapper-BIy505T4.js";import"./CFormLabel-BCODsSJI.js";const $e=()=>{const[R,z]=c.useState([]),[g,P]=c.useState(!1),[C,y]=c.useState(!0),[D,G]=c.useState(""),[$,J]=c.useState(!1),[r,o]=c.useState(1),[v,he]=c.useState(9),[l,L]=c.useState(0),w=async()=>{try{const s=$?await I(`/tags/search?query=${D}&page=${r}&limit=${v}`):await I(`/tags/all?page=${r}&limit=${v}`);s.success===!0?(console.log(s),z(s.data),L(s.totalPages),o(s.currentPage)):console.log(s)}catch(s){console.log(s)}},V=i.object({id:i.string().optional(),name:i.string().min(3,{message:"Tag name must be at least 3 characters long"}).max(50,{message:"Tag name must not exceed 50 characters"}),category:i.string().min(3,{message:"Category name must be at least 3 characters long"}).max(50,{message:"Category name must not exceed 50 characters"}),description:i.string().optional()}),{register:T,reset:F,handleSubmit:K,formState:{errors:t}}=M({resolver:async(s,a,n)=>{const x=await _(V)(s,a,n);return console.log("Validation result:",x),x}}),O=async s=>{try{const a=R.find(x=>x.name===s.name&&x.category===s.category);if(!g&&a){console.log("Tag already exist");return}const n=g?await te(`/tags/${s._id}`,s):await re("/tags",s);n.success===!0?(console.log(n.data),F({name:"",category:""}),P(!1),y(!0),w()):console.log(n)}catch{}},Q=async s=>{try{P(!0),y(!0);const a=await I(`/tags/${s}`);a.success===!0&&(console.log(a.data),F(a.data)),console.log(s)}catch{}},W=async s=>{try{console.log(s)}catch{}},X=()=>{F({name:"",category:""}),P(!1),y(!0)},Y=i.object({searchInput:i.string().min(3,{message:"Search query must be at least 3 characters long"})}),{register:Z,reset:ge,handleSubmit:ee,formState:{errors:b}}=M({resolver:_(Y)}),se=async s=>{try{console.log(s),G(s.searchInput),J(!0),w()}catch(a){console.log(a)}},A=s=>{switch(console.log("Action: ",s),s){case"firstPage":o(1);break;case"prevPage":o(a=>a-1);break;case"nextPage":o(a=>a+1);break;case"lastPage":o(l);break;default:console.warn("Unknown action:",s)}};return c.useEffect(()=>{const s=setTimeout(()=>{w()},300);return()=>clearTimeout(s)},[r,v,$,D]),e.jsxs(p,{className:"d-flex flex-column gap-3",children:[e.jsx(d,{children:e.jsx(p,{children:e.jsxs(k,{children:[e.jsx(B,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex gap-2 justify-content-between align-items-center",children:[e.jsx("strong",{children:"Jobposting Form"}),e.jsx("span",{className:g?"badge rounded-pill text text-danger":"badge rounded-pill text text-success",children:g?"Edit Mode":"Create Mode"})]}),e.jsxs("div",{className:"d-flex flex-row gap-2",children:[g&&e.jsx(f,{content:"Reset form",placement:"top",children:e.jsx(h,{onClick:()=>X(),className:"btn btn-danger",children:e.jsx(j,{icon:q})})}),e.jsx(f,{content:C?"Collapse":"Expand",placement:"top",children:e.jsx(h,{onClick:()=>y(!C),className:"btn btn-primary",children:e.jsx(j,{icon:C?ne:ce})})})]})]})}),e.jsx(ie,{visible:C,children:e.jsx(E,{children:e.jsx(H,{onSubmit:K(O),children:e.jsxs(p,{className:"d-flex flex-column gap-2",children:[e.jsx(d,{children:e.jsxs(u,{children:[e.jsx(S,{type:"hidden",id:"id",...T("id"),invalid:!!t.id}),t&&t.id&&e.jsx(N,{className:"text-danger",children:t.id.message}),e.jsx(S,{type:"text",id:"name",placeholder:"...",label:"Tag Name",...T("name"),invalid:!!t.name}),t&&t.name&&e.jsx(N,{className:"text-danger",children:t.name.message})]})}),e.jsx(d,{children:e.jsxs(u,{children:[e.jsx(S,{type:"text",id:"category",placeholder:"Category",label:"Category",...T("category"),invalid:!!t.category}),t&&t.category&&e.jsx(N,{className:"text-danger",children:t.category.message})]})}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(h,{color:"primary",type:"submit",className:"mb-3 w-25",children:"Submit"})})]})})})})]})})}),e.jsx(d,{children:e.jsx(p,{children:e.jsxs(k,{children:[e.jsx(B,{children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-center",children:e.jsx("strong",{children:"All Tags"})}),e.jsx("div",{children:e.jsxs(H,{onSubmit:ee(se),className:"d-flex flex-row gap-2",children:[e.jsxs("div",{children:[e.jsx(S,{placeholder:"...",id:"searcInput",...Z("searchInput"),invalid:!!b.searchInput}),b&&b.searchInput&&e.jsx(N,{className:"text-danger",children:b.searchInput.message})]}),e.jsx(f,{content:"Search tags",placement:"top",children:e.jsx(h,{type:"submit",className:"btn btn-primary",children:e.jsx(j,{icon:oe})})})]})})]})}),e.jsx(E,{children:e.jsx(p,{children:e.jsx(d,{children:R.map((s,a)=>e.jsx(u,{md:4,className:"mb-3",children:e.jsxs(k,{className:"h-100",children:[e.jsx(E,{children:e.jsx(d,{children:e.jsxs(u,{children:[e.jsx("h5",{children:ae(s.name)}),e.jsx("p",{children:s.category})]})})}),e.jsx(U,{children:e.jsx(d,{children:e.jsx(u,{children:e.jsxs(de,{children:[e.jsx(f,{content:"Edit tag",placement:"top",children:e.jsx(h,{color:"primary",onClick:()=>Q(s._id),children:e.jsx(j,{icon:le})})}),e.jsx(f,{content:"Delete tag",placement:"top",children:e.jsx(h,{color:"danger",onClick:()=>W(s._id),children:e.jsx(j,{icon:q})})})]})})})})]})},a))})})}),e.jsx(U,{className:"d-flex justify-content-center",children:e.jsxs(me,{children:[e.jsx(m,{onClick:()=>A("firstPage"),disabled:r===1,children:"«"}),r>3&&e.jsxs(e.Fragment,{children:[e.jsx(m,{onClick:()=>o(1),children:"1"}),e.jsx(m,{disabled:!0,children:"..."})]}),[...Array(l)].map((s,a)=>{const n=a+1;return n>=r-2&&n<=r+2?e.jsx(m,{onClick:()=>o(n),active:r===n,children:n},a):null}),r<l-2&&e.jsxs(e.Fragment,{children:[r<l-3&&e.jsx(m,{disabled:!0,children:"..."}),e.jsx(m,{onClick:()=>o(l),children:l})]}),e.jsx(m,{onClick:()=>A("nextPage"),disabled:r===l,children:"»"})]})})]})})})]})};export{$e as default};
