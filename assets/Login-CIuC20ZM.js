import{q as N,r as a,A as L,o as I,k as s,g as k,l as A}from"./index-CKEON_Fj.js";import{z as n,u as F,t as E}from"./zod-WPmh8o1j.js";import{F as d,j as U,k as G}from"./index.es-CjtBc0ja.js";import{C as u}from"./CContainer-BHmDE-_2.js";import{C as t,a as x}from"./CRow-Dwqo7vhr.js";import{C as P}from"./CCardGroup-80r_nExL.js";import{C as R,a as z}from"./CCardBody-BMsc5YCF.js";import{C as B,a as p}from"./CFormInput-DgVsO09q.js";import{C as g}from"./CInputGroup-Dfa-stSR.js";import{C as h}from"./CInputGroupText-C3fAp1k4.js";const O=()=>{const i=N(),{login:f,isAuthenticated:m,userInformation:j}=a.useContext(L),{addToast:c}=a.useContext(I),[C,r]=a.useState(!1);a.useState(""),a.useState(!1);const b=n.object({username:n.string().min(3,{message:"Username must be at least 3 characters long"}).max(20,{message:"Username must be at most 20 characters long"}),password:n.string().min(8,{message:"Password must be at least 8 characters long"}).max(50,{message:"Password must be at most 50 characters long"})}),{register:l,handleSubmit:w,formState:{errors:e}}=F({resolver:E(b)}),v=o=>{r(!0),f(o.username,o.password,y=>{if(y){r(!1);const S=j.username;console.log("Login.js: onSubmit: username: ",S),c("Login successful",`
          Welcome back, ${o.username}! You have successfully logged in.
          `,"success"),i("/dashboard")}else c("Login failed","Invalid username or password","danger"),r(!1)})};return a.useEffect(()=>{m&&i("/dashboard")},[m]),s.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:s.jsx(u,{children:s.jsx(t,{className:"justify-content-center",children:s.jsx(x,{md:6,children:s.jsx(P,{children:s.jsx(R,{children:s.jsx(z,{children:s.jsxs(B,{className:"text-center",onSubmit:w(v),children:[s.jsx("h1",{children:"Login"}),s.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),s.jsxs(u,{className:"d-flex flex-column gap-2",children:[s.jsxs(t,{children:[s.jsxs(g,{className:"mb-3",children:[s.jsx(h,{children:s.jsx(d,{icon:U})}),s.jsx(p,{type:"text",placeholder:"Username",autoComplete:"username",...l("username"),invalid:!!e.username}),e.username&&s.jsx("div",{className:"invalid-feedback",children:e.username.message})]}),s.jsxs(g,{children:[s.jsx(h,{children:s.jsx(d,{icon:G})}),s.jsx(p,{type:"password",placeholder:"Password",autoComplete:"current-password",...l("password"),invalid:!!e.password}),e.password&&s.jsx("div",{className:"invalid-feedback",children:e.password.message})]})]}),s.jsx(t,{children:s.jsx(x,{className:"d-flex flex-row gap-3 justify-content-center",children:s.jsx(k,{type:"submit",color:"primary",className:"px-5",children:C?s.jsx(A,{color:"light",size:"sm"}):"Login"})})})]})]})})})})})})})})};export{O as default};
