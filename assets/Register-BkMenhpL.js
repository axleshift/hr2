import{R as e,f as a}from"./react-router-dom-BnDDw25P.js";import{F as t,E as r,G as l,j as s,B as n}from"./index.es-DFhey9wz.js";import{z as m}from"./zod-B0zZW6rS.js";import{s as c}from"./@hookform/resolvers/zod-B5rlnuQ9.js";import{u as o}from"./react-hook-form-DGCwHb0C.js";import{l as i,f as u,r as d}from"./index-DXFVtbD_.js";import{C as E}from"./CContainer-CzB7k1pT.js";import{C as p,a as f}from"./CRow-DSqRsHFr.js";import{C as g,a as w}from"./CCardBody-D4Qo47mg.js";import{C}from"./CAlert-C6n7xqD5.js";import{C as h,a as v,b as y}from"./CFormInput-BzSWZSHN.js";import{C as b}from"./CInputGroup-8Ah49MHR.js";import{C as j}from"./CInputGroupText-B_3Av2bq.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";const N=()=>{const{addToast:N}=e.useContext(i),[k,P]=e.useState(!1),[x,S]=e.useState(""),F=a(),R=m.object({firstname:m.string().min(3,{message:"Firstname must be at least 3 characters long"}),lastname:m.string().min(3,{message:"Lastname must be at least 3 characters long"}),username:m.string().min(3,{message:"Username must be at least 3 characters long"}),email:m.string().email({message:"Invalid email format"}),password:m.string().min(8,{message:"Password must be at least 8 characters long"}),repeatPassword:m.string().min(8,{message:"Repeat password must be at least 8 characters long"})}).refine((e=>e.password===e.repeatPassword),{message:"Passwords do not match",path:["repeatPassword"]}),{register:A,reset:I,handleSubmit:L,formState:{errors:B}}=o({resolver:async(e,a,t)=>await c(R)(e,a,t)});return e.createElement("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center"},e.createElement(E,null,e.createElement(p,{className:"justify-content-center"},e.createElement(f,{md:9,lg:7,xl:6},e.createElement(g,{className:"mx-4"},e.createElement(w,{className:"p-4"},x&&e.createElement(C,{color:"success",className:"d-flex align-items-center"},e.createElement("div",{className:"me-2"},e.createElement(t,{icon:r})),e.createElement("div",null,e.createElement("span",null,x))),e.createElement(h,{onSubmit:L((async a=>{P(!0);try{if(201===(await d("/auth/register",a)).status){I();S(e.createElement("span",null,"Account created successfully. Please check your ",e.createElement("strong",null,"email")," to verify your account.")),P(!1)}else N("Error","An error occurred while creating account.","error"),P(!1)}catch(t){N("Error","An error occurred while creating account.","error"),P(!1)}}))},e.createElement(p,null,e.createElement(f,null,e.createElement("h1",null,"Register"),e.createElement("p",{className:"text-body-secondary"},"Create your account"))),e.createElement(p,null,e.createElement(f,null,e.createElement(b,{className:"mb-3"},e.createElement(j,null,e.createElement(t,{icon:l})),e.createElement(v,{placeholder:"Firstname",autoComplete:"firstname",...A("firstname"),invalid:!!B.firstname}),B.firstname&&e.createElement(y,{invalid:!0},B.firstname.message),e.createElement(j,null,e.createElement(t,{icon:l})),e.createElement(v,{placeholder:"Lastname",autoComplete:"lastname",...A("lastname"),invalid:!!B.lastname}),B.firstname&&e.createElement(y,{invalid:!0},B.firstname.message)))),e.createElement(p,null,e.createElement(f,null,e.createElement(b,{className:"mb-3"},e.createElement(j,null,e.createElement(t,{icon:l})),e.createElement(v,{placeholder:"Username",autoComplete:"username",...A("username"),invalid:!!B.username}),B.username&&e.createElement(y,{invalid:!0},B.username.message)))),e.createElement(p,null,e.createElement(f,null,e.createElement(b,{className:"mb-3"},e.createElement(j,null,e.createElement(t,{icon:s})),e.createElement(v,{placeholder:"Email",autoComplete:"email",...A("email"),invalid:!!B.email}),B.email&&e.createElement(y,{invalid:!0},B.email.message)))),e.createElement(p,null,e.createElement(f,null,e.createElement(b,{className:"mb-3"},e.createElement(j,null,e.createElement(t,{icon:n})),e.createElement(v,{type:"password",placeholder:"Password",autoComplete:"new-password",...A("password"),invalid:!!B.password}),B.password&&e.createElement(y,{invalid:!0},B.password.message)))),e.createElement(p,null,e.createElement(f,null,e.createElement(b,{className:"mb-4"},e.createElement(j,null,e.createElement(t,{icon:n})),e.createElement(v,{type:"password",placeholder:"Repeat password",autoComplete:"new-password",...A("repeatPassword"),invalid:!!B.repeatPassword}),B.repeatPassword&&e.createElement(y,{invalid:!0},B.repeatPassword.message)))),e.createElement(p,{xs:{cols:1,gutter:2},md:{cols:2,gutter:2},className:"mb-3"},e.createElement(f,{className:"d-grid"},e.createElement(u,{variant:"outline",color:"info",onClick:()=>{F("/login")}},"Login")),e.createElement(f,{className:"d-grid"},e.createElement(u,{type:"submit",color:"success",disabled:k},k?"Creating account...":"Create account"))),e.createElement(p,null,e.createElement(f,null,e.createElement("p",null,e.createElement("small",null,"By continuing, you agree to our",e.createElement("a",{onClick:()=>F("/policy"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover"}," ","Privacy Policy"," "),"and",e.createElement("a",{onClick:()=>F("/terms"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover"}," ","Terms of Service"),".")))))))))))};export{N as default};
