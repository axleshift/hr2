const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CAoye4l5.js","./Calendar-BOLJi3ea.js","./index-idxjfpO7.js","./react-router-dom-BnDDw25P.js","./react-BF1r7_8g.js","./react-dom-DgB6LS8R.js","./index-C7lYjtMO.css"])))=>i.map(i=>d[i]);
import{r as e,R as a}from"./react-router-dom-BnDDw25P.js";import{F as t,A as r,B as i,f as s,S as n,T as l}from"./index.es-CQWNrdDz.js";import{m as c,a as o,F as d,j as h,l as m,g as p,k as u,w as f,i as g,v as C,p as y}from"./index-idxjfpO7.js";import{f as S,b as v,t as b}from"./index-DCO1bnrX.js";import{C as j,a as x,b as w}from"./CModalHeader-CdUpBEI3.js";import{C as N}from"./CModalTitle-Ccg3gLsQ.js";import{C as T}from"./CFormLabel-DfytgIE9.js";import{C as _}from"./CContainer-HvLLCUu_.js";import{C as k,a as D}from"./CRow-DEvZ4-I-.js";import{C as E}from"./CFormSelect-FCYyv5dO.js";import{C as A}from"./DefaultLayout-BuWzCyjW.js";import{C as P,a as z}from"./CCardBody-BkAZIxub.js";import{C as F,a as I,b as R,c as $,d as L,e as M}from"./CTable-BPy7g7FN.js";import{A as V}from"./AppPagination-C6YUkUGB.js";import{C as O}from"./CInputGroup-D6uFn-TN.js";import{C as B}from"./CFormInput-DlBYdvLv.js";import{C as q}from"./CTooltip-BYrF9prw.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./index.esm-CNiLTC84.js";import"./isRTL-D5ORmfro.js";const H=a.lazy((()=>g((()=>import("./index-CAoye4l5.js")),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url))),G=({isVisible:a,onClose:t,isDarkMode:r,applicantData:i})=>{const{addToast:s}=e.useContext(c),[n,l]=e.useState([]),[g,y]=e.useState([]),[b,V]=e.useState([]),[O,B]=e.useState(""),[q,G]=e.useState(new Date),[W,Y]=e.useState([]),[J,K]=e.useState(!1),[Q,X]=e.useState(!1),U=async()=>{try{const e=await f(`/facilities/events/${O._id}/${q}`);200===e.status?y(e.data.data):y([])}catch(e){s("error",e.message,"Error")}},Z=async e=>{try{X(!0);const a=new FormData;a.append("applicantId",i._id);const t=await C(`/facilities/events/${e}/book`,a);200!==t.status&&201!==t.status||(s("Success","Applicant has been booked to the event","success"),U()),X(!1)}catch(a){s("error",a.message,"Error")}};return e.useEffect((()=>{O&&(q&&U(),(async()=>{try{const e=q.getMonth()+1,a=q.getFullYear(),t=await f(`/facilities/events/${O._id}/calendar-states?month=${e}&year=${a}`);l(t.data.data)}catch(e){s("error",e.message,"Error")}})()),(async()=>{try{const e=await f("/facilities/all");V(e.data.data)}catch(e){s("error",e.message,"Error")}})()}),[O,q]),o(d,{children:h(j,{visible:a,onClose:()=>{t(),B(""),y([]),l([])},size:"xl",backdrop:"static",children:[o(x,{children:h(N,{children:["Schedule an Event for ",i.firstname,", ",i.lastname]})}),o(w,{children:o(T,{children:h(_,{children:[h(k,{xs:{cols:1,gutter:2},md:{cols:2,gutter:4},children:[o(D,{children:h(E,{children:[o("option",{value:"",children:"Select Facility"}),b.map((e=>o("option",{value:e._id,onClick:()=>{B(e),G(new Date),l([])},children:e.name},e._id)))]})}),o(D,{children:o("p",{className:"text-muted",children:O?h(d,{children:[h("strong",{children:[O.location," "]}),o("br",{}),O.description]}):o("span",{className:"text-danger",children:"*Please select a facility first."})})})]}),o(k,{children:o(D,{children:o(A,{color:"warning",children:"Has Events"})})}),o(k,{className:"mb-3",children:o(D,{children:o(H,{onChange:e=>{const a=new Date(e.getTime()-6e4*e.getTimezoneOffset());G(a)},className:r?"calendar dark-mode":"calendar",defaultValue:new Date,tileClassName:({date:e})=>{const a=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0];return n.some((e=>e.startsWith(a)))?"has-events":null}})})}),"development"===m.env,o(k,{children:o(D,{children:o(P,{children:o(z,{children:o(k,{children:o(D,{children:h(F,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[o(I,{children:h(R,{children:[o($,{children:"Facilty"}),o($,{children:"Type"}),o($,{children:"Date"}),o($,{children:"Time"}),o($,{children:"Event"}),o($,{children:"Capacity"}),o($,{children:"Participants"}),o($,{children:"Actions"})]})}),o(L,{children:g.length>0?g.map((e=>h(R,{children:[o(M,{children:O.name}),o(M,{children:O.type}),o(M,{children:S(e.date)}),h(M,{children:[v(e.timeslot.start)," -"," ",v(e.timeslot.end)]}),o(M,{children:e.name}),o(M,{children:e.capacity}),o(M,{children:e.participants.length}),o(M,{children:o("div",{className:"d-flex flex-row gap-2",children:e.participants.some((e=>e.applicant.toString()===i._id.toString()))?o(p,{color:"success",disabled:!0,className:"text-white",size:"sm",onClick:()=>Z(e._id),children:"Booked"}):o(p,{color:"info",className:"text-white",size:"sm",onClick:()=>Z(e._id),children:Q?o(u,{color:"light",size:"sm"}):"Book"})})})]},e._id))):o(R,{children:h(M,{colSpan:"12",className:"text-center",children:["No events available. Please select a date from the"," ",o("span",{className:"text-info",children:"calendar"}),"."]})})})]})})})})})})})]})})})]})})};G.propTypes={isVisible:y.bool.isRequired,isDarkMode:y.bool,onClose:y.func.isRequired,applicantData:y.object};const W=()=>{const{addToast:a}=e.useContext(c),[m,g]=e.useState([]),[C,y]=e.useState(!1),[S,v]=e.useState({}),[j,x]=e.useState(""),[w,N]=e.useState(!1),[E,H]=e.useState([]),[W,Y]=e.useState([]),[J,K]=e.useState(!1),[Q,X]=e.useState(1),[U,Z]=e.useState(9),[ee,ae]=e.useState(0),[te,re]=e.useState(0),[ie,se]=e.useState(!1),ne=async()=>{try{y(!0);const e=await f("/applicant/category/shortlisted");200===e.status?(g(e.data.data),y(!1)):g([])}catch(e){a("Error",e,"danger")}finally{y(!1),X(1),re(0),ae(0)}};return e.useEffect((()=>{ne(),(async()=>{try{const e="applicant",t=await f(`/tags/category/${e}`);200===t.status?H(t.data.data):a("Error","An error occurred","danger")}catch(e){a("Error","An error occurred","danger")}})()}),[]),o(d,{children:h(_,{children:[o(k,{className:"mb-3",children:h(D,{children:[o("h2",{children:"Shortlisted"}),h("small",{children:["In this page, you can ",o("span",{className:"text-info",children:"view"})," and"," ",o("span",{className:"text-danger",children:"remove"})," applicants from being qualified for the job. As well as"," ",o("span",{className:"text-primary",children:"schedule an APPLICANT for an interview"}),"."]})]})}),o(k,{className:"mb-3",children:o(D,{children:o(T,{children:h(O,{children:[o(B,{type:"search",placeholder:"Search...","aria-label":"Search"}),o(p,{type:"button",color:"primary",children:o(t,{icon:r})}),o(p,{type:"button",color:"primary",onClick:()=>ne(),children:o(t,{icon:i})})]})})})}),o(k,{className:"mb-3",children:o(D,{children:o(P,{children:o(z,{children:h(F,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[o(I,{children:h(R,{children:[o($,{children:o("strong",{children:"#"})}),o($,{children:o(t,{icon:s})}),o($,{children:"Email"}),o($,{children:"Phone"}),o($,{children:"Tags"}),o($,{children:"Actions"})]})}),o(L,{children:C?o(R,{children:o(M,{colSpan:"6",children:o(u,{size:"sm"})})}):m.map(((e,a)=>h(R,{children:[o(M,{children:b(e._id,10)}),h(M,{children:[e.lastname,", ",e.firstname]}),o(M,{children:e.email}),o(M,{children:e.phone}),o(M,{children:o("div",{className:"d-flex flex-wrap",children:e.tags.map(((e,a)=>{var t;const r=null==(t=E.find((a=>a._id===e)))?void 0:t.name;return o(A,{shape:"rounded-pill",color:"primary",className:"me-1 mb-1",children:r},a)}))})}),o(M,{children:h("div",{className:"d-flex gap-2",children:[o(q,{content:"Remove from list",placement:"top",children:o(p,{color:"danger",size:"sm",children:o(t,{icon:n})})}),o(q,{content:"Schedule an interview",placement:"top",children:o(p,{color:"info",size:"sm",onClick:()=>{K(!0),v(e)},children:o(t,{icon:l})})})]})})]},a)))})]})})})})}),o(k,{}),o(k,{children:o(D,{children:o("div",{className:"d-flex flex-row gap-2 justify-content-center align-items-center",children:o(V,{currentPage:Q,totalPages:ee,onPageChange:X})})})}),o(k,{children:o(D,{children:o(G,{isVisible:J,onClose:()=>K(!1),isDarkMode:!0,applicantData:S})})})]})})};export{W as default};
