import{R as e,f as r}from"./react-router-dom-BnDDw25P.js";import{F as a,x as s,y as i,j as n,u as l}from"./index.es-s389u1u9.js";import{z as o}from"./zod-B0zZW6rS.js";import{s as t}from"./@hookform/resolvers/zod-B5rlnuQ9.js";import{u as c}from"./react-hook-form-DGCwHb0C.js";import{m,a as d,j as h,g as p,v as u}from"./index-DpqZzGP6.js";import{C as f}from"./CContainer-E21_-1fn.js";import{C as g,a as C}from"./CRow-BLpgN32S.js";import{C as w,a as v}from"./CCardBody-DF6la3Ia.js";import{C as y}from"./CAlert-CZokzLOl.js";import{C as b,a as j}from"./CFormLabel-QlgWDWwu.js";import{C as N}from"./CInputGroup-BSA1ZS4f.js";import{C as k}from"./CInputGroupText-Brs7ZvPC.js";import{C as x}from"./CFormInput-vYVYTfgk.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";const P=()=>{const{addToast:P}=e.useContext(m),[S,F]=e.useState(!1),[I,L]=e.useState(""),R=r(),A=o.object({firstname:o.string().min(3,{message:"Firstname must be at least 3 characters long"}),lastname:o.string().min(3,{message:"Lastname must be at least 3 characters long"}),username:o.string().min(3,{message:"Username must be at least 3 characters long"}),email:o.string().email({message:"Invalid email format"}),password:o.string().min(8,{message:"Password must be at least 8 characters long"}),repeatPassword:o.string().min(8,{message:"Repeat password must be at least 8 characters long"})}).refine((e=>e.password===e.repeatPassword),{message:"Passwords do not match",path:["repeatPassword"]}),{register:E,reset:G,handleSubmit:T,formState:{errors:z}}=c({resolver:async(e,r,a)=>await t(A)(e,r,a)});return d("div",{className:"d-flex flex-row align-items-center bg-body-tertiary min-vh-100",children:d(f,{children:d(g,{className:"justify-content-center",children:d(C,{md:9,lg:7,xl:6,children:d(w,{className:"mx-4",children:h(v,{className:"p-4",children:[I&&h(y,{color:"success",className:"d-flex align-items-center",children:[d("div",{className:"me-2",children:d(a,{icon:s})}),d("div",{children:d("span",{children:I})})]}),h(b,{onSubmit:T((async e=>{F(!0);try{if(201===(await u("/auth/register",e)).status){G();L(h("span",{children:["Account created successfully. Please check your ",d("strong",{children:"email"})," to verify your account."]})),F(!1)}else P("Error","An error occurred while creating account.","error"),F(!1)}catch(r){P("Error","An error occurred while creating account.","error"),F(!1)}})),children:[d(g,{children:h(C,{children:[d("h1",{children:"Register"}),d("p",{className:"text-body-secondary",children:"Create your account"})]})}),d(g,{children:d(C,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:i})}),d(x,{placeholder:"Firstname",autoComplete:"firstname",...E("firstname"),invalid:!!z.firstname}),z.firstname&&d(j,{invalid:!0,children:z.firstname.message}),d(k,{children:d(a,{icon:i})}),d(x,{placeholder:"Lastname",autoComplete:"lastname",...E("lastname"),invalid:!!z.lastname}),z.firstname&&d(j,{invalid:!0,children:z.firstname.message})]})})}),d(g,{children:d(C,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:i})}),d(x,{placeholder:"Username",autoComplete:"username",...E("username"),invalid:!!z.username}),z.username&&d(j,{invalid:!0,children:z.username.message})]})})}),d(g,{children:d(C,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:n})}),d(x,{placeholder:"Email",autoComplete:"email",...E("email"),invalid:!!z.email}),z.email&&d(j,{invalid:!0,children:z.email.message})]})})}),d(g,{children:d(C,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:l})}),d(x,{type:"password",placeholder:"Password",autoComplete:"new-password",...E("password"),invalid:!!z.password}),z.password&&d(j,{invalid:!0,children:z.password.message})]})})}),d(g,{children:d(C,{children:h(N,{className:"mb-4",children:[d(k,{children:d(a,{icon:l})}),d(x,{type:"password",placeholder:"Repeat password",autoComplete:"new-password",...E("repeatPassword"),invalid:!!z.repeatPassword}),z.repeatPassword&&d(j,{invalid:!0,children:z.repeatPassword.message})]})})}),h(g,{xs:{cols:1,gutter:2},md:{cols:2,gutter:2},className:"mb-3",children:[d(C,{className:"d-grid",children:d(p,{variant:"outline",color:"info",onClick:()=>{R("/login")},children:"Login"})}),d(C,{className:"d-grid",children:d(p,{type:"submit",color:"success",disabled:S,children:S?"Creating account...":"Create account"})})]}),d(g,{children:d(C,{children:d("p",{children:h("small",{children:["By continuing, you agree to our",h("a",{onClick:()=>R("/policy"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:[" ","Privacy Policy"," "]}),"and",h("a",{onClick:()=>R("/terms"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:[" ","Terms of Service"]}),"."]})})})})]})]})})})})})})};export{P as default};
