import{r as e}from"./react-router-dom-BnDDw25P.js";import{m as i,j as a,a as o,l as t,g as r,x as s,v as l,p as n}from"./index-CopbqkEz.js";import{z as d}from"./zod-B0zZW6rS.js";import{u as c}from"./react-hook-form-DGCwHb0C.js";import{s as m}from"./@hookform/resolvers/zod-B5rlnuQ9.js";import{C as p,a as u,b as y}from"./CModalHeader-CCMLCb0K.js";import{C as f}from"./CModalTitle-DhyCw6CW.js";import{C as v}from"./CFormLabel-BzT4prGI.js";import{C as h,a as b}from"./CRow-aiLILlFw.js";import{C as j}from"./CFormInput-z6oSFf3U.js";import{C}from"./CFormTextarea-D3bAwSqD.js";import{C as N}from"./CModalFooter-Cbj_E1-p.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./DefaultLayout-CA98i8wf.js";import"./CContainer-NNqe3VRY.js";import"./index.esm-t9-9Td7j.js";import"./index.es-Bu1yrmVS.js";import"./isRTL-D5ORmfro.js";const g=({isVisible:n,onClose:g,isEdit:x,facilityData:F})=>{const{addToast:T}=e.useContext(i),q=d.object({name:d.string().nonempty("Name is required"),type:d.string().nonempty("Type is required"),description:d.string().nonempty("Description is required"),location:d.string().nonempty("Location is required")}),{register:D,handleSubmit:k,reset:E,formState:{errors:L}}=c({resolver:m(q)});return e.useEffect((()=>{n||E(),x&&E({name:null==F?void 0:F.name,type:null==F?void 0:F.type,description:null==F?void 0:F.description,location:null==F?void 0:F.location})}),[n,x]),a(p,{visible:n,onClose:()=>{E(),g()},children:[o(u,{children:o(f,x?{children:"Edit Facility"}:{children:"Add Facility"})}),o(y,{children:a(v,{onSubmit:k((async e=>{try{const i=new FormData;i.append("name",e.name),i.append("type",e.type),i.append("description",e.description),i.append("location",e.location);const a=x?await s(`/facilities/update/${F._id}`,i):await l("/facilities/create",e);200!==a.status&&201!==a.status||T("Success","Facility Added Successfully","success"),E(),g()}catch(i){T("Error","An Error Occurred","danger")}})),children:[o(h,{className:"mb-3",children:a(b,{children:[o(j,{type:"text",label:"Facility Name",placeholder:"Facility Name",...D("name"),defaultValue:null==F?void 0:F.name,invalid:!!(null==L?void 0:L.name)}),L.name&&o("div",{className:"invalid-feedback",children:L.name.message})]})}),o(h,{className:"mb-3",children:a(b,{children:[o(j,{type:"text",label:"Type",placeholder:"Type",...D("type"),defaultValue:null==F?void 0:F.type,invalid:!!(null==L?void 0:L.type)}),L.type&&o("div",{className:"invalid-feedback",children:L.type.message})]})}),o(h,{className:"mb-3",children:a(b,{children:[o(C,{type:"text",rows:5,label:"Description",placeholder:"Description",...D("description"),defaultValue:null==F?void 0:F.description,invalid:!!(null==L?void 0:L.description)}),L.description&&o("div",{className:"invalid-feedback",children:L.description.message})]})}),o(h,{className:"mb-3",children:a(b,{children:[o(j,{type:"text",label:"Location",placeholder:"Location",...D("location"),defaultValue:null==F?void 0:F.location,invalid:!!(null==L?void 0:L.location)}),L.location&&o("div",{className:"invalid-feedback",children:L.location.message})]})}),a(N,{children:["development"===t.env,o(r,{color:"primary",type:"submit",children:x?"Update":"Create"})]})]})})]})};g.propTypes={isVisible:n.bool.isRequired,onClose:n.func.isRequired,isEdit:n.bool.isRequired,facilityData:n.object};export{g as default};
