import{R as e}from"./react-router-dom-BnDDw25P.js";var r=e=>"checkbox"===e.type,t=e=>e instanceof Date,s=e=>null==e;const a=e=>"object"==typeof e;var i=e=>!s(e)&&!Array.isArray(e)&&a(e)&&!t(e),n="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function o(e){let r;const t=Array.isArray(e);if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else{if(n&&(e instanceof Blob||e instanceof FileList)||!t&&!i(e))return e;if(r=t?[]:{},t||(e=>{const r=e.constructor&&e.constructor.prototype;return i(r)&&r.hasOwnProperty("isPrototypeOf")})(e))for(const t in e)e.hasOwnProperty(t)&&(r[t]=o(e[t]));else r=e}return r}var u=e=>Array.isArray(e)?e.filter(Boolean):[],l=e=>void 0===e,d=(e,r,t)=>{if(!r||!i(e))return t;const a=u(r.split(/[,[\].]+?/)).reduce(((e,r)=>s(e)?e:e[r]),e);return l(a)||a===e?l(e[r])?t:e[r]:a},c=e=>"boolean"==typeof e,f=e=>/^\w*$/.test(e),m=e=>u(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,r,t)=>{let s=-1;const a=f(r)?[r]:m(r),n=a.length,o=n-1;for(;++s<n;){const r=a[s];let n=t;if(s!==o){const t=e[r];n=i(t)||Array.isArray(t)?t:isNaN(+a[s+1])?{}:[]}if("__proto__"===r)return;e[r]=n,e=e[r]}return e};const v="blur",g="focusout",p="onBlur",_="onChange",h="onSubmit",b="onTouched",A="all",x="max",F="min",V="maxLength",S="minLength",w="pattern",k="required",D="validate",E=e.createContext(null);var O=e=>i(e)&&!Object.keys(e).length,C=e=>Array.isArray(e)?e:[e];function j(r){const t=e.useRef(r);t.current=r,e.useEffect((()=>{const e=!r.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{e&&e.unsubscribe()}}),[r.disabled])}var N=e=>"string"==typeof e,B=(e,r,t,s,a)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[s]:a||!0}}:{},T=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(r=>{const t=(16*Math.random()+e)%16|0;return("x"==r?t:3&t|8).toString(16)}))},U=(e,r,t={})=>t.shouldFocus||l(t.shouldFocus)?t.focusName||`${e}.${l(t.focusIndex)?r:t.focusIndex}.`:"",L=e=>({isOnSubmit:!e||e===h,isOnBlur:e===p,isOnChange:e===_,isOnAll:e===A,isOnTouch:e===b}),M=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some((r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length)))));const R=(e,r,t,s)=>{for(const a of t||Object.keys(e)){const t=d(e,a);if(t){const{_f:e,...n}=t;if(e){if(e.refs&&e.refs[0]&&r(e.refs[0],a)&&!s)return!0;if(e.ref&&r(e.ref,e.name)&&!s)return!0;if(R(n,r))break}else if(i(n)&&R(n,r))break}}};var q=(e,r,t)=>{const s=C(d(e,t));return y(s,"root",r[t]),y(e,t,s),e},I=e=>"file"===e.type,P=e=>"function"==typeof e,$=e=>{if(!n)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},W=e=>N(e),H=e=>"radio"===e.type,z=e=>e instanceof RegExp;const G={value:!1,isValid:!1},J={value:!0,isValid:!0};var K=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!l(e[0].attributes.value)?l(e[0].value)||""===e[0].value?J:{value:e[0].value,isValid:!0}:J:G}return G};const Q={isValid:!1,value:null};var X=e=>Array.isArray(e)?e.reduce(((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e),Q):Q;function Y(e,r,t="validate"){if(W(e)||Array.isArray(e)&&e.every(W)||c(e)&&!e)return{type:t,message:W(e)?e:"",ref:r}}var Z=e=>i(e)&&!z(e)?e:{value:e,message:""},ee=async(e,t,a,n,o)=>{const{ref:u,refs:f,required:m,maxLength:y,minLength:v,min:g,max:p,pattern:_,validate:h,name:b,valueAsNumber:A,mount:E,disabled:C}=e._f,j=d(t,b);if(!E||C)return{};const T=f?f[0]:u,U=e=>{n&&T.reportValidity&&(T.setCustomValidity(c(e)?"":e||""),T.reportValidity())},L={},M=H(u),R=r(u),q=M||R,G=(A||I(u))&&l(u.value)&&l(j)||$(u)&&""===u.value||""===j||Array.isArray(j)&&!j.length,J=B.bind(null,b,a,L),Q=(e,r,t,s=V,a=S)=>{const i=e?r:t;L[b]={type:e?s:a,message:i,ref:u,...J(e?s:a,i)}};if(o?!Array.isArray(j)||!j.length:m&&(!q&&(G||s(j))||c(j)&&!j||R&&!K(f).isValid||M&&!X(f).isValid)){const{value:e,message:r}=W(m)?{value:!!m,message:m}:Z(m);if(e&&(L[b]={type:k,message:r,ref:T,...J(k,r)},!a))return U(r),L}if(!(G||s(g)&&s(p))){let e,r;const t=Z(p),i=Z(g);if(s(j)||isNaN(j)){const s=u.valueAsDate||new Date(j),a=e=>new Date((new Date).toDateString()+" "+e),n="time"==u.type,o="week"==u.type;N(t.value)&&j&&(e=n?a(j)>a(t.value):o?j>t.value:s>new Date(t.value)),N(i.value)&&j&&(r=n?a(j)<a(i.value):o?j<i.value:s<new Date(i.value))}else{const a=u.valueAsNumber||(j?+j:j);s(t.value)||(e=a>t.value),s(i.value)||(r=a<i.value)}if((e||r)&&(Q(!!e,t.message,i.message,x,F),!a))return U(L[b].message),L}if((y||v)&&!G&&(N(j)||o&&Array.isArray(j))){const e=Z(y),r=Z(v),t=!s(e.value)&&j.length>+e.value,i=!s(r.value)&&j.length<+r.value;if((t||i)&&(Q(t,e.message,r.message),!a))return U(L[b].message),L}if(_&&!G&&N(j)){const{value:e,message:r}=Z(_);if(z(e)&&!j.match(e)&&(L[b]={type:w,message:r,ref:u,...J(w,r)},!a))return U(r),L}if(h)if(P(h)){const e=Y(await h(j,t),T);if(e&&(L[b]={...e,...J(D,e.message)},!a))return U(e.message),L}else if(i(h)){let e={};for(const r in h){if(!O(e)&&!a)break;const s=Y(await h[r](j,t),T,r);s&&(e={...s,...J(r,s.message)},U(s.message),a&&(L[b]=e))}if(!O(e)&&(L[b]={ref:T,...e},!a))return L}return U(!0),L},re=(e,r)=>[...e,...C(r)],te=e=>Array.isArray(e)?e.map((()=>{})):void 0;function se(e,r,t){return[...e.slice(0,r),...C(t),...e.slice(r)]}var ae=(e,r,t)=>Array.isArray(e)?(l(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[],ie=(e,r)=>[...C(r),...C(e)];var ne=(e,r)=>l(r)?[]:function(e,r){let t=0;const s=[...e];for(const a of r)s.splice(a-t,1),t++;return u(s).length?s:[]}(e,C(r).sort(((e,r)=>e-r))),oe=(e,r,t)=>{[e[r],e[t]]=[e[t],e[r]]};function ue(e,r){const t=Array.isArray(r)?r:f(r)?[r]:m(r),s=1===t.length?e:function(e,r){const t=r.slice(0,-1).length;let s=0;for(;s<t;)e=l(e)?s++:e[r[s++]];return e}(e,t),a=t.length-1,n=t[a];return s&&delete s[n],0!==a&&(i(s)&&O(s)||Array.isArray(s)&&function(e){for(const r in e)if(e.hasOwnProperty(r)&&!l(e[r]))return!1;return!0}(s))&&ue(e,t.slice(0,-1)),e}var le=(e,r,t)=>(e[r]=t,e);function de(r){const t=e.useContext(E),{control:s=t.control,name:a,keyName:i="id",shouldUnregister:n}=r,[u,l]=e.useState(s._getFieldArray(a)),c=e.useRef(s._getFieldArray(a).map(T)),f=e.useRef(u),m=e.useRef(a),v=e.useRef(!1);m.current=a,f.current=u,s._names.array.add(a),r.rules&&s.register(a,r.rules),j({next:({values:e,name:r})=>{if(r===m.current||!r){const r=d(e,m.current);Array.isArray(r)&&(l(r),c.current=r.map(T))}},subject:s._subjects.array});const g=e.useCallback((e=>{v.current=!0,s._updateFieldArray(a,e)}),[s,a]);return e.useEffect((()=>{if(s._state.action=!1,M(a,s._names)&&s._subjects.state.next({...s._formState}),v.current&&(!L(s._options.mode).isOnSubmit||s._formState.isSubmitted))if(s._options.resolver)s._executeSchema([a]).then((e=>{const r=d(e.errors,a),t=d(s._formState.errors,a);(t?!r&&t.type||r&&(t.type!==r.type||t.message!==r.message):r&&r.type)&&(r?y(s._formState.errors,a,r):ue(s._formState.errors,a),s._subjects.state.next({errors:s._formState.errors}))}));else{const e=d(s._fields,a);!e||!e._f||L(s._options.reValidateMode).isOnSubmit&&L(s._options.mode).isOnSubmit||ee(e,s._formValues,s._options.criteriaMode===A,s._options.shouldUseNativeValidation,!0).then((e=>!O(e)&&s._subjects.state.next({errors:q(s._formState.errors,e,a)})))}s._subjects.values.next({name:a,values:{...s._formValues}}),s._names.focus&&R(s._fields,((e,r)=>{if(s._names.focus&&r.startsWith(s._names.focus)&&e.focus)return e.focus(),1})),s._names.focus="",s._updateValid(),v.current=!1}),[u,a,s]),e.useEffect((()=>(!d(s._formValues,a)&&s._updateFieldArray(a),()=>{(s._options.shouldUnregister||n)&&s.unregister(a)})),[a,s,i,n]),{swap:e.useCallback(((e,r)=>{const t=s._getFieldArray(a);oe(t,e,r),oe(c.current,e,r),g(t),l(t),s._updateFieldArray(a,t,oe,{argA:e,argB:r},!1)}),[g,a,s]),move:e.useCallback(((e,r)=>{const t=s._getFieldArray(a);ae(t,e,r),ae(c.current,e,r),g(t),l(t),s._updateFieldArray(a,t,ae,{argA:e,argB:r},!1)}),[g,a,s]),prepend:e.useCallback(((e,r)=>{const t=C(o(e)),i=ie(s._getFieldArray(a),t);s._names.focus=U(a,0,r),c.current=ie(c.current,t.map(T)),g(i),l(i),s._updateFieldArray(a,i,ie,{argA:te(e)})}),[g,a,s]),append:e.useCallback(((e,r)=>{const t=C(o(e)),i=re(s._getFieldArray(a),t);s._names.focus=U(a,i.length-1,r),c.current=re(c.current,t.map(T)),g(i),l(i),s._updateFieldArray(a,i,re,{argA:te(e)})}),[g,a,s]),remove:e.useCallback((e=>{const r=ne(s._getFieldArray(a),e);c.current=ne(c.current,e),g(r),l(r),s._updateFieldArray(a,r,ne,{argA:e})}),[g,a,s]),insert:e.useCallback(((e,r,t)=>{const i=C(o(r)),n=se(s._getFieldArray(a),e,i);s._names.focus=U(a,e,t),c.current=se(c.current,e,i.map(T)),g(n),l(n),s._updateFieldArray(a,n,se,{argA:e,argB:te(r)})}),[g,a,s]),update:e.useCallback(((e,r)=>{const t=o(r),i=le(s._getFieldArray(a),e,t);c.current=[...i].map(((r,t)=>r&&t!==e?c.current[t]:T())),g(i),l([...i]),s._updateFieldArray(a,i,le,{argA:e,argB:t},!0,!1)}),[g,a,s]),replace:e.useCallback((e=>{const r=C(o(e));c.current=r.map(T),g([...r]),l([...r]),s._updateFieldArray(a,[...r],(e=>e),{},!0,!1)}),[g,a,s]),fields:e.useMemo((()=>u.map(((e,r)=>({...e,[i]:c.current[r]||T()})))),[u,i])}}var ce=()=>{let e=[];return{get observers(){return e},next:r=>{for(const t of e)t.next&&t.next(r)},subscribe:r=>(e.push(r),{unsubscribe:()=>{e=e.filter((e=>e!==r))}}),unsubscribe:()=>{e=[]}}},fe=e=>s(e)||!a(e);function me(e,r){if(fe(e)||fe(r))return e===r;if(t(e)&&t(r))return e.getTime()===r.getTime();const s=Object.keys(e),a=Object.keys(r);if(s.length!==a.length)return!1;for(const n of s){const s=e[n];if(!a.includes(n))return!1;if("ref"!==n){const e=r[n];if(t(s)&&t(e)||i(s)&&i(e)||Array.isArray(s)&&Array.isArray(e)?!me(s,e):s!==e)return!1}}return!0}var ye=e=>"select-multiple"===e.type,ve=e=>$(e)&&e.isConnected,ge=e=>{for(const r in e)if(P(e[r]))return!0;return!1};function pe(e,r={}){const t=Array.isArray(e);if(i(e)||t)for(const a in e)Array.isArray(e[a])||i(e[a])&&!ge(e[a])?(r[a]=Array.isArray(e[a])?[]:{},pe(e[a],r[a])):s(e[a])||(r[a]=!0);return r}function _e(e,r,t){const a=Array.isArray(e);if(i(e)||a)for(const n in e)Array.isArray(e[n])||i(e[n])&&!ge(e[n])?l(r)||fe(t[n])?t[n]=Array.isArray(e[n])?pe(e[n],[]):{...pe(e[n])}:_e(e[n],s(r)?{}:r[n],t[n]):t[n]=!me(e[n],r[n]);return t}var he=(e,r)=>_e(e,r,pe(r)),be=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:s})=>l(e)?e:r?""===e?NaN:e?+e:e:t&&N(e)?new Date(e):s?s(e):e;function Ae(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return I(t)?t.files:H(t)?X(e.refs).value:ye(t)?[...t.selectedOptions].map((({value:e})=>e)):r(t)?K(e.refs).value:be(l(t.value)?e.ref.value:t.value,e)}var xe=e=>l(e)?e:z(e)?e.source:i(e)?z(e.value)?e.value.source:e.value:e;const Fe="AsyncFunction";function Ve(e,r,t){const s=d(e,t);if(s||f(t))return{error:s,name:t};const a=t.split(".");for(;a.length;){const s=a.join("."),i=d(r,s),n=d(e,s);if(i&&!Array.isArray(i)&&t!==s)return{name:t};if(n&&n.type)return{name:s,error:n};a.pop()}return{name:t}}const Se={mode:h,reValidateMode:_,shouldFocusError:!0};function we(e={}){let a,f={...Se,...e},m={submitCount:0,isDirty:!1,isLoading:P(f.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:f.errors||{},disabled:f.disabled||!1},p={},_=(i(f.defaultValues)||i(f.values))&&o(f.defaultValues||f.values)||{},h=f.shouldUnregister?{}:o(_),b={action:!1,mount:!1,watch:!1},x={mount:new Set,unMount:new Set,array:new Set,watch:new Set},F=0;const V={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},S={values:ce(),array:ce(),state:ce()},w=L(f.mode),k=L(f.reValidateMode),D=f.criteriaMode===A,E=async e=>{if(V.isValid||e){const e=f.resolver?O((await W()).errors):await z(p,!0);e!==m.isValid&&S.state.next({isValid:e})}},j=(e,r)=>{(V.isValidating||V.validatingFields)&&((e||Array.from(x.mount)).forEach((e=>{e&&(r?y(m.validatingFields,e,r):ue(m.validatingFields,e))})),S.state.next({validatingFields:m.validatingFields,isValidating:!O(m.validatingFields)}))},B=(e,r,t,s)=>{const a=d(p,e);if(a){const i=d(h,e,l(t)?d(_,e):t);l(i)||s&&s.defaultChecked||r?y(h,e,r?i:Ae(a._f)):K(e,i),b.mount&&E()}},T=(e,r,t,s,a)=>{let i=!1,n=!1;const o={name:e},u=!!(d(p,e)&&d(p,e)._f&&d(p,e)._f.disabled);if(!t||s){V.isDirty&&(n=m.isDirty,m.isDirty=o.isDirty=G(),i=n!==o.isDirty);const t=u||me(d(_,e),r);n=!(u||!d(m.dirtyFields,e)),t||u?ue(m.dirtyFields,e):y(m.dirtyFields,e,!0),o.dirtyFields=m.dirtyFields,i=i||V.dirtyFields&&n!==!t}if(t){const r=d(m.touchedFields,e);r||(y(m.touchedFields,e,t),o.touchedFields=m.touchedFields,i=i||V.touchedFields&&r!==t)}return i&&a&&S.state.next(o),i?o:{}},U=(r,t,s,i)=>{const n=d(m.errors,r),o=V.isValid&&c(t)&&m.isValid!==t;var u;if(e.delayError&&s?(u=()=>((e,r)=>{y(m.errors,e,r),S.state.next({errors:m.errors})})(r,s),a=e=>{clearTimeout(F),F=setTimeout(u,e)},a(e.delayError)):(clearTimeout(F),a=null,s?y(m.errors,r,s):ue(m.errors,r)),(s?!me(n,s):n)||!O(i)||o){const e={...i,...o&&c(t)?{isValid:t}:{},errors:m.errors,name:r};m={...m,...e},S.state.next(e)}},W=async e=>{j(e,!0);const r=await f.resolver(h,f.context,((e,r,t,s)=>{const a={};for(const i of e){const e=d(r,i);e&&y(a,i,e._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:s}})(e||x.mount,p,f.criteriaMode,f.shouldUseNativeValidation));return j(e),r},z=async(e,r,t={valid:!0})=>{for(const a in e){const n=e[a];if(n){const{_f:e,...o}=n;if(e){const o=x.array.has(e.name),u=n._f&&!((s=n._f)&&s.validate||!(P(s.validate)&&s.validate.constructor.name===Fe||i(s.validate)&&Object.values(s.validate).find((e=>e.constructor.name===Fe))));u&&V.validatingFields&&j([a],!0);const l=await ee(n,h,D,f.shouldUseNativeValidation&&!r,o);if(u&&V.validatingFields&&j([a]),l[e.name]&&(t.valid=!1,r))break;!r&&(d(l,e.name)?o?q(m.errors,l,e.name):y(m.errors,e.name,l[e.name]):ue(m.errors,e.name))}!O(o)&&await z(o,r,t)}}var s;return t.valid},G=(e,r)=>(e&&r&&y(h,e,r),!me(te(),_)),J=(e,r,t)=>((e,r,t,s,a)=>N(e)?(s&&r.watch.add(e),d(t,e,a)):Array.isArray(e)?e.map((e=>(s&&r.watch.add(e),d(t,e)))):(s&&(r.watchAll=!0),t))(e,x,{...b.mount?h:l(r)?_:N(e)?{[e]:r}:r},t,r),K=(e,t,a={})=>{const i=d(p,e);let n=t;if(i){const a=i._f;a&&(!a.disabled&&y(h,e,be(t,a)),n=$(a.ref)&&s(t)?"":t,ye(a.ref)?[...a.ref.options].forEach((e=>e.selected=n.includes(e.value))):a.refs?r(a.ref)?a.refs.length>1?a.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(n)?!!n.find((r=>r===e.value)):n===e.value))):a.refs[0]&&(a.refs[0].checked=!!n):a.refs.forEach((e=>e.checked=e.value===n)):I(a.ref)?a.ref.value="":(a.ref.value=n,a.ref.type||S.values.next({name:e,values:{...h}})))}(a.shouldDirty||a.shouldTouch)&&T(e,n,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&re(e)},Q=(e,r,s)=>{for(const a in r){const i=r[a],n=`${e}.${a}`,o=d(p,n);!x.array.has(e)&&fe(i)&&(!o||o._f)||t(i)?K(n,i,s):Q(n,i,s)}},X=(e,r,t={})=>{const a=d(p,e),i=x.array.has(e),n=o(r);y(h,e,n),i?(S.array.next({name:e,values:{...h}}),(V.isDirty||V.dirtyFields)&&t.shouldDirty&&S.state.next({name:e,dirtyFields:he(_,h),isDirty:G(e,n)})):!a||a._f||s(n)?K(e,n,t):Q(e,n,t),M(e,x)&&S.state.next({...m}),S.values.next({name:b.mount?e:void 0,values:{...h}})},Y=async t=>{b.mount=!0;const s=t.target;let n=s.name,o=!0;const u=d(p,n),l=()=>s.type?Ae(u._f):(e=>i(e)&&e.target?r(e.target)?e.target.checked:e.target.value:e)(t),c=e=>{o=Number.isNaN(e)||me(e,d(h,n,e))};if(u){let r,s;const i=l(),b=t.type===v||t.type===g,A=!((_=u._f).mount&&(_.required||_.min||_.max||_.maxLength||_.minLength||_.pattern||_.validate)||f.resolver||d(m.errors,n)||u._f.deps)||((e,r,t,s,a)=>!a.isOnAll&&(!t&&a.isOnTouch?!(r||e):(t?s.isOnBlur:a.isOnBlur)?!e:!(t?s.isOnChange:a.isOnChange)||e))(b,d(m.touchedFields,n),m.isSubmitted,k,w),F=M(n,x,b);y(h,n,i),b?(u._f.onBlur&&u._f.onBlur(t),a&&a(0)):u._f.onChange&&u._f.onChange(t);const C=T(n,i,b,!1),N=!O(C)||F;if(!b&&S.values.next({name:n,type:t.type,values:{...h}}),A)return V.isValid&&("onBlur"===e.mode?b&&E():E()),N&&S.state.next({name:n,...F?{}:C});if(!b&&F&&S.state.next({...m}),f.resolver){const{errors:e}=await W([n]);if(c(i),o){const t=Ve(m.errors,p,n),a=Ve(e,p,t.name||n);r=a.error,n=a.name,s=O(e)}}else j([n],!0),r=(await ee(u,h,D,f.shouldUseNativeValidation))[n],j([n]),c(i),o&&(r?s=!1:V.isValid&&(s=await z(p,!0)));o&&(u._f.deps&&re(u._f.deps),U(n,s,r,C))}var _},Z=(e,r)=>{if(d(m.errors,r)&&e.focus)return e.focus(),1},re=async(e,r={})=>{let t,s;const a=C(e);if(f.resolver){const r=await(async e=>{const{errors:r}=await W(e);if(e)for(const t of e){const e=d(r,t);e?y(m.errors,t,e):ue(m.errors,t)}else m.errors=r;return r})(l(e)?e:a);t=O(r),s=e?!a.some((e=>d(r,e))):t}else e?(s=(await Promise.all(a.map((async e=>{const r=d(p,e);return await z(r&&r._f?{[e]:r}:r)})))).every(Boolean),(s||m.isValid)&&E()):s=t=await z(p);return S.state.next({...!N(e)||V.isValid&&t!==m.isValid?{}:{name:e},...f.resolver||!e?{isValid:t}:{},errors:m.errors}),r.shouldFocus&&!s&&R(p,Z,e?a:x.mount),s},te=e=>{const r={...b.mount?h:_};return l(e)?r:N(e)?d(r,e):e.map((e=>d(r,e)))},se=(e,r)=>({invalid:!!d((r||m).errors,e),isDirty:!!d((r||m).dirtyFields,e),error:d((r||m).errors,e),isValidating:!!d(m.validatingFields,e),isTouched:!!d((r||m).touchedFields,e)}),ae=(e,r,t)=>{const s=(d(p,e,{_f:{}})._f||{}).ref,a=d(m.errors,e)||{},{ref:i,message:n,type:o,...u}=a;y(m.errors,e,{...u,...r,ref:s}),S.state.next({name:e,errors:m.errors,isValid:!1}),t&&t.shouldFocus&&s&&s.focus&&s.focus()},ie=(e,r={})=>{for(const t of e?C(e):x.mount)x.mount.delete(t),x.array.delete(t),r.keepValue||(ue(p,t),ue(h,t)),!r.keepError&&ue(m.errors,t),!r.keepDirty&&ue(m.dirtyFields,t),!r.keepTouched&&ue(m.touchedFields,t),!r.keepIsValidating&&ue(m.validatingFields,t),!f.shouldUnregister&&!r.keepDefaultValue&&ue(_,t);S.values.next({values:{...h}}),S.state.next({...m,...r.keepDirty?{isDirty:G()}:{}}),!r.keepIsValid&&E()},ne=({disabled:e,name:r,field:t,fields:s,value:a})=>{if(c(e)&&b.mount||e){const i=e?void 0:l(a)?Ae(t?t._f:d(s,r)._f):a;y(h,r,i),T(r,i,!1,!1,!0)}},oe=(t,s={})=>{let a=d(p,t);const i=c(s.disabled)||c(e.disabled);return y(p,t,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:t}},name:t,mount:!0,...s}}),x.mount.add(t),a?ne({field:a,disabled:c(s.disabled)?s.disabled:e.disabled,name:t,value:s.value}):B(t,!0,s.value),{...i?{disabled:s.disabled||e.disabled}:{},...f.progressive?{required:!!s.required,min:xe(s.min),max:xe(s.max),minLength:xe(s.minLength),maxLength:xe(s.maxLength),pattern:xe(s.pattern)}:{},name:t,onChange:Y,onBlur:Y,ref:e=>{if(e){oe(t,s),a=d(p,t);const i=l(e.value)&&e.querySelectorAll&&e.querySelectorAll("input,select,textarea")[0]||e,n=(e=>H(e)||r(e))(i),o=a._f.refs||[];if(n?o.find((e=>e===i)):i===a._f.ref)return;y(p,t,{_f:{...a._f,...n?{refs:[...o.filter(ve),i,...Array.isArray(d(_,t))?[{}]:[]],ref:{type:i.type,name:t}}:{ref:i}}}),B(t,!1,void 0,i)}else a=d(p,t,{}),a._f&&(a._f.mount=!1),(f.shouldUnregister||s.shouldUnregister)&&(!((e,r)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(r)))(x.array,t)||!b.action)&&x.unMount.add(t)}}},le=()=>f.shouldFocusError&&R(p,Z,x.mount),de=(e,r)=>async t=>{let s;t&&(t.preventDefault&&t.preventDefault(),t.persist&&t.persist());let a=o(h);if(S.state.next({isSubmitting:!0}),f.resolver){const{errors:e,values:r}=await W();m.errors=e,a=r}else await z(p);if(ue(m.errors,"root"),O(m.errors)){S.state.next({errors:{}});try{await e(a,t)}catch(i){s=i}}else r&&await r({...m.errors},t),le(),setTimeout(le);if(S.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:O(m.errors)&&!s,submitCount:m.submitCount+1,errors:m.errors}),s)throw s},ge=(r,t={})=>{const s=r?o(r):_,a=o(s),i=O(r),u=i?_:a;if(t.keepDefaultValues||(_=s),!t.keepValues){if(t.keepDirtyValues)for(const e of x.mount)d(m.dirtyFields,e)?y(u,e,d(h,e)):X(e,d(u,e));else{if(n&&l(r))for(const e of x.mount){const r=d(p,e);if(r&&r._f){const e=Array.isArray(r._f.refs)?r._f.refs[0]:r._f.ref;if($(e)){const r=e.closest("form");if(r){r.reset();break}}}}p={}}h=e.shouldUnregister?t.keepDefaultValues?o(_):{}:o(u),S.array.next({values:{...u}}),S.values.next({values:{...u}})}x={mount:t.keepDirtyValues?x.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},b.mount=!V.isValid||!!t.keepIsValid||!!t.keepDirtyValues,b.watch=!!e.shouldUnregister,S.state.next({submitCount:t.keepSubmitCount?m.submitCount:0,isDirty:!i&&(t.keepDirty?m.isDirty:!(!t.keepDefaultValues||me(r,_))),isSubmitted:!!t.keepIsSubmitted&&m.isSubmitted,dirtyFields:i?{}:t.keepDirtyValues?t.keepDefaultValues&&h?he(_,h):m.dirtyFields:t.keepDefaultValues&&r?he(_,r):t.keepDirty?m.dirtyFields:{},touchedFields:t.keepTouched?m.touchedFields:{},errors:t.keepErrors?m.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&m.isSubmitSuccessful,isSubmitting:!1})},pe=(e,r)=>ge(P(e)?e(h):e,r);return{control:{register:oe,unregister:ie,getFieldState:se,handleSubmit:de,setError:ae,_executeSchema:W,_getWatch:J,_getDirty:G,_updateValid:E,_removeUnmounted:()=>{for(const e of x.unMount){const r=d(p,e);r&&(r._f.refs?r._f.refs.every((e=>!ve(e))):!ve(r._f.ref))&&ie(e)}x.unMount=new Set},_updateFieldArray:(e,r=[],t,s,a=!0,i=!0)=>{if(s&&t){if(b.action=!0,i&&Array.isArray(d(p,e))){const r=t(d(p,e),s.argA,s.argB);a&&y(p,e,r)}if(i&&Array.isArray(d(m.errors,e))){const r=t(d(m.errors,e),s.argA,s.argB);a&&y(m.errors,e,r),((e,r)=>{!u(d(e,r)).length&&ue(e,r)})(m.errors,e)}if(V.touchedFields&&i&&Array.isArray(d(m.touchedFields,e))){const r=t(d(m.touchedFields,e),s.argA,s.argB);a&&y(m.touchedFields,e,r)}V.dirtyFields&&(m.dirtyFields=he(_,h)),S.state.next({name:e,isDirty:G(e,r),dirtyFields:m.dirtyFields,errors:m.errors,isValid:m.isValid})}else y(h,e,r)},_updateDisabledField:ne,_getFieldArray:r=>u(d(b.mount?h:_,r,e.shouldUnregister?d(_,r,[]):[])),_reset:ge,_resetDefaultValues:()=>P(f.defaultValues)&&f.defaultValues().then((e=>{pe(e,f.resetOptions),S.state.next({isLoading:!1})})),_updateFormState:e=>{m={...m,...e}},_disableForm:e=>{c(e)&&(S.state.next({disabled:e}),R(p,((r,t)=>{const s=d(p,t);s&&(r.disabled=s._f.disabled||e,Array.isArray(s._f.refs)&&s._f.refs.forEach((r=>{r.disabled=s._f.disabled||e})))}),0,!1))},_subjects:S,_proxyFormState:V,_setErrors:e=>{m.errors=e,S.state.next({errors:m.errors,isValid:!1})},get _fields(){return p},get _formValues(){return h},get _state(){return b},set _state(e){b=e},get _defaultValues(){return _},get _names(){return x},set _names(e){x=e},get _formState(){return m},set _formState(e){m=e},get _options(){return f},set _options(e){f={...f,...e}}},trigger:re,register:oe,handleSubmit:de,watch:(e,r)=>P(e)?S.values.subscribe({next:t=>e(J(void 0,r),t)}):J(e,r,!0),setValue:X,getValues:te,reset:pe,resetField:(e,r={})=>{d(p,e)&&(l(r.defaultValue)?X(e,o(d(_,e))):(X(e,r.defaultValue),y(_,e,o(r.defaultValue))),r.keepTouched||ue(m.touchedFields,e),r.keepDirty||(ue(m.dirtyFields,e),m.isDirty=r.defaultValue?G(e,o(d(_,e))):G()),r.keepError||(ue(m.errors,e),V.isValid&&E()),S.state.next({...m}))},clearErrors:e=>{e&&C(e).forEach((e=>ue(m.errors,e))),S.state.next({errors:e?m.errors:{}})},unregister:ie,setError:ae,setFocus:(e,r={})=>{const t=d(p,e),s=t&&t._f;if(s){const e=s.refs?s.refs[0]:s.ref;e.focus&&(e.focus(),r.shouldSelect&&e.select())}},getFieldState:se}}function ke(r={}){const t=e.useRef(),s=e.useRef(),[a,i]=e.useState({isDirty:!1,isValidating:!1,isLoading:P(r.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1,defaultValues:P(r.defaultValues)?void 0:r.defaultValues});t.current||(t.current={...we(r),formState:a});const n=t.current.control;return n._options=r,j({subject:n._subjects.state,next:e=>{((e,r,t)=>{t(e);const{name:s,...a}=e;return O(a)||Object.keys(a).length>=Object.keys(r).length||Object.keys(a).find((e=>r[e]===A))})(e,n._proxyFormState,n._updateFormState)&&i({...n._formState})}}),e.useEffect((()=>n._disableForm(r.disabled)),[n,r.disabled]),e.useEffect((()=>{if(n._proxyFormState.isDirty){const e=n._getDirty();e!==a.isDirty&&n._subjects.state.next({isDirty:e})}}),[n,a.isDirty]),e.useEffect((()=>{r.values&&!me(r.values,s.current)?(n._reset(r.values,n._options.resetOptions),s.current=r.values,i((e=>({...e})))):n._resetDefaultValues()}),[r.values,n]),e.useEffect((()=>{r.errors&&n._setErrors(r.errors)}),[r.errors,n]),e.useEffect((()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()})),e.useEffect((()=>{r.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})}),[r.shouldUnregister,n]),t.current.formState=((e,r,t,s=!0)=>{const a={defaultValues:r._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const t=i;return r._proxyFormState[t]!==A&&(r._proxyFormState[t]=!s||A),e[t]}});return a})(a,n),t.current}export{B as a,de as b,d as g,y as s,ke as u};
