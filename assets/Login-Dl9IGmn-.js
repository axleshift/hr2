import{p as f,r as v,B as ye,q as ge,A as ve,o as be,k as o,l as xe,D as Se,g as O}from"./index-8dmFFJ_i.js";import{z as q,u as we,t as je}from"./zod-w4xg3E0H.js";import{F as P,j as _e,k as Re}from"./index.es-BY3aiGxY.js";import{f as Ce,a as Le}from"./index-Dpuby3xz.js";import{C as Oe}from"./CContainer-DYk49lQp.js";import{C as Ne,a as Ee}from"./CRow-BNC0kilN.js";import{C as Pe,a as ke}from"./CCardBody-6MR8J0sZ.js";import{C as Ie,a as ie}from"./CFormInput-B0ldU7KH.js";import{C as ae}from"./CInputGroup-DJqzcEZc.js";import{C as se}from"./CInputGroupText-BD9Wt1Ca.js";import{C as $e}from"./CButtonGroup-X1A2YeKA.js";var Te=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function B(){return B=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},B.apply(this,arguments)}function Ae(e,n){if(e==null)return{};var i={},r=Object.keys(e),t,d;for(d=0;d<r.length;d++)t=r[d],!(n.indexOf(t)>=0)&&(i[t]=e[t]);return i}function k(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,V(e,n)}function V(e,n){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},V(e,n)}var I=function(e){Fe(n,e);function n(){var r;return r=e.call(this)||this,r.handleExpired=r.handleExpired.bind(k(r)),r.handleErrored=r.handleErrored.bind(k(r)),r.handleChange=r.handleChange.bind(k(r)),r.handleRecaptchaRef=r.handleRecaptchaRef.bind(k(r)),r}var i=n.prototype;return i.getCaptchaFunction=function(t){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[t]:this.props.grecaptcha[t]:null},i.getValue=function(){var t=this.getCaptchaFunction("getResponse");return t&&this._widgetId!==void 0?t(this._widgetId):null},i.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},i.execute=function(){var t=this.getCaptchaFunction("execute");if(t&&this._widgetId!==void 0)return t(this._widgetId);this._executeRequested=!0},i.executeAsync=function(){var t=this;return new Promise(function(d,w){t.executionResolve=d,t.executionReject=w,t.execute()})},i.reset=function(){var t=this.getCaptchaFunction("reset");t&&this._widgetId!==void 0&&t(this._widgetId)},i.forceReset=function(){var t=this.getCaptchaFunction("reset");t&&t()},i.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},i.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},i.handleChange=function(t){this.props.onChange&&this.props.onChange(t),this.executionResolve&&(this.executionResolve(t),delete this.executionReject,delete this.executionResolve)},i.explicitRender=function(){var t=this.getCaptchaFunction("render");if(t&&this._widgetId===void 0){var d=document.createElement("div");this._widgetId=t(d,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(d)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},i.componentDidMount=function(){this.explicitRender()},i.componentDidUpdate=function(){this.explicitRender()},i.handleRecaptchaRef=function(t){this.captcha=t},i.render=function(){var t=this.props;t.sitekey,t.onChange,t.theme,t.type,t.tabindex,t.onExpired,t.onErrored,t.size,t.stoken,t.grecaptcha,t.badge,t.hl,t.isolated;var d=Ae(t,Te);return v.createElement("div",B({},d,{ref:this.handleRecaptchaRef}))},n}(v.Component);I.displayName="ReCAPTCHA";I.propTypes={sitekey:f.string.isRequired,onChange:f.func,grecaptcha:f.object,theme:f.oneOf(["dark","light"]),type:f.oneOf(["image","audio"]),tabindex:f.number,onExpired:f.func,onErrored:f.func,size:f.oneOf(["compact","normal","invisible"]),stoken:f.string,hl:f.string,badge:f.oneOf(["bottomright","bottomleft","inline"]),isolated:f.bool};I.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var le={exports:{}},s={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=typeof Symbol=="function"&&Symbol.for,Q=l?Symbol.for("react.element"):60103,X=l?Symbol.for("react.portal"):60106,$=l?Symbol.for("react.fragment"):60107,T=l?Symbol.for("react.strict_mode"):60108,A=l?Symbol.for("react.profiler"):60114,F=l?Symbol.for("react.provider"):60109,D=l?Symbol.for("react.context"):60110,Z=l?Symbol.for("react.async_mode"):60111,U=l?Symbol.for("react.concurrent_mode"):60111,M=l?Symbol.for("react.forward_ref"):60112,z=l?Symbol.for("react.suspense"):60113,De=l?Symbol.for("react.suspense_list"):60120,G=l?Symbol.for("react.memo"):60115,H=l?Symbol.for("react.lazy"):60116,Ue=l?Symbol.for("react.block"):60121,Me=l?Symbol.for("react.fundamental"):60117,ze=l?Symbol.for("react.responder"):60118,Ge=l?Symbol.for("react.scope"):60119;function m(e){if(typeof e=="object"&&e!==null){var n=e.$$typeof;switch(n){case Q:switch(e=e.type,e){case Z:case U:case $:case A:case T:case z:return e;default:switch(e=e&&e.$$typeof,e){case D:case M:case H:case G:case F:return e;default:return n}}case X:return n}}}function ue(e){return m(e)===U}s.AsyncMode=Z;s.ConcurrentMode=U;s.ContextConsumer=D;s.ContextProvider=F;s.Element=Q;s.ForwardRef=M;s.Fragment=$;s.Lazy=H;s.Memo=G;s.Portal=X;s.Profiler=A;s.StrictMode=T;s.Suspense=z;s.isAsyncMode=function(e){return ue(e)||m(e)===Z};s.isConcurrentMode=ue;s.isContextConsumer=function(e){return m(e)===D};s.isContextProvider=function(e){return m(e)===F};s.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Q};s.isForwardRef=function(e){return m(e)===M};s.isFragment=function(e){return m(e)===$};s.isLazy=function(e){return m(e)===H};s.isMemo=function(e){return m(e)===G};s.isPortal=function(e){return m(e)===X};s.isProfiler=function(e){return m(e)===A};s.isStrictMode=function(e){return m(e)===T};s.isSuspense=function(e){return m(e)===z};s.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===$||e===U||e===A||e===T||e===z||e===De||typeof e=="object"&&e!==null&&(e.$$typeof===H||e.$$typeof===G||e.$$typeof===F||e.$$typeof===D||e.$$typeof===M||e.$$typeof===Me||e.$$typeof===ze||e.$$typeof===Ge||e.$$typeof===Ue)};s.typeOf=m;le.exports=s;var He=le.exports,ee=He,We={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},qe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Be={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},fe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},te={};te[ee.ForwardRef]=Be;te[ee.Memo]=fe;function ce(e){return ee.isMemo(e)?fe:te[e.$$typeof]||We}var Ve=Object.defineProperty,Ke=Object.getOwnPropertyNames,de=Object.getOwnPropertySymbols,Ye=Object.getOwnPropertyDescriptor,Je=Object.getPrototypeOf,pe=Object.prototype;function he(e,n,i){if(typeof n!="string"){if(pe){var r=Je(n);r&&r!==pe&&he(e,r,i)}var t=Ke(n);de&&(t=t.concat(de(n)));for(var d=ce(e),w=ce(n),b=0;b<t.length;++b){var u=t[b];if(!qe[u]&&!(i&&i[u])&&!(w&&w[u])&&!(d&&d[u])){var h=Ye(n,u);try{Ve(e,u,h)}catch{}}}}return e}var Qe=he;const Xe=ye(Qe);function K(){return K=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},K.apply(this,arguments)}function Ze(e,n){if(e==null)return{};var i={},r=Object.keys(e),t,d;for(d=0;d<r.length;d++)t=r[d],!(n.indexOf(t)>=0)&&(i[t]=e[t]);return i}function et(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}var S={},tt=0;function rt(e,n){return n=n||{},function(r){var t=r.displayName||r.name||"Component",d=function(b){et(u,b);function u(x,c){var a;return a=b.call(this,x,c)||this,a.state={},a.__scriptURL="",a}var h=u.prototype;return h.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+tt++),this.__scriptLoaderID},h.setupScriptURL=function(){return this.__scriptURL=typeof e=="function"?e():e,this.__scriptURL},h.asyncScriptLoaderHandleLoad=function(c){var a=this;this.setState(c,function(){return a.props.asyncScriptOnLoad&&a.props.asyncScriptOnLoad(a.state)})},h.asyncScriptLoaderTriggerOnScriptLoaded=function(){var c=S[this.__scriptURL];if(!c||!c.loaded)throw new Error("Script is not loaded.");for(var a in c.observers)c.observers[a](c);delete window[n.callbackName]},h.componentDidMount=function(){var c=this,a=this.setupScriptURL(),p=this.asyncScriptLoaderGetScriptLoaderID(),y=n,N=y.globalName,j=y.callbackName,C=y.scriptId;if(N&&typeof window[N]<"u"&&(S[a]={loaded:!0,observers:{}}),S[a]){var _=S[a];if(_&&(_.loaded||_.errored)){this.asyncScriptLoaderHandleLoad(_);return}_.observers[p]=function(g){return c.asyncScriptLoaderHandleLoad(g)};return}var E={};E[p]=function(g){return c.asyncScriptLoaderHandleLoad(g)},S[a]={loaded:!1,observers:E};var R=document.createElement("script");R.src=a,R.async=!0;for(var re in n.attributes)R.setAttribute(re,n.attributes[re]);C&&(R.id=C);var ne=function(L){if(S[a]){var me=S[a],W=me.observers;for(var oe in W)L(W[oe])&&delete W[oe]}};j&&typeof window<"u"&&(window[j]=function(){return c.asyncScriptLoaderTriggerOnScriptLoaded()}),R.onload=function(){var g=S[a];g&&(g.loaded=!0,ne(function(L){return j?!1:(L(g),!0)}))},R.onerror=function(){var g=S[a];g&&(g.errored=!0,ne(function(L){return L(g),!0}))},document.body.appendChild(R)},h.componentWillUnmount=function(){var c=this.__scriptURL;if(n.removeOnUnmount===!0)for(var a=document.getElementsByTagName("script"),p=0;p<a.length;p+=1)a[p].src.indexOf(c)>-1&&a[p].parentNode&&a[p].parentNode.removeChild(a[p]);var y=S[c];y&&(delete y.observers[this.asyncScriptLoaderGetScriptLoaderID()],n.removeOnUnmount===!0&&delete S[c])},h.render=function(){var c=n.globalName,a=this.props;a.asyncScriptOnLoad;var p=a.forwardedRef,y=Ze(a,["asyncScriptOnLoad","forwardedRef"]);return c&&typeof window<"u"&&(y[c]=typeof window[c]<"u"?window[c]:void 0),y.ref=p,v.createElement(r,y)},u}(v.Component),w=v.forwardRef(function(b,u){return v.createElement(d,K({},b,{forwardedRef:u}))});return w.displayName="AsyncScriptLoader("+t+")",w.propTypes={asyncScriptOnLoad:f.func},Xe(w,r)}}var Y="onloadcallback",nt="grecaptcha";function J(){return typeof window<"u"&&window.recaptchaOptions||{}}function ot(){var e=J(),n=e.useRecaptchaNet?"recaptcha.net":"www.google.com";return e.enterprise?"https://"+n+"/recaptcha/enterprise.js?onload="+Y+"&render=explicit":"https://"+n+"/recaptcha/api.js?onload="+Y+"&render=explicit"}const it=rt(ot,{callbackName:Y,globalName:nt,attributes:J().nonce?{nonce:J().nonce}:{}})(I),gt=()=>{const e=ge(),n=v.useRef(),{login:i,isAuthenticated:r,userInformation:t}=v.useContext(ve),[d,w]=v.useState(""),{addToast:b}=v.useContext(be),[u,h]=v.useState(!1),x=q.object({username:q.string().min(3,{message:"Username must be at least 3 characters long"}).max(20,{message:"Username must be at most 20 characters long"}),password:q.string().min(8,{message:"Password must be at least 8 characters long"}).max(50,{message:"Password must be at most 50 characters long"})}),{register:c,handleSubmit:a,formState:{errors:p}}=we({resolver:je(x)}),y=j=>{h(!0);const C=n.current.getValue();console.log("Login.js: onSubmit: token: ",C),w(C),i(j.username,j.password,_=>{if(_){h(!1);const E=t.username;console.log("Login.js: onSubmit: username: ",E),b("Login successful",`
          Welcome back, ${j.username}! You have successfully logged in.
          `,"success"),e("/dashboard")}else b("Login failed","Invalid username or password","danger"),h(!1)})},N=()=>{};return v.useEffect(()=>{r&&e("/dashboard")},[r]),o.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:o.jsxs(Oe,{children:[u&&o.jsx("div",{className:"loading-overlay",children:o.jsx(xe,{color:"primary",variant:"grow"})}),o.jsx(Ne,{className:"justify-content-center",children:o.jsx(Ee,{md:8,lg:6,xl:5,className:"my-2",children:o.jsx(Pe,{className:"p-1 p-sm-4 shadow",children:o.jsxs(ke,{children:[o.jsxs(Ie,{onSubmit:a(y),children:[o.jsx("h1",{children:"Login"}),o.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),o.jsx(it,{ref:n,size:"invisible",sitekey:Se.google.recaptcha.siteKey}),o.jsxs(ae,{className:"mb-3",children:[o.jsx(se,{children:o.jsx(P,{icon:_e})}),o.jsx(ie,{type:"text",placeholder:"Username",autoComplete:"username",...c("username"),invalid:!!p.username}),p.username&&o.jsx("div",{className:"invalid-feedback",children:p.username.message})]}),o.jsxs(ae,{className:"mb-3",children:[o.jsx(se,{children:o.jsx(P,{icon:Re})}),o.jsx(ie,{type:"password",placeholder:"Password",autoComplete:"current-password",...c("password"),invalid:!!p.password}),p.password&&o.jsx("div",{className:"invalid-feedback",children:p.password.message})]}),o.jsx("p",{children:o.jsxs("small",{children:["By continuing, you agree to our",o.jsxs("a",{onClick:()=>e("/policy"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:[" ","Privacy Policy"," "]}),"and",o.jsxs("a",{onClick:()=>e("/terms"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:[" ","Terms of Service"]}),"."]})}),o.jsx("div",{className:"d-grid mb-3",children:o.jsxs($e,{children:[o.jsx(O,{type:"submit",color:"primary",className:"me-2 rounded",children:"Login"}),o.jsx(O,{disabled:!0,color:"outline-primary",className:"me-2 rounded",children:"Signup"})]})}),o.jsxs("div",{className:"text-center visually-hidden",children:[o.jsx("span",{className:"text-muted d-block mb-1",children:o.jsx("small",{children:"Or continue with"})}),o.jsx(O,{color:"outline-primary",className:"me-2",onClick:N,children:o.jsx(P,{icon:Ce})}),o.jsx(O,{color:"outline-primary",className:"me-2",children:o.jsx(P,{icon:Le})})]})]}),o.jsx(O,{color:"link",className:"px-0 link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",onClick:()=>e("/forgot-password"),children:"Forgot password?"})]})})})})]})})};export{gt as default};
