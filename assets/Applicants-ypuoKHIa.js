import{m as e,a,F as r,j as t,g as i,k as s,w as n,p as c}from"./index-C66lSxRl.js";import{F as l,I as o,J as d,Y as m,f as h,r as p}from"./index.es-DzFLx6Av.js";import{r as f}from"./react-router-dom-BnDDw25P.js";import{A as u}from"./AppPagination-CPEkAGYU.js";import{z as g}from"./zod-B0zZW6rS.js";import{u as j}from"./react-hook-form-DGCwHb0C.js";import{s as C}from"./@hookform/resolvers/zod-B5rlnuQ9.js";import{A as y}from"./ApplicantForm-wPyHt7Hy.js";import{C as v}from"./CContainer-DnAwT2KJ.js";import{C as S,a as x}from"./CRow-BC2jnXSR.js";import{C as T,a as w}from"./CFormLabel-CnrvBD9C.js";import{C as b}from"./CInputGroup-CRsaNImm.js";import{C as N}from"./CFormInput-7yAhRXCl.js";import{C as F}from"./CTooltip-C7pMgaBa.js";import{C as _}from"./DefaultLayout-BlBcqPq3.js";import{C as A,a as k}from"./CCardBody-oEpd84ML.js";import{C as I,a as P,b as R,c as $,d as E,e as L}from"./CTable-C_OnMufT.js";import"./react-dom-DgB6LS8R.js";import"./react-BF1r7_8g.js";import"./Calendar-CVmgXurr.js";import"./index-BVfmz2P_.js";import"./CModalHeader-17a_J2dP.js";import"./CModalTitle-UbKkKgfG.js";import"./CTabList-B_ov72Hs.js";import"./isRTL-D5ORmfro.js";import"./index.esm-CoSUUeCw.js";const z=({theme:c})=>{const z="dark"===c,{addToast:D}=f.useContext(e),[H,M]=f.useState(!1),[q,G]=f.useState([]),[V,Y]=f.useState(!1),[B,J]=f.useState([]),[K,O]=f.useState({}),[Q,W]=f.useState(!1),[X,U]=f.useState([]),[Z,ee]=f.useState(!1),[ae,re]=f.useState(""),[te,ie]=f.useState(1),[se,ne]=f.useState(9),[ce,le]=f.useState(1),oe=async(e,a,r)=>{try{Y(!0);let t="";X.length>0&&(t=X.map((e=>`${e}`)).join(","));const i=Z?await n(`/applicant/search?query=${r}&page=${e}&limit=${a}&tags=${t}`):await n("/applicant/all");200===i.status?(J(i.data.data),le(i.data.totalPages),Y(!1)):(D("Error","Failed to fetch data","danger"),Y(!1))}catch(t){D("Error","Failed to fetch data","danger")}},de=g.object({searchTerm:g.string().min(1,"Search term is required")}),{register:me,handleSubmit:he,formState:{errors:pe}}=j({resolver:async(e,a,r)=>await C(de)(e,a,r)});return f.useEffect((()=>{(async()=>{try{M(!0);const e="applicant",a=await n(`/tags/category/${e}`);200===a.status?(G(a.data.data),M(!1)):(D("Calendar | Applicants",a.message.message,"danger"),M(!1))}catch(e){D("Calendar | Applicants","Failed to fetch data","danger")}})();const e=setTimeout((()=>{oe(te,se,ae)}),300);return()=>clearTimeout(e)}),[te,se,Z,ae]),a(r,{children:t(v,{className:"d-flex flex-column gap-3",children:[a(S,{children:t(x,{children:[a("h2",{children:"Applicants"}),a("small",{children:"In this page, you can view and edit the list of applicants which are waiting for the HR to schedule an interview or any event they need to attend."})]})}),a(S,{children:t(v,{className:"d-flex flex-column gap-3",children:[t(T,{onSubmit:he((e=>{const{searchTerm:a}=e;J([]),re(a),ee(!0),ie(1),oe(te,se,a)})),children:[t(b,{children:[a(N,{type:"text",placeholder:"Search",...me("searchTerm"),invalid:!!pe.searchTerm}),a(F,{placement:"top",content:"Search",children:a(i,{type:"submit",color:"primary",children:a(l,{icon:o})})}),a(F,{placement:"top",content:"Refresh",children:a(i,{color:"primary",onClick:()=>(re(""),ee(!1),ie(1),void oe(te,se)),children:a(l,{icon:d})})})]}),pe.searchTerm&&a(w,{invalid:!0,children:pe.searchTerm.message})]}),a("div",{className:"d-flex flex-wrap gap-2",children:q.map((e=>a(F,{content:X.includes(e._id)?"Remove":"Add",children:t(_,{onClick:()=>(e=>{if(X.includes(e)){const a=X.filter((a=>a!==e));U(a)}else U([...X,e])})(e._id),color:X.includes(e._id)?"success":"danger",className:"d-flex align-items-center justify-content-between",children:[e.name,X.includes(e._id)&&a(l,{icon:m,className:"ms-2"})]})},e._id)))})]})}),a(S,{children:a(v,{children:a(A,{children:a(k,{children:t(I,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[a(P,{children:t(R,{children:[a($,{children:a(l,{icon:h})}),a($,{children:"Email"}),a($,{children:"Phone"}),a($,{children:"Tags"}),a($,{children:"Action"})]})}),a(E,{children:V?a(R,{children:a(L,{colSpan:5,children:a("div",{className:"pt-3 text-center",children:a(s,{color:"primary",variant:"grow"})})})}):B.length>0?B.map((e=>t(R,{children:[a(L,{children:t("div",{children:[e.lastname,", ",e.firstname]})}),a(L,{children:a("div",{children:e.email})}),a(L,{children:a("div",{children:e.phone})}),a(L,{children:a("div",{className:"d-flex gap-2",children:e.tags.map(((e,r)=>a(_,{color:"primary",children:q.find((a=>a._id===e))&&q.find((a=>a._id===e)).name},r)))})}),a(L,{children:a(F,{placement:"top",content:"Schedule Interview for this applicant",children:a(i,{onClick:()=>(async e=>{try{W(!0);const a=B.find((a=>a._id===e));O(a)}catch(a){D("Error","Failed to fetch data","danger")}})(e._id),className:"btn btn-primary",size:"sm",children:a(l,{icon:p})})})})]},e._id))):a(R,{children:a(L,{colSpan:5,children:"No data available"})})})]})})})})}),a(S,{children:a(x,{children:a("div",{className:"d-flex justify-content-center align-items-center",children:a(u,{currentPage:te,totalPages:ce,onPageChange:ie})})})}),a(S,{children:a(x,{children:a(y,{isVisible:Q,onClose:()=>W(!1),isDarkMode:z,applicantData:K})})})]})})};z.propTypes={theme:c.string};export{z as default};
