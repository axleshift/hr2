import{r as e}from"./react-router-dom-BnDDw25P.js";import{j as i,a as n,g as r,y as a,w as l,p as t}from"./index-qHb5tAdx.js";import{u as o}from"./react-hook-form-DB8hWBdy.js";import{z as s}from"./zod-B0zZW6rS.js";import{s as d}from"./@hookform/resolvers/zod-1wp20Skh.js";import{J as c}from"./JobOfferForm-6gnSZbGP.js";import{C as m,a as u,b as h}from"./CModalHeader-beeSvsCt.js";import{C as p}from"./CModalTitle-IUT3VrW5.js";import{C as v,a as b}from"./CRow-DYavEpjv.js";import{C as f,b as y,a as g}from"./CFormLabel-UDpH3Qx3.js";import{C as w}from"./CFormInput-DF5LQCIp.js";import{C as x}from"./CFormSelect-4-wAhThw.js";import{C as j}from"./CFormRange-Dw3bxmhy.js";import{C}from"./CFormTextarea-DP8Q6-6q.js";const q=s.object({date:s.string().nonempty("Date is required"),job:s.string().min(3,{message:"Job is required"}),type:s.enum(["Phone","Video","In-Person"]),general:s.object({communication:s.number().min(1).max(5).default(1),technical:s.number().min(1).max(5).default(1),problemSolving:s.number().min(1).max(5).default(1),culturalFit:s.number().min(1).max(5).default(1),workExperienceRelevance:s.number().min(1).max(5).default(1),leadership:s.number().min(1).max(5).default(1)}),questions:s.array(s.object({question:s.string().min(1,{message:"A question is required."}),remark:s.string().optional()})).optional(),salaryExpectation:s.coerce.number().min(1).default(1),strength:s.string().optional(),weakness:s.string().optional(),recommendation:s.enum(["yes","no","need further review"]),finalComments:s.string().optional()}),S=({isVisible:t,onClose:s,state:S,interview:O})=>{var E,N,k,I,F;const[R,J]=e.useState(!1),[V,$]=e.useState({}),[P,T]=e.useState("view"),[z,A]=e.useState(!1),[D,L]=e.useState("create"),[M,Q]=e.useState(!1),{register:_,handleSubmit:G,reset:H,setValue:W,watch:Y,formState:{errors:Z},control:B}=o({resolver:async(e,i,n)=>await d(q)(e,i,n)});return e.useEffect((()=>{A("edit"!==S)}),[S]),e.useEffect((()=>{if(R&&O){let e="";if(O.date){e=new Date(O.date).toISOString().split("T")[0]}const i={...O,date:e};$(O),H(i)}}),[R,O,H]),e.useEffect((()=>{t&&J(t)}),[t]),i(m,{visible:R,onClose:()=>{s(),J(!1)},backdrop:"static",size:"xl",children:[n(u,{children:n(p,{children:"edit"===P?"Edit Interview":"Interview Form"})}),i(h,{children:[n(v,{children:n(b,{children:i(f,{onSubmit:G((async e=>{try{"edit"===P?await a(`/applicant/interview/${V._id}`,e):await l("/applicant/interview",e);s()}catch(i){}})),children:[i(v,{className:"mb-3",children:[i(b,{children:[n(y,{children:"Date"}),n(w,{type:"date",..._("date"),readOnly:z,invalid:Z.date}),Z.date&&n(g,{children:Z.date.message})]}),i(b,{children:[n(y,{children:"Interview Type"}),i(x,{disabled:z,..._("type"),invalid:Z.type,children:[n("option",{value:"",children:"Select Type"}),n("option",{value:"Phone",children:"Phone"}),n("option",{value:"Video",children:"Video"}),n("option",{value:"In-Person",children:"In-Person"})]}),Z.type&&n(g,{children:Z.type.message})]}),i(b,{children:[n(y,{children:"Interviewer"}),n(w,{readOnly:z,defaultValue:`${null==(E=O.interviewer)?void 0:E.lastname}, ${null==(N=O.interviewer)?void 0:N.firstname}`})]})]}),n(v,{className:"mb-3",children:i(b,{xs:"12",children:[n("h5",{children:"General Evaluation"}),["communication","technical","problemSolving","culturalFit","workExperienceRelevance","leadership"].map((e=>{var r,a,l,t;return i("div",{children:[n("label",{className:"text-capitalize",children:e.replace(/([A-Z])/g," $1")}),n(j,{min:1,max:5,disabled:z,..._(`general.${e}`),invalid:null==(r=null==Z?void 0:Z.general)?void 0:r[e]}),(null==(a=null==Z?void 0:Z.general)?void 0:a[e])&&n(g,{children:null==(t=null==(l=null==Z?void 0:Z.general)?void 0:l[e])?void 0:t.message})]},e)}))]})}),n(v,{className:"mb-3",children:i(b,{children:[n(w,{label:"Position / Job Applied For",readOnly:z,..._("job"),invalid:Z.job}),Z.job&&n(g,{children:Z.job.message})]})}),n(v,{className:"mb-3",children:i(b,{xs:"12",children:[n("h5",{children:"Interview Questions"}),null==(k=Y("questions"))?void 0:k.map(((e,r)=>{var a,l,t,o,s,d,c;return i("div",{children:[n(v,{className:"mb-3",children:i(b,{children:[n(y,{children:"Question"}),n(w,{readOnly:z,..._(`questions.${r}.question`),invalid:null==(l=null==(a=null==Z?void 0:Z.questions)?void 0:a[r])?void 0:l.question}),(null==(o=null==(t=null==Z?void 0:Z.questions)?void 0:t[r])?void 0:o.question)&&n(g,{children:null==(c=null==(d=null==(s=null==Z?void 0:Z.questions)?void 0:s[r])?void 0:d.question)?void 0:c.message})]})}),n(v,{className:"mb-3",children:i(b,{children:[n(y,{children:"Remark"}),n(C,{readOnly:z,..._(`questions.${r}.remark`)})]})})]},r)}))]})}),i(v,{className:"mb-3",children:[i(b,{xs:"12",sm:"6",children:[n(y,{children:"Salary Expectation"}),n(w,{type:"number",readOnly:z,..._("salaryExpectation"),invalid:Z.salaryExpectation}),Z.salaryExpectation&&n(g,{children:Z.salaryExpectation.message})]}),i(b,{xs:"12",sm:"6",children:[n(y,{children:"Recommendation"}),i(x,{disabled:z,..._("recommendation"),invalid:Z.recommendation,children:[n("option",{value:"yes",children:"Yes"}),n("option",{value:"no",children:"No"}),n("option",{value:"need further review",children:"Need further review"})]}),Z.recommendation&&n(g,{children:Z.recommendation.message})]})]}),n(v,{className:"mb-3",children:i(b,{children:[n(y,{children:"Strength"}),n(C,{readOnly:z,..._("strength")})]})}),n(v,{className:"mb-3",children:i(b,{children:[n(y,{children:"Weakness"}),n(C,{readOnly:z,..._("weakness")})]})}),n(v,{className:"mb-3",children:i(b,{xs:"12",children:[n(y,{children:"Final Comments"}),n(C,{readOnly:z,..._("finalComments")})]})})]})})}),n(v,{children:n(b,{className:"d-flex justify-content-end",children:n(r,{color:"warning",size:"sm",disabled:null==(I=O.applicant)?void 0:I.isJobOffer,onClick:()=>{L("create"),Q(!0)},children:(null==(F=O.applicant)?void 0:F.isJobOffer)?"Job offer already Exists":"Issue a Job Offer"})})}),n(v,{children:n(b,{children:n(c,{isVisible:M,state:D,onClose:()=>{Q(!1)},interview:V})})})]})]})};S.propTypes={isVisible:t.bool.isRequired,onClose:t.func.isRequired,state:t.string,interview:t.object.isRequired};export{S as I};
