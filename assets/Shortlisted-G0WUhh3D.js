const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CANlPsSl.js","./Calendar-Boc9hzhP.js","./index-DiLnYbjC.js","./react-router-dom-BnDDw25P.js","./react-BF1r7_8g.js","./react-dom-DgB6LS8R.js","./index-C5oYSpm-.css","./clsx-BeLtu-UY.js"])))=>i.map(i=>d[i]);
import{r as e,R as a}from"./react-router-dom-BnDDw25P.js";import{F as s,A as r,B as i,f as t,S as n,T as l}from"./index.es-BUpMRE3D.js";import{m as c,a as o,F as d,j as h,l as m,g as p,k as u,x as f,i as g,w as y,p as v}from"./index-DiLnYbjC.js";import{f as C,b,t as S}from"./index-BOi-5bX2.js";import{C as j,a as w,b as N}from"./CModalHeader-BDpLr51j.js";import{C as x}from"./CModalTitle-Cp-5Mm7J.js";import{C as I}from"./CFormLabel-DwEY-V3u.js";import{C as T}from"./CContainer-DzOuZpEx.js";import{C as _,a as k}from"./CRow-BNc0QFWW.js";import{C as E}from"./CFormSelect-C1vm9vYc.js";import{a as D}from"./DefaultLayout-Cau2R5kl.js";import{C as P,a as A}from"./CCardBody-BlNAuiwx.js";import{C as z,a as F,b as $,c as R,d as M,e as O}from"./CTable-Bp7z3h6O.js";import{A as B}from"./AppPagination-CAajZQ_e.js";import{C as L}from"./CInputGroup-CqBjsx_2.js";import{C as V}from"./CFormInput-uT5SP9Ht.js";import{C as H}from"./CTooltip-Dv1PmkHW.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./index.esm-Dwb_M0UQ.js";import"./isRTL-D5ORmfro.js";const q=a.lazy((()=>g((()=>import("./index-CANlPsSl.js")),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url))),J=({isVisible:a,onClose:s,isDarkMode:r,applicantData:i})=>{const{addToast:t}=e.useContext(c),[n,l]=e.useState([]),[g,v]=e.useState([]),[S,B]=e.useState([]),[L,V]=e.useState(""),[H,J]=e.useState(new Date),[W,G]=e.useState([]),[K,X]=e.useState(!1),[Y,Z]=e.useState(!1),Q=async()=>{try{const e=await f(`/facilities/events/${L._id}/${H}`);200===e.status?v(e.data.data):v([])}catch(e){t("error",e.message,"Error")}},U=async e=>{try{Z(!0);const a=await y(`/facilities/events/${e}/book/applicant/${i._id}`);200!==a.status&&201!==a.status||(t("Success","Applicant has been booked to the event","success"),Q()),Z(!1)}catch(a){t("error",a.message,"Error")}};return e.useEffect((()=>{L&&(H&&Q(),(async()=>{try{const e=H.getMonth()+1,a=H.getFullYear(),s=await f(`/facilities/events/${L._id}/calendar-states?month=${e}&year=${a}`);l(s.data.data)}catch(e){t("error",e.message,"Error")}})()),(async()=>{try{const e=await f("/facilities/all");B(e.data.data)}catch(e){t("error",e.message,"Error")}})()}),[L,H]),o(d,{children:h(j,{visible:a,onClose:()=>{s(),V(""),v([]),l([])},size:"xl",backdrop:"static",children:[o(w,{children:h(x,{children:["Schedule an Event for ",i.firstname,", ",i.lastname]})}),o(N,{children:o(I,{children:h(T,{children:[h(_,{xs:{cols:1,gutter:2},md:{cols:2,gutter:4},children:[o(k,{children:h(E,{children:[o("option",{value:"",children:"Select Facility"}),S.map((e=>o("option",{value:e._id,onClick:()=>{V(e),J(new Date),l([])},children:e.name},e._id)))]})}),o(k,{children:o("p",{className:"text-muted",children:L?h(d,{children:[h("strong",{children:[L.location," "]}),o("br",{}),L.description]}):o("span",{className:"text-danger",children:"*Please select a facility first."})})})]}),o(_,{children:o(k,{children:o(D,{color:"warning",children:"Has Events"})})}),o(_,{className:"mb-3",children:o(k,{children:o(q,{onChange:e=>{const a=new Date(e.getTime()-6e4*e.getTimezoneOffset());J(a)},className:r?"calendar dark-mode":"calendar",defaultValue:new Date,tileClassName:({date:e})=>{const a=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0];return n.some((e=>e.startsWith(a)))?"has-events":null}})})}),"development"===m.env,o(_,{children:o(k,{children:o(P,{children:o(A,{children:o(_,{children:o(k,{children:h(z,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[o(F,{children:h($,{children:[o(R,{children:"Facilty"}),o(R,{children:"Type"}),o(R,{children:"Date"}),o(R,{children:"Time"}),o(R,{children:"Event"}),o(R,{children:"Capacity"}),o(R,{children:"Participants"}),o(R,{children:"Actions"})]})}),o(M,{children:g.length>0?g.map((e=>h($,{children:[o(O,{children:L.name}),o(O,{children:L.type}),o(O,{children:C(e.date)}),h(O,{children:[b(e.timeslot.start)," -"," ",b(e.timeslot.end)]}),o(O,{children:e.name}),o(O,{children:e.capacity}),o(O,{children:e.participants.length}),o(O,{children:o("div",{className:"d-flex flex-row gap-2",children:e.participants.some((e=>e.applicant.toString()===i._id.toString()))?o(p,{color:"success",disabled:!0,className:"text-white",size:"sm",onClick:()=>U(e._id),children:"Booked"}):o(p,{color:"info",className:"text-white",size:"sm",onClick:()=>U(e._id),children:Y?o(u,{color:"light",size:"sm"}):"Book"})})})]},e._id))):o($,{children:h(O,{colSpan:"12",className:"text-center",children:["No events available. Please select a date from the"," ",o("span",{className:"text-info",children:"calendar"}),"."]})})})]})})})})})})})]})})})]})})};J.propTypes={isVisible:v.bool.isRequired,isDarkMode:v.bool,onClose:v.func.isRequired,applicantData:v.object};const W=()=>{const{addToast:a}=e.useContext(c),[m,g]=e.useState([]),[y,v]=e.useState(!1),[C,b]=e.useState({}),[j,w]=e.useState(""),[N,x]=e.useState(!1),[E,q]=e.useState([]),[W,G]=e.useState([]),[K,X]=e.useState(!1),[Y,Z]=e.useState(1),[Q,U]=e.useState(9),[ee,ae]=e.useState(0),[se,re]=e.useState(0),[ie,te]=e.useState(!1),ne=async()=>{try{v(!0);const e=await f("/applicant/category/shortlisted");200===e.status?(g(e.data.data),v(!1)):g([])}catch(e){a("Error",e,"danger")}finally{v(!1),Z(1),re(0),ae(0)}};return e.useEffect((()=>{ne(),(async()=>{try{const e="applicant",s=await f(`/tags/category/${e}`);200===s.status?q(s.data.data):a("Error","An error occurred","danger")}catch(e){a("Error","An error occurred","danger")}})()}),[]),o(d,{children:h(T,{children:[o(_,{className:"mb-3",children:h(k,{children:[o("h2",{children:"Shortlisted"}),h("small",{children:["In this page, you can ",o("span",{className:"text-info",children:"view"})," and"," ",o("span",{className:"text-danger",children:"remove"})," applicants from being qualified for the job. As well as"," ",o("span",{className:"text-primary",children:"schedule an APPLICANT for an interview"}),"."]})]})}),o(_,{className:"mb-3",children:o(k,{children:o(I,{children:h(L,{children:[o(V,{type:"search",placeholder:"Search...","aria-label":"Search"}),o(p,{type:"button",color:"primary",children:o(s,{icon:r})}),o(p,{type:"button",color:"primary",onClick:()=>ne(),children:o(s,{icon:i})})]})})})}),o(_,{className:"mb-3",children:o(k,{children:o(P,{children:o(A,{children:h(z,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[o(F,{children:h($,{children:[o(R,{children:o("strong",{children:"#"})}),o(R,{children:o(s,{icon:t})}),o(R,{children:"Email"}),o(R,{children:"Phone"}),o(R,{children:"Tags"}),o(R,{children:"Actions"})]})}),o(M,{children:y?o($,{children:o(O,{colSpan:"6",children:o(u,{size:"sm"})})}):m.map(((e,a)=>h($,{children:[o(O,{children:S(e._id,10)}),h(O,{children:[e.lastname,", ",e.firstname]}),o(O,{children:e.email}),o(O,{children:e.phone}),o(O,{children:h("div",{className:"d-flex flex-wrap",children:[e.tags.map(((e,a)=>{var s;const r=null==(s=E.find((a=>a._id===e)))?void 0:s.name;return o(D,{shape:"rounded-pill",color:"primary",className:"me-1 mb-1",children:r},a)})),e.statuses.journey.isShortlisted&&o(D,{shape:"rounded-pill",color:"success",className:"me-1 mb-1",children:"Shortlisted"}),e.statuses.journey.isInitialInterview&&o(D,{shape:"rounded-pill",color:"success",className:"me-1 mb-1",children:"Initial Interview"}),e.statuses.journey.isTechnicalInterview&&o(D,{shape:"rounded-pill",color:"success",className:"me-1 mb-1",children:"Technical Interview"}),e.statuses.journey.isPanelInterview&&o(D,{shape:"rounded-pill",color:"success",className:"me-1 mb-1",children:"Panel Interview"}),e.statuses.journey.isBehavioralInterview&&o(D,{shape:"rounded-pill",color:"success",className:"me-1 mb-1",children:"Behavioral Interview"}),e.statuses.journey.isFinalInterview&&o(D,{shape:"rounded-pill",color:"success",className:"me-1 mb-1",children:"Final Interview"}),e.statuses.journey.isJobOffer&&o(D,{shape:"rounded-pill",color:"success",className:"me-1 mb-1",children:"Job Offered"}),e.statuses.journey.isHired&&o(D,{shape:"rounded-pill",color:"success",className:"me-1 mb-1",children:"Initial Interview"})]})}),o(O,{children:h("div",{className:"d-flex gap-2",children:[o(H,{content:"Remove from list",placement:"top",children:o(p,{color:"danger",size:"sm",children:o(s,{icon:n})})}),o(H,{content:"Schedule an interview",placement:"top",children:o(p,{color:"info",size:"sm",onClick:()=>{X(!0),b(e)},children:o(s,{icon:l})})})]})})]},a)))})]})})})})}),o(_,{}),o(_,{children:o(k,{children:o("div",{className:"d-flex flex-row gap-2 justify-content-center align-items-center",children:o(B,{currentPage:Y,totalPages:ee,onPageChange:Z})})})}),o(_,{children:o(k,{children:o(J,{isVisible:K,onClose:()=>X(!1),isDarkMode:!0,applicantData:C})})})]})})};export{W as default};
