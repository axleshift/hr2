import{r as d,o as te,H as re,k as e,g as m,G as $,I as ae,F as ie}from"./index-BCkpDyNC.js";import{z as b,u as B,t as M}from"./zod-DmUUCu0a.js";import{F as l,m as S,n as D,p as ne,r as le,q as oe,t as ce,s as de}from"./index.es-CNmBILeY.js";import{b as q,c as xe}from"./index-G23hHnUp.js";import{C as P,c as g,b as y,f as G,a as me}from"./index-Dj7z6yBy.js";import{C as E}from"./CContainer-Dnk3aAPK.js";import{C as i,a}from"./CRow-BZ9tyH7t.js";import{C,a as w}from"./CCardBody-DrhOBcba.js";import{C as v}from"./CCardHeader-Dkv9jhvB.js";import{C as O}from"./CCollapse-Dx5Tzhb3.js";import{a as j}from"./DefaultLayout-DhVHuxa3.js";import{a as x,C as he,b as je,c as pe}from"./CFormInput-BdoHURtS.js";import{C as I}from"./CInputGroup-D2sBM3z0.js";import{C as p}from"./CInputGroupText-BLFTkU7C.js";import{C as u}from"./CFormTextarea-DGwLvm47.js";import{C as ue}from"./CCardFooter-BcbXK20T.js";import{C as fe}from"./CButtonGroup-BbvyCFgT.js";import"./index.esm-D2SCq1l_.js";const $e=()=>{var R,_;const{addToast:h}=d.useContext(te),{id:T}=re(),[A,L]=d.useState(!0),[t,H]=d.useState([]),[U,V]=d.useState([]),[o,z]=d.useState({jobposting:!0,jobposter:!0,tracker:!0}),[be,J]=d.useState({twitter:!1,facebook:!1}),F=s=>{z({...o,[s]:!o[s]})},N=async()=>{try{L(!0);const s=await $(`/jobposting/${T}`);H(s.data.data),L(!1)}catch(s){console.log(s)}},f=async()=>{try{const s=await $(`/jobposter/${T}`);(s.status===200||s.status===201)&&V(s.data.data)}catch(s){console.log(s)}},W=async s=>{try{const r=await ae(`/jobposter/${s}`);console.log("deleteTrackerData:",r),r.status===200?(h("Success","Deleted successfully","success"),N(),f()):h("Failed","Failed to delete","danger"),f()}catch(r){console.log(r)}},K=b.object({twitterText:b.string().min(1,{message:"Please enter a valid text"}).max(280,{message:"Max of 280 characters"}).optional()}),{register:Q,reset:X,handleSubmit:Y,formState:{errors:k}}=B({resolver:async(s,r,n)=>{const c=await M(K)(s,r,n);return console.log("Validation result:",c),c}}),Z=b.object({text:b.string().min(1,{message:"Please enter a valid text"}).optional()});B({resolver:async(s,r,n)=>{const c=await M(Z)(s,r,n);return console.log("Validation result:",c),c}});const ee=async s=>{try{const r={twitter:s.twitterText,facebook:s.facebookText},n=await ie(`/jobposter/${T}/post`,r);n.status===201?(h("Success","Posted successfully","success"),N(),f()):(console.log("submitSummary: ",n),h("Failed","Failed to post","danger"))}catch{h("Failed","Failed to post","danger")}},se=async(s,r)=>{try{if(r==="twitter"){const n={twitterText:s.content};J(c=>({...c,twitter:!0})),X(n)}}catch(n){console.log(n)}};return d.useEffect(()=>{N(),f()},[]),e.jsx(e.Fragment,{children:A?e.jsx("div",{children:"Loading..."}):e.jsxs(E,{className:"d-flex flex-column gap-2 mb-3",children:[e.jsx(i,{children:e.jsx(a,{children:e.jsxs(C,{children:[e.jsxs(v,{className:"d-flex flex-row justify-content-between align-items-center",children:[e.jsx("strong",{children:"Job Posting Details"}),e.jsx(m,{color:"primary",onClick:()=>F("jobposting"),children:e.jsx(l,{icon:o.jobposting?S:D})})]}),e.jsx(O,{visible:o.jobposting,children:e.jsx(w,{children:e.jsxs(E,{className:"d-flex flex-column gap-2",children:[e.jsx(i,{children:e.jsx(a,{children:e.jsx(P,{content:((R=t.status)==null?void 0:R.toLowerCase())==="active"?"This is an active job posting. This means that the job is currently open and accepting applications and have posted on social media.":"This is an inactive job posting. This means that the job posting is currently closed and not accepting applications.",placement:"top",children:e.jsx(j,{color:((_=t.status)==null?void 0:_.toLowerCase())==="active"?"success":"danger",children:g(t.status)})})})}),e.jsxs(i,{children:[e.jsx(a,{children:e.jsx(x,{id:"title",name:"title",label:"Title",value:g(t.title),readOnly:!0})}),e.jsx(a,{children:e.jsx(x,{id:"type",name:"type",label:"Type",value:g(t.type),readOnly:!0})})]}),e.jsxs(i,{children:[e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Location"}),e.jsxs(I,{className:"mt-2",children:[e.jsx(p,{children:e.jsx(l,{icon:ne})}),e.jsx(x,{id:"location",name:"location",value:g(t.location),readOnly:!0})]})]}),e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Salary"}),e.jsxs(I,{className:"mt-2",children:[e.jsx(p,{children:e.jsx(l,{icon:le})}),e.jsx(x,{id:"salarymin",name:"salarymin",value:y(t.salary_min),readOnly:!0}),e.jsx(x,{id:"salarymax",name:"salarymax",value:y(t.salary_max),readOnly:!0})]})]})]}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Description"}),e.jsx(u,{id:"description",name:"description",value:t.description,readOnly:!0})]})}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Responsibilities"}),e.jsx(u,{id:"responsibilities",name:"responsibilities",value:t.responsibilities,readOnly:!0})]})}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Requirements"}),e.jsx(u,{id:"requirements",name:"requirements",value:t.requirements,readOnly:!0})]})}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Benefits"}),e.jsx(u,{id:"benefits",name:"benefits",value:t.benefits,readOnly:!0})]})}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Schedule"}),e.jsxs(I,{className:"mt-2",children:[e.jsx(p,{children:e.jsx(l,{icon:oe})}),e.jsx(p,{children:"Start"}),e.jsx(x,{type:"date",id:"scheduleStart",name:"scheduleStart",value:G(t.schedule_start),readOnly:!0}),e.jsx(p,{children:"End"}),e.jsx(x,{type:"date",id:"scheduleEnd",name:"scheduleEnd",value:G(t.schedule_end),readOnly:!0})]})]})})]})})})]})})}),e.jsx(i,{children:e.jsx(a,{children:e.jsxs(C,{children:[e.jsxs(v,{className:"d-flex flex-row justify-content-between align-items-center",children:[e.jsx("strong",{children:"Create Post"}),e.jsx(m,{color:"primary",onClick:()=>F("jobposter"),children:e.jsx(l,{icon:o.jobposter?S:D})})]}),e.jsx(O,{visible:o.jobposter,children:e.jsx(w,{children:e.jsxs(he,{onSubmit:Y(ee),className:"d-flex flex-column gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Review Post"}),e.jsx("p",{className:"text-muted",children:"If left blank, the default text will be used."})]}),e.jsxs("div",{children:[e.jsxs(je,{className:"d-flex flex-row gap-2 justify-items-center",children:[e.jsx(l,{icon:q,className:"text-info"}),e.jsx("strong",{children:"Create Twitter Post (280 characters)"})]}),e.jsx(u,{id:"twitterText",name:"twitterText",placeholder:"Twitter Post description..",defaultValue:`NOW HIRING! 
${t.title}
Location: ${t.location}
Salary: ${y(t.salary_min)} - ${y(t.salary_max)}
=====
PM me for more details!`,...Q("twitterText"),invalid:!!k.twitterText,className:"mh-100"}),e.jsxs("div",{style:{fontSize:"10px"},className:"text-muted mb-3",children:["This summary will be posted on ",e.jsx("span",{className:"text-info",children:"twitter"}),", with a character limit of 280 characters. Due to this limitation, we recommend keeping the summary short and sweet."]}),k.twitterText&&e.jsx(pe,{invalid:!0,children:k.twitterText.message})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(m,{color:"primary",type:"submit",className:"mb-3",children:"Post Tweet"})})]})})})]})})}),e.jsx(i,{children:e.jsx(a,{children:e.jsxs(C,{children:[e.jsxs(v,{className:"d-flex flex-row justify-content-between align-items-center",children:[e.jsx("strong",{children:"Tracker"}),e.jsx(m,{color:"primary",onClick:()=>F("tracker"),children:e.jsx(l,{icon:o.tracker?S:D})})]}),e.jsx(O,{visible:o.tracker,children:e.jsx(w,{children:e.jsx(E,{children:e.jsx(i,{xs:{cols:1},md:{cols:3},className:"g-3",children:U.map((s,r)=>s?e.jsx(a,{children:e.jsxs(C,{className:"mb-3 h-100",children:[e.jsxs(v,{className:"d-flex flex-row gap-2 align-items-center",children:[e.jsx("div",{children:e.jsx(l,{icon:s.platform==="twitter"?q:xe,className:s.platform==="twitter"?"text-info":"text-primary"})}),e.jsx("strong",{className:"text-uppercase",children:s.platform})]}),e.jsxs(w,{children:[e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(j,{color:s.status==="active"?"success":"danger",children:s.status==="active"?"Active":"Inactive"}),s.isPosted?e.jsx(j,{color:"success",children:"Posted"}):e.jsx(j,{color:"danger",children:"Not Posted"}),s.isDeleted&&e.jsx(j,{color:"danger",children:"Deleted"})]}),e.jsx("div",{children:e.jsxs("p",{children:["Expires at"," ",e.jsx("span",{className:"text-info",children:me(s.expiresAt)})]})}),e.jsx("div",{children:e.jsx("p",{children:s.content})})]}),e.jsx(ue,{children:e.jsxs(fe,{children:[e.jsx(P,{content:"Delete",placement:"top",children:e.jsx(m,{color:"danger",onClick:()=>W(s._id),children:e.jsx(l,{icon:ce})})}),e.jsx(P,{content:"Use as Template",placement:"top",children:e.jsx(m,{color:"info",onClick:()=>se(s,s.platform),children:e.jsx(l,{icon:de})})})]})})]})},s._id):null)})})})})]})})})]})})};export{$e as default};
