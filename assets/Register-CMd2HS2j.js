import{R as e,f as r}from"./react-router-dom-BnDDw25P.js";import{F as a,x as s,y as i,j as n,u as l}from"./index.es-BUpMRE3D.js";import{z as o}from"./zod-B0zZW6rS.js";import{s as t}from"./@hookform/resolvers/zod-1wp20Skh.js";import{u as c}from"./react-hook-form-DB8hWBdy.js";import{m,a as d,j as h,g as p,w as u}from"./index-DiLnYbjC.js";import{C as f}from"./CContainer-DzOuZpEx.js";import{C as g,a as w}from"./CRow-BNc0QFWW.js";import{C,a as v}from"./CCardBody-BlNAuiwx.js";import{C as y}from"./CAlert-Dv5Ag3lJ.js";import{C as b,a as j}from"./CFormLabel-DwEY-V3u.js";import{C as N}from"./CInputGroup-CqBjsx_2.js";import{C as k}from"./CInputGroupText-D-Qj7id4.js";import{C as P}from"./CFormInput-uT5SP9Ht.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";const x=()=>{const{addToast:x}=e.useContext(m),[R,S]=e.useState(!1),[F,L]=e.useState(""),A=r(),I=o.object({firstname:o.string().min(3,{message:"Firstname must be at least 3 characters long"}),lastname:o.string().min(3,{message:"Lastname must be at least 3 characters long"}),username:o.string().min(3,{message:"Username must be at least 3 characters long"}),email:o.string().email({message:"Invalid email format"}),password:o.string().min(8,{message:"Password must be at least 8 characters long"}),repeatPassword:o.string().min(8,{message:"Repeat password must be at least 8 characters long"})}).refine((e=>e.password===e.repeatPassword),{message:"Passwords do not match",path:["repeatPassword"]}),{register:E,reset:T,handleSubmit:z,formState:{errors:B}}=c({resolver:async(e,r,a)=>await t(I)(e,r,a)});return d("div",{className:"d-flex flex-row align-items-center bg-body-tertiary min-vh-100",children:d(f,{children:d(g,{className:"justify-content-center",children:d(w,{md:9,lg:7,xl:6,children:d(C,{className:"mx-4",children:h(v,{className:"p-4",children:[F&&h(y,{color:"success",className:"d-flex align-items-center",children:[d("div",{className:"me-2",children:d(a,{icon:s})}),d("div",{children:d("span",{children:F})})]}),h(b,{onSubmit:z((async e=>{S(!0);try{if(201===(await u("/auth/register",e)).status){T();L(h("span",{children:["Account created successfully. Please check your ",d("strong",{children:"email"})," to verify your account."]})),S(!1)}else x("Error","An error occurred while creating account.","error"),S(!1)}catch(r){x("Error","An error occurred while creating account.","error"),S(!1)}})),children:[d(g,{children:h(w,{children:[d("h1",{children:"Register"}),d("p",{className:"text-body-secondary",children:"Create your account"})]})}),d(g,{children:d(w,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:i})}),d(P,{placeholder:"Firstname",autoComplete:"firstname",...E("firstname"),invalid:!!B.firstname}),B.firstname&&d(j,{invalid:!0,children:B.firstname.message}),d(k,{children:d(a,{icon:i})}),d(P,{placeholder:"Lastname",autoComplete:"lastname",...E("lastname"),invalid:!!B.lastname}),B.firstname&&d(j,{invalid:!0,children:B.firstname.message})]})})}),d(g,{children:d(w,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:i})}),d(P,{placeholder:"Username",autoComplete:"username",...E("username"),invalid:!!B.username}),B.username&&d(j,{invalid:!0,children:B.username.message})]})})}),d(g,{children:d(w,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:n})}),d(P,{placeholder:"Email",autoComplete:"email",...E("email"),invalid:!!B.email}),B.email&&d(j,{invalid:!0,children:B.email.message})]})})}),d(g,{children:d(w,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:l})}),d(P,{type:"password",placeholder:"Password",autoComplete:"new-password",...E("password"),invalid:!!B.password}),B.password&&d(j,{invalid:!0,children:B.password.message})]})})}),d(g,{children:d(w,{children:h(N,{className:"mb-4",children:[d(k,{children:d(a,{icon:l})}),d(P,{type:"password",placeholder:"Repeat password",autoComplete:"new-password",...E("repeatPassword"),invalid:!!B.repeatPassword}),B.repeatPassword&&d(j,{invalid:!0,children:B.repeatPassword.message})]})})}),h(g,{xs:{cols:1,gutter:2},md:{cols:2,gutter:2},className:"mb-3",children:[d(w,{className:"d-grid",children:d(p,{variant:"outline",color:"info",onClick:()=>{A("/login")},children:"Login"})}),d(w,{className:"d-grid",children:d(p,{type:"submit",color:"success",disabled:R,children:R?"Creating account...":"Create account"})})]}),d(g,{children:d(w,{children:d("p",{children:h("small",{children:["By continuing, you agree to our",h("a",{onClick:()=>A("/policy"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:[" ","Privacy Policy"," "]}),"and",h("a",{onClick:()=>A("/terms"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:[" ","Terms of Service"]}),"."]})})})})]})]})})})})})})};export{x as default};
