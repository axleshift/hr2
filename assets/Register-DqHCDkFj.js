import{R as e,f as r}from"./react-router-dom-BnDDw25P.js";import{F as a,E as s,G as i,j as n,B as l}from"./index.es-Bu1yrmVS.js";import{z as o}from"./zod-B0zZW6rS.js";import{s as t}from"./@hookform/resolvers/zod-B5rlnuQ9.js";import{u as c}from"./react-hook-form-DGCwHb0C.js";import{m,a as d,j as h,g as p,v as u}from"./index-CopbqkEz.js";import{C as f}from"./CContainer-NNqe3VRY.js";import{C as g,a as C}from"./CRow-aiLILlFw.js";import{C as w,a as v}from"./CCardBody-DJryQPgH.js";import{C as y}from"./CAlert-CY_6O95P.js";import{C as b,a as j}from"./CFormLabel-BzT4prGI.js";import{C as N}from"./CInputGroup-Dah1QukK.js";import{C as k}from"./CInputGroupText-rBecHxDA.js";import{C as P}from"./CFormInput-z6oSFf3U.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";const x=()=>{const{addToast:x}=e.useContext(m),[F,S]=e.useState(!1),[L,R]=e.useState(""),A=r(),E=o.object({firstname:o.string().min(3,{message:"Firstname must be at least 3 characters long"}),lastname:o.string().min(3,{message:"Lastname must be at least 3 characters long"}),username:o.string().min(3,{message:"Username must be at least 3 characters long"}),email:o.string().email({message:"Invalid email format"}),password:o.string().min(8,{message:"Password must be at least 8 characters long"}),repeatPassword:o.string().min(8,{message:"Repeat password must be at least 8 characters long"})}).refine((e=>e.password===e.repeatPassword),{message:"Passwords do not match",path:["repeatPassword"]}),{register:I,reset:B,handleSubmit:G,formState:{errors:T}}=c({resolver:async(e,r,a)=>await t(E)(e,r,a)});return d("div",{className:"d-flex flex-row align-items-center bg-body-tertiary min-vh-100",children:d(f,{children:d(g,{className:"justify-content-center",children:d(C,{md:9,lg:7,xl:6,children:d(w,{className:"mx-4",children:h(v,{className:"p-4",children:[L&&h(y,{color:"success",className:"d-flex align-items-center",children:[d("div",{className:"me-2",children:d(a,{icon:s})}),d("div",{children:d("span",{children:L})})]}),h(b,{onSubmit:G((async e=>{S(!0);try{if(201===(await u("/auth/register",e)).status){B();R(h("span",{children:["Account created successfully. Please check your ",d("strong",{children:"email"})," to verify your account."]})),S(!1)}else x("Error","An error occurred while creating account.","error"),S(!1)}catch(r){x("Error","An error occurred while creating account.","error"),S(!1)}})),children:[d(g,{children:h(C,{children:[d("h1",{children:"Register"}),d("p",{className:"text-body-secondary",children:"Create your account"})]})}),d(g,{children:d(C,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:i})}),d(P,{placeholder:"Firstname",autoComplete:"firstname",...I("firstname"),invalid:!!T.firstname}),T.firstname&&d(j,{invalid:!0,children:T.firstname.message}),d(k,{children:d(a,{icon:i})}),d(P,{placeholder:"Lastname",autoComplete:"lastname",...I("lastname"),invalid:!!T.lastname}),T.firstname&&d(j,{invalid:!0,children:T.firstname.message})]})})}),d(g,{children:d(C,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:i})}),d(P,{placeholder:"Username",autoComplete:"username",...I("username"),invalid:!!T.username}),T.username&&d(j,{invalid:!0,children:T.username.message})]})})}),d(g,{children:d(C,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:n})}),d(P,{placeholder:"Email",autoComplete:"email",...I("email"),invalid:!!T.email}),T.email&&d(j,{invalid:!0,children:T.email.message})]})})}),d(g,{children:d(C,{children:h(N,{className:"mb-3",children:[d(k,{children:d(a,{icon:l})}),d(P,{type:"password",placeholder:"Password",autoComplete:"new-password",...I("password"),invalid:!!T.password}),T.password&&d(j,{invalid:!0,children:T.password.message})]})})}),d(g,{children:d(C,{children:h(N,{className:"mb-4",children:[d(k,{children:d(a,{icon:l})}),d(P,{type:"password",placeholder:"Repeat password",autoComplete:"new-password",...I("repeatPassword"),invalid:!!T.repeatPassword}),T.repeatPassword&&d(j,{invalid:!0,children:T.repeatPassword.message})]})})}),h(g,{xs:{cols:1,gutter:2},md:{cols:2,gutter:2},className:"mb-3",children:[d(C,{className:"d-grid",children:d(p,{variant:"outline",color:"info",onClick:()=>{A("/login")},children:"Login"})}),d(C,{className:"d-grid",children:d(p,{type:"submit",color:"success",disabled:F,children:F?"Creating account...":"Create account"})})]}),d(g,{children:d(C,{children:d("p",{children:h("small",{children:["By continuing, you agree to our",h("a",{onClick:()=>A("/policy"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:[" ","Privacy Policy"," "]}),"and",h("a",{onClick:()=>A("/terms"),className:"link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover",children:[" ","Terms of Service"]}),"."]})})})})]})]})})})})})})};export{x as default};
