import{r as e}from"./react-router-dom-BnDDw25P.js";import{F as t,A as r,B as i}from"./index.es-BUpMRE3D.js";import{A as s,a,F as n,j as o,g as l,k as c,x as d}from"./index-DiLnYbjC.js";import{t as m,f as h,b as p}from"./index-BOi-5bX2.js";import u from"./EventForm--1G_bsNu.js";import{I as f}from"./InterviewForm-DdCg-vDR.js";import{C as j}from"./CContainer-DzOuZpEx.js";import{C,a as v}from"./CRow-BNc0QFWW.js";import{C as S}from"./CFormLabel-DwEY-V3u.js";import{C as g}from"./CInputGroup-CqBjsx_2.js";import{C as w}from"./CFormInput-uT5SP9Ht.js";import{C as x,a as y}from"./CCardBody-BlNAuiwx.js";import{C as b,a as N,b as F,c as T,d as A,e as I}from"./CTable-Bp7z3h6O.js";import{C as k}from"./CTooltip-Dv1PmkHW.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./zod-B0zZW6rS.js";import"./react-hook-form-DB8hWBdy.js";import"./@hookform/resolvers/zod-1wp20Skh.js";import"./AppPagination-CAajZQ_e.js";import"./CModalHeader-BDpLr51j.js";import"./DefaultLayout-Cau2R5kl.js";import"./index.esm-Dwb_M0UQ.js";import"./isRTL-D5ORmfro.js";import"./CModalTitle-Cp-5Mm7J.js";import"./CTabList-CMUdfq-k.js";import"./CFormSelect-C1vm9vYc.js";import"./CFormRange-CUaN4TSW.js";import"./CFormTextarea-D1VEMpzQ.js";import"./ConfirmationDialog-DKnIDZMn.js";import"./CCardHeader-RwHMwrzp.js";import"./JobOfferForm-BdfSx825.js";import"./CFormCheck-CYxVXjta.js";const z=()=>{const{userInformation:z}=e.useContext(s),[L,R]=e.useState([]),[E,M]=e.useState(!1),[_,D]=e.useState(!1),[H,O]=e.useState("view"),[P,V]=e.useState({}),[B,J]=e.useState(1),[q,G]=e.useState(9),[K,W]=e.useState(0),[X,Y]=e.useState(0),[Z,$]=e.useState([]),[Q,U]=e.useState(!1),[ee,te]=e.useState(1),[re,ie]=e.useState(9),[se,ae]=e.useState(0),[ne,oe]=e.useState(0),[le,ce]=e.useState(!1),[de,me]=e.useState({}),[he,pe]=e.useState("view"),[ue,fe]=e.useState({}),[je,Ce]=e.useState({}),ve=async()=>{try{M(!0);const e=await d("/facilities/events/upcoming");200===e.status&&(R(e.data.data),M(!1))}catch(e){M(!1)}},Se=async()=>{try{U(!0);const e=await d("/applicant/interview/recent");200===e.status&&$(e.data.data)}catch(e){}finally{U(!1)}};return e.useEffect((()=>{const e=setTimeout((()=>{ve(),Se()}),500);return()=>clearTimeout(e)}),[B,K,X]),a(n,{children:o(j,{children:[a(C,{className:"mb-3",children:o(v,{children:[a("h2",{children:"Interviews & Other Events"}),o("small",{children:["In this page, you can ",a("span",{className:"text-info",children:"view"})," and"," ",a("span",{className:"text-warning",children:"edit"})," the list of upcoming interviews and events."]})]})}),a(C,{className:"mb-3",children:a(v,{children:a(S,{children:o(g,{children:[a(w,{type:"search",placeholder:"Search...","aria-label":"Search"}),a(l,{type:"button",color:"primary",children:a(t,{icon:r})}),a(l,{type:"button",color:"primary",onClick:()=>{ve()},children:a(t,{icon:i})})]})})})}),a(C,{className:"mb-3",children:a(v,{children:a(x,{children:a(y,{children:o(b,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[a(N,{children:o(F,{children:[a(T,{children:"#"}),a(T,{children:"Event"}),a(T,{children:"Author"}),a(T,{children:"Type"}),a(T,{children:"Date"}),a(T,{children:"Timeslot"}),a(T,{children:"Participants"}),a(T,{children:"Approved"}),a(T,{children:"Actions"})]})}),a(A,{children:E?a(F,{children:a(I,{colSpan:"12",children:a("div",{className:"d-flex justify-content-center",children:a(c,{variant:"grow",size:"sm"})})})}):0===L.length?a(F,{children:a(I,{colSpan:"12",children:a("div",{className:"d-flex justify-content-center",children:"No upcoming events found"})})}):L.map((e=>{var t,r,i;return o(F,{children:[a(k,{placement:"top",content:e._id,children:a(I,{children:m(e._id,10)})}),a(I,{children:e.name}),o(I,{children:[e.author.lastname,", ",e.author.firstname]}),a(I,{className:"text-info",children:e.type}),a(I,{children:h(e.date)}),o(I,{children:[p(null==(t=e.timeslot)?void 0:t.start)," - ",p(null==(r=e.timeslot)?void 0:r.end)," "]}),a(I,{children:a("div",{className:"d-flex justify-content-center",children:null==(i=e.participants)?void 0:i.length})}),a(I,{children:e.isApproved.status?a("span",{className:"text-success",children:"Approved"}):a("small",{className:"text-danger",children:"Requires Approval"})}),a(I,{children:o("div",{className:"d-flex gap-2 flex-row",children:[a(l,{color:"info",size:"sm",onClick:()=>{O("view"),D(!0),V(e.timeslot)},children:"View"}),("admin"===z.role||"manager"===z.role)&&a(l,{color:"warning",size:"sm",onClick:()=>{O("edit"),D(!0),V(e.timeslot)},children:"Manage"})]})})]},e._id)}))})]})})})})}),a(C,{children:a(v,{children:a(u,{isVisible:_,onClose:()=>{O("view"),D(!1),ve(),Se()},state:H,slot:P})})}),a(C,{children:a(v,{children:a(f,{isVisible:le,onClose:()=>ce(!1),state:he,interview:de})})})]})})};export{z as default};
