import{f as e,R as t}from"./react-router-dom-BnDDw25P.js";import{F as r,A as a,B as s,N as n}from"./index.es-bvOFjCBQ.js";import{m as i,a as c,F as o,j as l,g as d,k as m,w as h}from"./index-CcMoZ86M.js";import{t as p,f as u,d as f}from"./index-DCO1bnrX.js";import{A as x}from"./AppPagination-DKVbBTy2.js";import{z as j}from"./zod-B0zZW6rS.js";import{u as g}from"./react-hook-form-DB8hWBdy.js";import{s as N}from"./@hookform/resolvers/zod-1wp20Skh.js";import{C}from"./CContainer-CXw2kXtD.js";import{C as v,a as y}from"./CRow-Bcopbwr-.js";import{C as b,a as S}from"./CFormLabel-Cn49qeSD.js";import{C as A}from"./CInputGroup-CE3U5zA5.js";import{C as w}from"./CFormInput-DqSYQ0H6.js";import{C as q}from"./CTooltip-DPwsLnsN.js";import{C as P,a as k}from"./CCardBody-NXgyA15G.js";import{C as T,a as E,b as F,c as Y,d as $,e as R}from"./CTable-Cj8mkuZH.js";import{C as z}from"./DefaultLayout-f6fgnM5a.js";import{C as I}from"./CButtonGroup-CLoG-eYt.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./isRTL-D5ORmfro.js";import"./getTransitionDurationFromElement-2nBpLMKS.js";import"./index.esm-5D08hL8w.js";const L=()=>{const L=e(),{addToast:_}=t.useContext(i),[B,D]=t.useState([]),[G,J]=t.useState(!1),[M,O]=t.useState(1),[H,K]=t.useState(1),[Q,V]=t.useState(10),[W,X]=t.useState(!1),[U,Z]=t.useState(""),ee=async(e="",t,r)=>{J(!0);try{const a=""===e||null==e?await h(`/jobposter/all?page=${t}&limit=${r}`):await h(`/jobposter/all?query=${e}&page=${t}&limit=${r}`);if(200===a.status)return D(a.data.data),K(a.data.totalPages),J(!1),void X(!1);_("Jobposts",a.message.message,"danger"),J(!1),X(!1)}catch(a){_("Danger","Failed to fetch data","Error"),J(!1),X(!1)}},te=j.object({query:j.string().min(3,{message:"Search query must be at least 3 characters"})}),{register:re,reset:ae,handleSubmit:se,formState:{error:ne}}=g({resolver:async(e,t,r)=>await N(te)(e,t,r)});return t.useEffect((()=>{ee(U,M,Q)}),[U,M,Q]),c(o,{children:l(C,{children:[c(v,{className:"mb-3",children:l(y,{children:[c("h1",{children:"Jobpost Tracker"}),c("small",{className:"text-muted",children:"In this page, you can view all the jobpost tracker data in various platforms."})]})}),c(v,{className:"mb-3",children:c(y,{children:c(b,{onSubmit:se((async e=>{X(!0),ee(e.query,M,Q)})),children:l(A,{children:[c(w,{type:"text",placeholder:"Search...",...re("query"),invalid:!!(null==ne?void 0:ne.query)}),(null==ne?void 0:ne.query)&&c(S,{className:"text-danger",children:ne.query.message}),c(q,{content:"Search",placement:"top",children:c(d,{type:"submit",className:"btn btn-primary",children:c(r,{icon:a})})}),c(q,{content:"Refresh",placement:"top",children:c(d,{onClick:()=>{ee(U,M,Q)},className:"btn btn-primary",children:c(r,{icon:s})})})]})})})}),c(v,{children:c(y,{children:c(P,{children:c(k,{children:l(T,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[c(E,{children:l(F,{children:[c(Y,{children:c("div",{className:"text-center",children:c("strong",{children:"#"})})}),c(Y,{children:c("div",{className:"text-center",children:"Platform"})}),c(Y,{children:c("div",{className:"text-center",children:"Approved"})}),c(Y,{children:c("div",{className:"text-center",children:"Posted"})}),c(Y,{children:c("div",{className:"text-center",children:"Expires At"})}),c(Y,{children:"Content "}),c(Y,{children:c("div",{className:"text-center",children:"Actions"})})]})}),c($,{children:G?c(F,{children:c(R,{colSpan:"8",className:"text-center",children:c(m,{color:"primary",variant:"grow"})})}):0===B.length?c(F,{children:c(R,{colSpan:"8",children:c("div",{className:"text-center",children:"No data"})})}):B.map((e=>l(F,{children:[c(R,{children:c(q,{content:e._id,placement:"top",children:c("div",{className:"text-capitalize text-center",children:p(e._id,2)})})}),c(R,{children:c("div",{className:"text-capitalize text-center",children:e.platform})}),c(R,{className:"text-center",children:e.isApproved?c(z,{color:"success",children:"YES"}):c(z,{color:"danger",children:"NO"})}),c(R,{className:"text-center",children:e.isPosted?c(z,{color:"success",children:"YES"}):c(z,{color:"danger",children:"NO"})}),c(R,{className:"text-center",children:c(q,{content:f(e.expiresAt)+" days left",placement:"top",children:c("span",{className:f(e.expiresAt)>0?"text-info":"text-danger",children:u(e.expiresAt,"MMM d, YYYY")})})}),c(R,{children:c(q,{content:p(e.content,100),placement:"top",children:c("small",{children:p(e.content,50)})})}),c(R,{className:"text-center",children:c(I,{children:c(q,{content:"View",placement:"top",children:c(d,{color:"info",onClick:()=>(e=>{L(`/recruitment/jobposter/${e.ref_id}`)})(e),children:c(r,{icon:n})})})})})]},e._id)))})]})})})})}),c(v,{children:c("div",{className:"mt-3 d-flex flex-row gap-2 justify-content-center align-items-center",children:c(x,{currentPage:M,totalPages:H,onPageChange:O})})})]})})};export{L as default};
