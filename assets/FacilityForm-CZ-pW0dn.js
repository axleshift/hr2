import{r as e}from"./react-router-dom-BnDDw25P.js";import{m as i,j as a,a as o,l as t,g as r,x as s,v as l,p as n}from"./index-CDLNWkH1.js";import{z as d}from"./zod-B0zZW6rS.js";import{u as c}from"./react-hook-form-DGCwHb0C.js";import{s as m}from"./@hookform/resolvers/zod-B5rlnuQ9.js";import{C as p,a as u,b as y}from"./CModalHeader-BPWZasYS.js";import{C as f}from"./CModalTitle-CsGDx1ZU.js";import{C as v}from"./CFormLabel-CMB5m-Mb.js";import{C as h,a as b}from"./CRow-Dv7ylWmi.js";import{C as j}from"./CFormInput-Cpt_AbLV.js";import{C}from"./CFormTextarea-B0-u4bLx.js";import{C as g}from"./CModalFooter-BHClG5Je.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./DefaultLayout-Bslh-jLE.js";import"./CContainer-C8s0HPSv.js";import"./index.esm-JfIxWHlD.js";import"./index.es-DOS6LnW0.js";import"./isRTL-D5ORmfro.js";const x=({isVisible:n,onClose:x,isEdit:F,facilityData:N})=>{const{addToast:T}=e.useContext(i),q=d.object({name:d.string().nonempty("Name is required"),type:d.string().nonempty("Type is required"),description:d.string().nonempty("Description is required"),location:d.string().nonempty("Location is required")}),{register:D,handleSubmit:E,reset:L,formState:{errors:V}}=c({resolver:m(q)});return e.useEffect((()=>{n||L(),F&&L({name:null==N?void 0:N.name,type:null==N?void 0:N.type,description:null==N?void 0:N.description,location:null==N?void 0:N.location})}),[n,F]),a(p,{visible:n,onClose:()=>{L(),x()},children:[o(u,{children:o(f,F?{children:"Edit Facility"}:{children:"Add Facility"})}),o(y,{children:a(v,{onSubmit:E((async e=>{try{const i=new FormData;i.append("name",e.name),i.append("type",e.type),i.append("description",e.description),i.append("location",e.location);const a=F?await s(`/facilities/update/${N._id}`,i):await l("/facilities/create",e);200!==a.status&&201!==a.status||T("Success","Facility Added Successfully","success"),L(),x()}catch(i){T("Error","An Error Occurred","danger")}})),children:[o(h,{className:"mb-3",children:a(b,{children:[o(j,{type:"text",label:"Facility Name",placeholder:"Facility Name",...D("name"),defaultValue:null==N?void 0:N.name,invalid:!!(null==V?void 0:V.name)}),V.name&&o("div",{className:"invalid-feedback",children:V.name.message})]})}),o(h,{className:"mb-3",children:a(b,{children:[o(j,{type:"text",label:"Type",placeholder:"Type",...D("type"),defaultValue:null==N?void 0:N.type,invalid:!!(null==V?void 0:V.type)}),V.type&&o("div",{className:"invalid-feedback",children:V.type.message})]})}),o(h,{className:"mb-3",children:a(b,{children:[o(C,{type:"text",rows:5,label:"Description",placeholder:"Description",...D("description"),defaultValue:null==N?void 0:N.description,invalid:!!(null==V?void 0:V.description)}),V.description&&o("div",{className:"invalid-feedback",children:V.description.message})]})}),o(h,{className:"mb-3",children:a(b,{children:[o(j,{type:"text",label:"Location",placeholder:"Location",...D("location"),defaultValue:null==N?void 0:N.location,invalid:!!(null==V?void 0:V.location)}),V.location&&o("div",{className:"invalid-feedback",children:V.location.message})]})}),a(g,{children:["development"===t.env,o(r,{color:"primary",type:"submit",children:F?"Update":"Create"})]})]})})]})};x.propTypes={isVisible:n.bool.isRequired,onClose:n.func.isRequired,isEdit:n.bool.isRequired,facilityData:n.object};export{x as default};
