import{r as e}from"./react-router-dom-BnDDw25P.js";import{m as i,j as a,a as o,l as t,g as s,k as r,x as l,v as n,p as d}from"./index-D3tAU7AY.js";import{z as c}from"./zod-B0zZW6rS.js";import{u as m}from"./react-hook-form-DB8hWBdy.js";import{s as p}from"./@hookform/resolvers/zod-1wp20Skh.js";import{C as u,a as y,b as f}from"./CModalHeader-B7MHNovK.js";import{C as v}from"./CModalTitle-hcPyglLB.js";import{C as h}from"./CFormLabel-Dokt-hw2.js";import{C as b,a as j}from"./CRow-BNYOpc2u.js";import{C}from"./CFormInput-8wEkUehS.js";import{C as g}from"./CFormTextarea-CSUq8iIt.js";import{C as x}from"./CModalFooter-Cm_01zVP.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./DefaultLayout-I7g3Xi84.js";import"./CContainer-BR4ie7fq.js";import"./index.esm-D05r2ZOM.js";import"./index.es-C3trJVa-.js";import"./isRTL-D5ORmfro.js";const F=({isVisible:d,onClose:F,isEdit:N,facilityData:T})=>{const{addToast:k}=e.useContext(i),[q,D]=e.useState(!1),L=c.object({name:c.string().nonempty("Name is required"),type:c.string().nonempty("Type is required"),description:c.string().nonempty("Description is required"),location:c.string().nonempty("Location is required")}),{register:E,handleSubmit:S,reset:V,formState:{errors:w}}=m({resolver:p(L)});return e.useEffect((()=>{d||V(),N&&V({name:null==T?void 0:T.name,type:null==T?void 0:T.type,description:null==T?void 0:T.description,location:null==T?void 0:T.location})}),[d,N]),a(u,{visible:d,onClose:()=>{V(),F()},children:[o(y,{children:o(v,N?{children:"Edit Facility"}:{children:"Add Facility"})}),o(f,{children:a(h,{onSubmit:S((async e=>{try{D(!0);const i=new FormData;i.append("name",e.name),i.append("type",e.type),i.append("description",e.description),i.append("location",e.location);const a=N?await l(`/facilities/update/${T._id}`,i):await n("/facilities/create",e);200!==a.status&&201!==a.status||k("Success","Facility Added Successfully","success"),D(!1),V(),F()}catch(i){k("Error","An Error Occurred","danger")}})),children:[o(b,{className:"mb-3",children:a(j,{children:[o(C,{type:"text",label:"Facility Name",placeholder:"Facility Name",...E("name"),defaultValue:null==T?void 0:T.name,invalid:!!(null==w?void 0:w.name)}),w.name&&o("div",{className:"invalid-feedback",children:w.name.message})]})}),o(b,{className:"mb-3",children:a(j,{children:[o(C,{type:"text",label:"Type",placeholder:"Type",...E("type"),defaultValue:null==T?void 0:T.type,invalid:!!(null==w?void 0:w.type)}),w.type&&o("div",{className:"invalid-feedback",children:w.type.message})]})}),o(b,{className:"mb-3",children:a(j,{children:[o(g,{type:"text",rows:5,label:"Description",placeholder:"Description",...E("description"),defaultValue:null==T?void 0:T.description,invalid:!!(null==w?void 0:w.description)}),w.description&&o("div",{className:"invalid-feedback",children:w.description.message})]})}),o(b,{className:"mb-3",children:a(j,{children:[o(C,{type:"text",label:"Location",placeholder:"Location",...E("location"),defaultValue:null==T?void 0:T.location,invalid:!!(null==w?void 0:w.location)}),w.location&&o("div",{className:"invalid-feedback",children:w.location.message})]})}),a(x,{children:["development"===t.env,q?o(s,{color:"primary",type:"submit",children:N?"Update":"Create"}):a(s,{color:"primary",type:"submit",disabled:!q,children:[o(r,{size:"sm"})," Loading..."]})]})]})})]})};F.propTypes={isVisible:d.bool.isRequired,onClose:d.func.isRequired,isEdit:d.bool.isRequired,facilityData:d.object};export{F as default};
