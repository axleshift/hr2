import{r as e,h as t}from"./react-router-dom-BnDDw25P.js";import{m as a,a as i,F as r,j as s,g as l,w as n,v as c,y as o}from"./index-D3tAU7AY.js";import{u as d}from"./react-hook-form-DB8hWBdy.js";import{s as h}from"./@hookform/resolvers/zod-1wp20Skh.js";import{z as m}from"./zod-B0zZW6rS.js";import{F as p,K as u,L as f,M as x,J as b,G as y,N as j,O as v}from"./index.es-C3trJVa-.js";import{a as g,f as w,t as C}from"./index-DCO1bnrX.js";import{C as N}from"./CContainer-BR4ie7fq.js";import{C as T,a as F}from"./CRow-BNYOpc2u.js";import{C as S}from"./CTooltip-DWX4KEIk.js";import{C as O}from"./CCollapse-g8lp3nvF.js";import{C as P}from"./DefaultLayout-I7g3Xi84.js";import{C as k}from"./CFormInput-8wEkUehS.js";import{C as D}from"./CInputGroup-DtFQFAYz.js";import{C as I}from"./CInputGroupText-D6IGR02j.js";import{C as L}from"./CFormTextarea-CSUq8iIt.js";import{C as _,b as $,a as E}from"./CFormLabel-Dokt-hw2.js";import{C as z,a as G}from"./CCardBody-DiGo_jhZ.js";import{C as R,a as J,b as M,c as q,d as A,e as B}from"./CTable-BVtvZRLu.js";import{C as H}from"./CButtonGroup-DAkX9MoY.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./isRTL-D5ORmfro.js";import"./index.esm-D05r2ZOM.js";
/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const V={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]},Y=()=>{var Y,K;const Q={},{addToast:U}=e.useContext(a),{id:W}=t(),[X,Z]=e.useState(!0),[ee,te]=e.useState(!0),[ae,ie]=e.useState([]),[re,se]=e.useState([]),[le,ne]=e.useState({jobposting:!0,jobposter:!0,tracker:!0}),[ce,oe]=e.useState({twitter:!1,facebook:!1}),de=async()=>{try{Z(!0);const e=await n(`/jobposting/${W}`);200===e.status||201===e.status?(ie(e.data.data),Z(!1)):Z(!1)}catch(e){}},he=async()=>{try{te(!0);const e=await n(`/jobposter/${W}`);200!==e.status&&201!==e.status||(se(e.data.data),te(!1))}catch(e){te(!1)}},me=m.object({twitterText:m.string().min(1,{message:"Please enter a valid text"}).max(280,{message:"Max of 280 characters"}).optional()}),{register:pe,reset:ue,handleSubmit:fe,formState:{errors:xe}}=d({resolver:async(e,t,a)=>await h(me)(e,t,a)}),be=m.object({text:m.string().min(1,{message:"Please enter a valid text"}).optional()}),{register:ye,handleSubmit:je,formState:{errors:ve}}=d({resolver:async(e,t,a)=>await h(be)(e,t,a)});return e.useEffect((()=>{de(),he()}),[]),i(r,{children:X?i("div",{children:"Loading..."}):s(N,{className:"d-flex flex-column gap-2 mb-3",children:[s(T,{children:[s(F,{children:[i("h2",{children:"Job Posting Details"}),i("small",{children:"This is the job posting details. It will show the details of the job posting."})]}),i(F,{className:"d-flex justify-content-end",children:i("div",{children:i(S,{content:le.jobposting?"Hide Job Posting Details":"Show Job Posting Details",placement:"top",children:i(l,{color:"primary",onClick:()=>{return e="jobposting",void ne({...le,[e]:!le[e]});var e},children:i(p,{icon:le.jobposting?u:f})})})})})]}),i(T,{children:i(F,{children:i(O,{visible:le.jobposting,children:s(N,{className:"d-flex flex-column gap-2",children:[i(T,{children:i(F,{children:i(S,{content:"active"===(null==(Y=ae.status)?void 0:Y.toLowerCase())?"This is an active job posting. This means that the job is currently open and accepting applications and have posted on social media.":"This is an inactive job posting. This means that the job posting is currently closed and not accepting applications.",placement:"top",children:i(P,{color:"active"===(null==(K=ae.status)?void 0:K.toLowerCase())?"success":"danger",className:"text-capitalize",children:ae.status})})})}),s(T,{children:[i(F,{children:i(k,{id:"title",name:"title",label:"Title",value:ae.title,readOnly:!0})}),i(F,{children:i(k,{id:"type",name:"type",label:"Type",value:ae.type,readOnly:!0})})]}),s(T,{children:[s(F,{children:[i("label",{htmlFor:"",children:"Location"}),s(D,{className:"mt-2",children:[i(I,{children:i(p,{icon:x})}),i(k,{id:"location",name:"location",value:ae.location,readOnly:!0})]})]}),s(F,{children:[i("label",{htmlFor:"",children:"Salary"}),s(D,{className:"mt-2",children:[i(I,{children:i(p,{icon:b})}),i(k,{id:"salarymin",name:"salarymin",value:g(ae.salary_min),readOnly:!0}),i(k,{id:"salarymax",name:"salarymax",value:g(ae.salary_max),readOnly:!0})]})]})]}),i(T,{children:s(F,{children:[i("label",{htmlFor:"",children:"Description"}),i(L,{id:"description",name:"description",value:ae.description,readOnly:!0})]})}),i(T,{children:s(F,{children:[i("label",{htmlFor:"",children:"Responsibilities"}),i(L,{id:"responsibilities",name:"responsibilities",value:ae.responsibilities,readOnly:!0})]})}),i(T,{children:s(F,{children:[i("label",{htmlFor:"",children:"Requirements"}),i(L,{id:"requirements",name:"requirements",value:ae.requirements,readOnly:!0})]})}),i(T,{children:s(F,{children:[i("label",{htmlFor:"",children:"Benefits"}),i(L,{id:"benefits",name:"benefits",value:ae.benefits,readOnly:!0})]})}),i(T,{children:s(F,{children:[i("label",{htmlFor:"",children:"Schedule"}),s(D,{className:"mt-2",children:[i(I,{children:i(p,{icon:y})}),i(I,{children:"Start"}),i(k,{type:"date",id:"scheduleStart",name:"scheduleStart",value:w(ae.schedule_start),readOnly:!0}),i(I,{children:"End"}),i(k,{type:"date",id:"scheduleEnd",name:"scheduleEnd",value:w(ae.schedule_end),readOnly:!0})]})]})})]})})})}),i(T,{children:s(F,{children:[i("hr",{}),i(N,{children:s(_,{onSubmit:fe((async e=>{try{const t={twitter:e.twitterText,facebook:e.facebookText};201===(await c(`/jobposter/${W}/post`,t)).status?(U("Success","Posted successfully","success"),de(),he()):U("Failed","Failed to post","danger")}catch(t){U("Failed","Failed to post","danger")}})),className:"d-flex flex-column gap-2",classID:"twitterForm",ref:e=>Q.twitterForm=e,children:[i("h2",{children:"Create Post"}),s("div",{children:[s($,{className:"d-flex flex-row gap-2 justify-items-center align-items-center",children:[i(p,{icon:V,className:"text-info"}),i("strong",{children:"Create Twitter Post (280 characters)"})]}),i(L,{id:"twitterText",name:"twitterText",placeholder:"Twitter Post description..",defaultValue:`NOW HIRING! \n${ae.title}\nLocation: ${ae.location}\nSalary: ${g(ae.salary_min)} - ${g(ae.salary_max)}\n=====\nPM me for more details!`,...pe("twitterText"),invalid:!!xe.twitterText,className:"scalableCFormTextArea-200"}),i("small",{className:"text-muted",children:"If left blank, the default text will be used."}),i("br",{}),s("small",{className:"text-muted mb-3",children:["This summary will be posted on ",i("span",{className:"text-info",children:"twitter"}),", with a character limit of 280 characters. Due to this limitation, we recommend keeping the summary short and sweet."]}),xe.twitterText&&i(E,{invalid:!0,children:xe.twitterText.message})]}),i("div",{className:"d-flex justify-content-end",children:i(l,{color:"primary",type:"submit",className:"mb-3",children:"Post Tweet"})})]})})]})}),i(T,{children:i(F,{children:s(N,{children:[s("div",{children:[i("hr",{}),i("h2",{children:"Tracker"}),i("small",{children:"This is a tracker for the job posting. It will show the status of the job postings on various platforms."})]}),i(z,{children:i(G,{children:s(R,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[i(J,{children:s(M,{children:[i(q,{children:i("div",{className:"text-center",children:i("strong",{children:"#"})})}),i(q,{children:i("div",{className:"text-center",children:"Platform"})}),i(q,{children:i("div",{className:"text-center",children:"Posted"})}),i(q,{children:i("div",{className:"text-center",children:"Deleted"})}),i(q,{children:i("div",{className:"text-center",children:"Expires At"})}),i(q,{children:"Content "}),i(q,{children:i("div",{className:"text-center",children:"Actions"})})]})}),i(A,{children:ee?i(M,{children:i(B,{colSpan:"7",children:"Loading..."})}):re.map(((e,t)=>e?s(M,{children:[i(B,{children:i(S,{content:e._id,placement:"top",children:i("div",{className:"text-capitalize text-center",children:C(e._id,2)})})}),i(B,{children:i("div",{className:"text-capitalize text-center",children:e.platform})}),i(B,{className:"text-center",children:e.isPosted?i(P,{color:"success",children:"YES"}):i(P,{color:"danger",children:"NO"})}),i(B,{className:"text-center",children:e.isDeleted?i(P,{color:"success",children:"YES"}):i(P,{color:"danger",children:"NO"})}),i(B,{className:"text-center",children:i("span",{className:"text-info",children:w(e.expiresAt)})}),i(B,{children:i(S,{content:e.content,placement:"top",children:i("small",{children:C(e.content,50)})})}),i(B,{className:"text-center",children:s(H,{children:[i(S,{content:"Delete",placement:"top",children:i(l,{color:"danger",onClick:()=>(async e=>{try{200===(await o(`/jobposter/${e}`)).status?(U("Success","Deleted successfully","success"),de(),he()):U("Failed","Failed to delete","danger"),he()}catch(t){}})(e._id),children:i(p,{icon:j})})}),i(S,{content:"Use as Template",placement:"top",children:i(l,{color:"info",onClick:()=>(async(e,t)=>{try{if("twitter"===t){const t={twitterText:e.content};oe((e=>({...e,twitter:!0}))),ue(t),U("Success","Post Fetched","success"),Q.twitterForm.scrollIntoView({behavior:"smooth"})}}catch(a){}})(e,e.platform),children:i(p,{icon:v})})})]})})]},e._id):null))})]})})})]})})})]})})};export{Y as default};
