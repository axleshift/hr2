import{z as se,r as x,j as e,y as M,x as R}from"./index-DJmP4oi1.js";import{z as f,u as _,t as $}from"./zod-DUXwhK-0.js";import{F as o,i as k,j as S,l as re,n as ae,m as ie,h as ne,o as oe}from"./index-eE9MX41S.js";import{c as b,b as y,f as B,a as le}from"./index-B7W5ZAKh.js";import{C as D}from"./CContainer-Bi4TmV07.js";import{C as i,a}from"./CRow-C4bqXax5.js";import{C as g,a as C}from"./CCardBody-CsRVGBr3.js";import{C as w}from"./CCardHeader-fZYpQjk6.js";import{a as m}from"./CButton-BokoXM6Y.js";import{C as P}from"./CCollapse-BxLZ-LAq.js";import{C as E}from"./CTooltip-SjvLySxl.js";import{a as h}from"./DefaultLayout-B3wRVOO4.js";import{C as d}from"./CFormInput-CXMpxMYz.js";import{C as O}from"./CInputGroup-D0roewrY.js";import{C as j}from"./CInputGroupText-CcojUkRb.js";import{C as p}from"./CFormTextarea-DHUpeXtL.js";import{C as ce}from"./CForm-CXAWI-AN.js";import{C as de}from"./CFormLabel-ByYPne7n.js";import{C as xe}from"./CFormControlValidation-CkCCXccc.js";import{C as me}from"./CCardFooter-D3-cekKp.js";import{C as he}from"./CButtonGroup-Dr5SINpO.js";import"./getRTLPlacement-DNCpgelB.js";import"./getTransitionDurationFromElement-Cpu4p4hx.js";import"./index.esm-ChogiBHI.js";import"./cil-user-Dlmw-Gem.js";import"./CFormControlWrapper-4INfD17j.js";const je={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"]},z={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]},He=()=>{var L,V;const{id:v}=se(),[H,I]=x.useState(!0),[s,q]=x.useState([]),[G,A]=x.useState([]),[l,U]=x.useState({jobposting:!0,jobposter:!0,tracker:!0}),[pe,J]=x.useState({twitter:!1,facebook:!1}),T=t=>{U({...l,[t]:!l[t]})},N=async()=>{try{I(!0);const t=await M(`/jobposting/${v}`);q(t.data.data),I(!1)}catch(t){console.log(t)}},u=async()=>{try{const t=await M(`/jobposter/${v}`);t.status===200&&A(t.data.data)}catch(t){console.log(t)}},W=async t=>{try{const r=await R(`/jobposter/${t}/delete`);console.log("deleteTrackerData:",r),r.status===200?(alert("Deleted successfully"),N(),u()):alert("Failed to delete"),u()}catch(r){console.log(r)}},K=f.object({twitterText:f.string().min(1,{message:"Please enter a valid text"}).max(280,{message:"Max of 280 characters"}).optional()}),{register:Q,reset:X,handleSubmit:Y,formState:{errors:F}}=_({resolver:async(t,r,n)=>{const c=await $(K)(t,r,n);return console.log("Validation result:",c),c}}),Z=f.object({text:f.string().min(1,{message:"Please enter a valid text"}).optional()});_({resolver:async(t,r,n)=>{const c=await $(Z)(t,r,n);return console.log("Validation result:",c),c}});const ee=async t=>{try{const r={twitter:t.twitterText,facebook:t.facebookText},n=await R(`/jobposter/${v}/post`,r);n.status===201?(alert("Posted successfully"),N(),u()):(console.log("submitSummary: ",n),alert("Failed to post"))}catch{alert("Failed to post")}},te=async(t,r)=>{try{if(r==="twitter"){const n={twitterText:t.content};J(c=>({...c,twitter:!0})),X(n)}}catch(n){console.log(n)}};return x.useEffect(()=>{N(),u()},[]),e.jsx(e.Fragment,{children:H?e.jsx("div",{children:"Loading..."}):e.jsxs(D,{className:"d-flex flex-column gap-2 mb-3",children:[e.jsx(i,{children:e.jsx(a,{children:e.jsxs(g,{children:[e.jsxs(w,{className:"d-flex flex-row justify-content-between align-items-center",children:[e.jsx("strong",{children:"Job Posting Details"}),e.jsx(m,{color:"primary",onClick:()=>T("jobposting"),children:e.jsx(o,{icon:l.jobposting?k:S})})]}),e.jsx(P,{visible:l.jobposting,children:e.jsx(C,{children:e.jsxs(D,{className:"d-flex flex-column gap-2",children:[e.jsx(i,{children:e.jsx(a,{children:e.jsx(E,{content:((L=s.status)==null?void 0:L.toLowerCase())==="active"?"This is an active job posting. This means that the job is currently open and accepting applications and have posted on social media.":"This is an inactive job posting. This means that the job posting is currently closed and not accepting applications.",placement:"top",children:e.jsx(h,{color:((V=s.status)==null?void 0:V.toLowerCase())==="active"?"success":"danger",children:b(s.status)})})})}),e.jsxs(i,{children:[e.jsx(a,{children:e.jsx(d,{id:"title",name:"title",label:"Title",value:b(s.title),readOnly:!0})}),e.jsx(a,{children:e.jsx(d,{id:"type",name:"type",label:"Type",value:b(s.type),readOnly:!0})})]}),e.jsxs(i,{children:[e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Location"}),e.jsxs(O,{className:"mt-2",children:[e.jsx(j,{children:e.jsx(o,{icon:re})}),e.jsx(d,{id:"location",name:"location",value:b(s.location),readOnly:!0})]})]}),e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Salary"}),e.jsxs(O,{className:"mt-2",children:[e.jsx(j,{children:e.jsx(o,{icon:ae})}),e.jsx(d,{id:"salarymin",name:"salarymin",value:y(s.salary_min),readOnly:!0}),e.jsx(d,{id:"salarymax",name:"salarymax",value:y(s.salary_max),readOnly:!0})]})]})]}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Description"}),e.jsx(p,{id:"description",name:"description",value:s.description,readOnly:!0})]})}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Responsibilities"}),e.jsx(p,{id:"responsibilities",name:"responsibilities",value:s.responsibilities,readOnly:!0})]})}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Requirements"}),e.jsx(p,{id:"requirements",name:"requirements",value:s.requirements,readOnly:!0})]})}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Benefits"}),e.jsx(p,{id:"benefits",name:"benefits",value:s.benefits,readOnly:!0})]})}),e.jsx(i,{children:e.jsxs(a,{children:[e.jsx("label",{htmlFor:"",children:"Schedule"}),e.jsxs(O,{className:"mt-2",children:[e.jsx(j,{children:e.jsx(o,{icon:ie})}),e.jsx(j,{children:"Start"}),e.jsx(d,{type:"date",id:"scheduleStart",name:"scheduleStart",value:B(s.schedule_start),readOnly:!0}),e.jsx(j,{children:"End"}),e.jsx(d,{type:"date",id:"scheduleEnd",name:"scheduleEnd",value:B(s.schedule_end),readOnly:!0})]})]})})]})})})]})})}),e.jsx(i,{children:e.jsx(a,{children:e.jsxs(g,{children:[e.jsxs(w,{className:"d-flex flex-row justify-content-between align-items-center",children:[e.jsx("strong",{children:"Create Post"}),e.jsx(m,{color:"primary",onClick:()=>T("jobposter"),children:e.jsx(o,{icon:l.jobposter?k:S})})]}),e.jsx(P,{visible:l.jobposter,children:e.jsx(C,{children:e.jsxs(ce,{onSubmit:Y(ee),className:"d-flex flex-column gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Review Post"}),e.jsx("p",{className:"text-muted",children:"If left blank, the default text will be used."})]}),e.jsxs("div",{children:[e.jsxs(de,{className:"d-flex flex-row gap-2 justify-items-center",children:[e.jsx(o,{icon:z,className:"text-info"}),e.jsx("strong",{children:"Create Twitter Post (280 characters)"})]}),e.jsx(p,{id:"twitterText",name:"twitterText",placeholder:"Twitter Post description..",defaultValue:`NOW HIRING! 
${s.title}
Location: ${s.location}
Salary: ${y(s.salary_min)} - ${y(s.salary_max)}
=====
PM me for more details!`,...Q("twitterText"),invalid:!!F.twitterText,className:"mh-100"}),e.jsxs("div",{style:{fontSize:"10px"},className:"text-muted mb-3",children:["This summary will be posted on ",e.jsx("span",{className:"text-info",children:"twitter"}),", with a character limit of 280 characters. Due to this limitation, we recommend keeping the summary short and sweet."]}),F.twitterText&&e.jsx(xe,{invalid:!0,children:F.twitterText.message})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(m,{color:"primary",type:"submit",className:"mb-3",children:"Post Tweet"})})]})})})]})})}),e.jsx(i,{children:e.jsx(a,{children:e.jsxs(g,{children:[e.jsxs(w,{className:"d-flex flex-row justify-content-between align-items-center",children:[e.jsx("strong",{children:"Tracker"}),e.jsx(m,{color:"primary",onClick:()=>T("tracker"),children:e.jsx(o,{icon:l.tracker?k:S})})]}),e.jsx(P,{visible:l.tracker,children:e.jsx(C,{children:e.jsx(D,{children:e.jsx(i,{xs:{cols:1},md:{cols:3},className:"g-3",children:G.map((t,r)=>t?e.jsx(a,{children:e.jsxs(g,{className:"mb-3 h-100",children:[e.jsxs(w,{className:"d-flex flex-row gap-2 align-items-center",children:[e.jsx("div",{children:e.jsx(o,{icon:t.platform==="twitter"?z:je,className:t.platform==="twitter"?"text-info":"text-primary"})}),e.jsx("strong",{className:"text-uppercase",children:t.platform})]}),e.jsxs(C,{children:[e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(h,{color:t.status==="active"?"success":"danger",children:t.status==="active"?"Active":"Inactive"}),t.isPosted?e.jsx(h,{color:"success",children:"Posted"}):e.jsx(h,{color:"danger",children:"Not Posted"}),t.isDeleted&&e.jsx(h,{color:"danger",children:"Deleted"})]}),e.jsx("div",{children:e.jsxs("p",{children:["Expires at"," ",e.jsx("span",{className:"text-info",children:le(t.expiresAt)})]})}),e.jsx("div",{children:e.jsx("p",{children:t.content})})]}),e.jsx(me,{children:e.jsxs(he,{children:[e.jsx(E,{content:"Delete",placement:"top",children:e.jsx(m,{color:"danger",onClick:()=>W(t._id),children:e.jsx(o,{icon:ne})})}),e.jsx(E,{content:"Use as Template",placement:"top",children:e.jsx(m,{color:"info",onClick:()=>te(t,t.platform),children:e.jsx(o,{icon:oe})})})]})})]})},t._id):null)})})})})]})})})]})})};export{He as default};
