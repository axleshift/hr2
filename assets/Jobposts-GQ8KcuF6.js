import{f as e,R as t}from"./react-router-dom-BnDDw25P.js";import{F as r,A as a,B as s,N as n}from"./index.es-wo5unMlQ.js";import{m as c,a as i,F as l,j as o,g as d,k as m,w as h}from"./index-Ca_ZUGIA.js";import{t as p,f as u,d as f}from"./index-BVfmz2P_.js";import{A as x}from"./AppPagination-D9KSsGqL.js";import{z as j}from"./zod-B0zZW6rS.js";import{u as g}from"./react-hook-form-DGCwHb0C.js";import{s as C}from"./@hookform/resolvers/zod-B5rlnuQ9.js";import{C as N}from"./CContainer-Dy4loWXj.js";import{C as v,a as y}from"./CRow-CPHELemc.js";import{C as b,a as S}from"./CFormLabel-CQm55YfI.js";import{C as A}from"./CInputGroup-xgzt6pqF.js";import{C as w}from"./CFormInput-DWnR0d4V.js";import{C as P}from"./CTooltip-DA8SGSpH.js";import{C as q,a as k}from"./CCardBody-XYUKUWo4.js";import{C as $,a as E,b as F,c as T,d as Y,e as z}from"./CTable-DKTLg3NO.js";import{C as I}from"./DefaultLayout-BCk4bJB5.js";import{C as L}from"./CButtonGroup-BUKzRXeO.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./isRTL-D5ORmfro.js";import"./index.esm-DK6lL4Ms.js";const M=()=>{const M=e(),{addToast:R}=t.useContext(c),[_,B]=t.useState([]),[G,J]=t.useState(!1),[O,D]=t.useState(1),[H,Q]=t.useState(1),[U,V]=t.useState(10),[K,W]=t.useState(!1),[X,Z]=t.useState(""),ee=async(e="",t,r)=>{J(!0);try{const a=""===e||null==e?await h(`/jobposter/all?page=${t}&limit=${r}`):await h(`/jobposter/all?query=${e}&page=${t}&limit=${r}`);if(200===a.status)return B(a.data.data),Q(a.data.totalPages),J(!1),void W(!1);R("Jobposts",a.message.message,"danger"),J(!1),W(!1)}catch(a){R("Danger","Failed to fetch data","Error"),J(!1),W(!1)}},te=j.object({query:j.string().min(3,{message:"Search query must be at least 3 characters"})}),{register:re,reset:ae,handleSubmit:se,formState:{error:ne}}=g({resolver:async(e,t,r)=>await C(te)(e,t,r)});return t.useEffect((()=>{ee(X,O,U)}),[X,O,U]),i(l,{children:o(N,{children:[i(v,{className:"mb-3",children:o(y,{children:[i("h1",{children:"Jobpost Tracker"}),i("small",{className:"text-muted",children:"In this page, you can view all the jobpost tracker data in various platforms."})]})}),i(v,{className:"mb-3",children:i(y,{children:i(b,{onSubmit:se((async e=>{W(!0),ee(e.query,O,U)})),children:o(A,{children:[i(w,{type:"text",placeholder:"Search...",...re("query"),invalid:!!(null==ne?void 0:ne.query)}),(null==ne?void 0:ne.query)&&i(S,{className:"text-danger",children:ne.query.message}),i(P,{content:"Search",placement:"top",children:i(d,{type:"submit",className:"btn btn-primary",children:i(r,{icon:a})})}),i(P,{content:"Refresh",placement:"top",children:i(d,{onClick:()=>{ee(X,O,U)},className:"btn btn-primary",children:i(r,{icon:s})})})]})})})}),i(v,{children:i(y,{children:i(q,{children:i(k,{children:o($,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[i(E,{children:o(F,{children:[i(T,{children:i("div",{className:"text-center",children:i("strong",{children:"#"})})}),i(T,{children:i("div",{className:"text-center",children:"Platform"})}),i(T,{children:i("div",{className:"text-center",children:"Approved"})}),i(T,{children:i("div",{className:"text-center",children:"Posted"})}),i(T,{children:i("div",{className:"text-center",children:"Expires At"})}),i(T,{children:"Content "}),i(T,{children:i("div",{className:"text-center",children:"Actions"})})]})}),i(Y,{children:G?i(F,{children:i(z,{colSpan:"8",className:"text-center",children:i(m,{color:"primary",variant:"grow"})})}):0===_.length?i(F,{children:i(z,{colSpan:"8",children:i("div",{className:"text-center",children:"No data"})})}):_.map((e=>o(F,{children:[i(z,{children:i(P,{content:e._id,placement:"top",children:i("div",{className:"text-capitalize text-center",children:p(e._id,2)})})}),i(z,{children:i("div",{className:"text-capitalize text-center",children:e.platform})}),i(z,{className:"text-center",children:e.isApproved?i(I,{color:"success",children:"YES"}):i(I,{color:"danger",children:"NO"})}),i(z,{className:"text-center",children:e.isPosted?i(I,{color:"success",children:"YES"}):i(I,{color:"danger",children:"NO"})}),i(z,{className:"text-center",children:i(P,{content:f(e.expiresAt)+" days left",placement:"top",children:i("span",{className:f(e.expiresAt)>0?"text-info":"text-danger",children:u(e.expiresAt,"MMM d, YYYY")})})}),i(z,{children:i(P,{content:p(e.content,100),placement:"top",children:i("small",{children:p(e.content,50)})})}),i(z,{className:"text-center",children:i(L,{children:i(P,{content:"View",placement:"top",children:i(d,{color:"info",onClick:()=>(e=>{M(`/recruitment/jobposter/${e.ref_id}`)})(e),children:i(r,{icon:n})})})})})]},e._id)))})]})})})})}),i(v,{children:i("div",{className:"mt-3 d-flex flex-row gap-2 justify-content-center align-items-center",children:i(x,{currentPage:O,totalPages:H,onPageChange:D})})})]})})};export{M as default};
