import{p as f,r as a,B as w,j as e}from"./index-J45zyCJ9.js";import{F as x,z as re,o as ne,A as le,j as oe,B as ce}from"./index.es-BnHaYz2C.js";import{A as ie}from"./AppPagination-D-LRsOUt.js";import{z as H,u as de,t as me}from"./zod-DyFb55dO.js";import{C as he}from"./TimeForm-Co4rXw5n.js";import{a as ue,C as v}from"./index-BbG1ayM5.js";import{C as xe,a as pe,b as fe,c as je}from"./CModalTitle-BWLNbDZe.js";import{C as A}from"./CContainer-Dpqdm7x3.js";import{C as u,a as F}from"./CRow-9TRJXWCY.js";import{a as O,C as ge,c as Ce}from"./CFormInput-RlPoQyzD.js";import{C as Se}from"./CInputGroup-pEwWu4nZ.js";import{a as E}from"./CButton-CQDE0Fd_.js";import{a as V}from"./DefaultLayout-BxQB-ZWK.js";import{C as Te,a as ye}from"./CCardBody-DkcA0BJ0.js";import{C as be,a as De,b as L,c as p,d as Pe,e as h}from"./CTable-PX-MDqeR.js";import"./clsx-B-dksMZM.js";import"./CInputGroupText-D-kwAxyU.js";import"./index.esm-qI8956JS.js";const G=({isVisible:M,onClose:N,isDarkMode:q,applicantData:m})=>{const[j,k]=a.useState({}),[U,i]=a.useState(!1),[d,g]=a.useState(new Date),[z,C]=a.useState(new Date);a.useState([]);const[S,I]=a.useState(1),[n,R]=a.useState(10),[_,T]=a.useState(1),y=o=>{g(o)},b=a.useCallback(async o=>{i(!0);try{const l=await w(`/interview/all?date=${o}&page=${S}&limit=${n}`);if(l.status===404){C([]),i(!1);return}console.log(l.data),C(l.data.data),T(l.data.totalPages),i(!1)}catch(l){console.error(l),i(!1)}});return a.useEffect(()=>{b(d)},[d,S,n]),a.useEffect(()=>{m&&k(m)},[m]),e.jsxs(xe,{visible:M,onClose:N,size:"lg",children:[e.jsx(pe,{children:e.jsx(fe,{children:"Applicant Schedule Create"})}),e.jsx(je,{children:e.jsxs(A,{children:[e.jsx(u,{children:e.jsx(F,{children:e.jsx("div",{className:"mb-3",children:e.jsx(he,{onChange:y,defaultValue:d,className:q?"calendar dark-mode":"calendar"})})})}),e.jsx(u,{children:e.jsx(F,{children:e.jsx(O,{type:"text",id:"date",name:"date",placeholder:"Date",value:ue(d),readOnly:!0})})})]})})]})};G.propTypes={isVisible:f.bool.isRequired,onClose:f.func.isRequired,isDarkMode:f.bool.isRequired,applicantData:f.object};const ve=({theme:M})=>{const N=M==="dark",[q,m]=a.useState(!1),[j,k]=a.useState([]),[U,i]=a.useState(!1),[d,g]=a.useState([]),[z,C]=a.useState({}),[S,I]=a.useState(!1),[n,R]=a.useState([]),[_,T]=a.useState(!1),[y,b]=a.useState(""),[o,l]=a.useState(1),[D,we]=a.useState(9),[X,J]=a.useState(1),$=async(s,t,c)=>{try{i(!0);let r="";n.length>0&&(r=n.map(te=>`${te}`).join(","));const P=_?await w(`/applicant/search?query=${c}&page=${s}&limit=${t}&tags=${r}`):await w("/applicant/all");P.status===200?(console.log(P.data.data),g(P.data.data),J(P.data.totalPages),i(!1)):(console.log("Failed"),i(!1))}catch(r){console.error(r)}},K=async s=>{try{I(!0);const t=d.find(c=>c._id===s);C(t)}catch(t){console.error(t)}},Q=async()=>{try{m(!0);const t=await w("/tags/category/applicant");t.status===200?(k(t.data.data),m(!1)):(console.log("Failed"),m(!1))}catch(s){console.log(s)}},W=s=>{if(n.includes(s)){const c=n.filter(r=>r!==s);R(c)}else R([...n,s])},Y=H.object({searchTerm:H.string().min(1,"Search term is required")}),{register:Z,handleSubmit:ee,formState:{errors:B}}=de({resolver:async(s,t,c)=>{const r=await me(Y)(s,t,c);return console.log("Validation result:",r),r}}),se=s=>{const{searchTerm:t}=s;g([]),b(t),T(!0),l(1),$(o,D,t)},ae=()=>{b(""),T(!1),l(1),$(o,D)};return a.useEffect(()=>{Q();const s=setTimeout(()=>{$(o,D,y)},300);return()=>clearTimeout(s)},[o,D,_,y]),e.jsx(e.Fragment,{children:e.jsxs(A,{className:"d-flex flex-column gap-3",children:[e.jsx(u,{children:e.jsxs(A,{className:"d-flex flex-column gap-3",children:[e.jsxs(ge,{onSubmit:ee(se),children:[e.jsxs(Se,{children:[e.jsx(O,{type:"text",placeholder:"Search",...Z("searchTerm"),invalid:!!B.searchTerm}),e.jsx(v,{placement:"top",content:"Search",children:e.jsx(E,{type:"submit",color:"primary",children:e.jsx(x,{icon:re})})}),e.jsx(v,{placement:"top",content:"Refresh",children:e.jsx(E,{color:"primary",onClick:()=>ae(),children:e.jsx(x,{icon:ne})})})]}),B.searchTerm&&e.jsx(Ce,{invalid:!0,children:B.searchTerm.message})]}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:j.map(s=>e.jsx(v,{content:n.includes(s._id)?"Remove":"Add",children:e.jsxs(V,{onClick:()=>W(s._id),color:n.includes(s._id)?"success":"danger",className:"d-flex align-items-center justify-content-between",children:[s.name,n.includes(s._id)&&e.jsx(x,{icon:le,className:"ms-2"})]})},s._id))})]})}),e.jsx(u,{children:e.jsx(A,{children:e.jsx(Te,{children:e.jsx(ye,{children:e.jsxs(be,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[e.jsx(De,{children:e.jsxs(L,{children:[e.jsx(p,{children:e.jsx(x,{icon:oe})}),e.jsx(p,{children:"Email"}),e.jsx(p,{children:"Phone"}),e.jsx(p,{children:"Tags"}),e.jsx(p,{children:"Action"})]})}),e.jsx(Pe,{children:d.length>0?d.map(s=>e.jsxs(L,{children:[e.jsx(h,{children:e.jsxs("div",{children:[s.lastname,", ",s.firstname]})}),e.jsx(h,{children:e.jsx("div",{children:s.email})}),e.jsx(h,{children:e.jsx("div",{children:s.phone})}),e.jsx(h,{children:e.jsx("div",{className:"d-flex gap-2",children:s.tags.map((t,c)=>e.jsx(V,{color:"primary",children:j.find(r=>r._id===t)&&j.find(r=>r._id===t).name},c))})}),e.jsx(h,{children:e.jsx(v,{placement:"top",content:"Schedule Interview for this applicant",children:e.jsx(E,{onClick:()=>K(s._id),className:"btn btn-primary",size:"sm",children:e.jsx(x,{icon:ce})})})})]},s._id)):e.jsx(L,{children:e.jsx(h,{colSpan:5,children:"No data available"})})})]})})})})}),e.jsx(u,{children:e.jsx(F,{children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx(ie,{currentPage:o,totalPages:X,onPageChange:l})})})}),e.jsx(u,{children:e.jsx(F,{children:e.jsx(G,{isVisible:S,onClose:()=>I(!1),isDarkMode:N,applicantData:z})})})]})})};ve.propTypes={theme:f.string};export{ve as default};
