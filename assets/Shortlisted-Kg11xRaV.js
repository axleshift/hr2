const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-lZ1Wbwqx.js","./Calendar-CVmgXurr.js","./index-C66lSxRl.js","./react-router-dom-BnDDw25P.js","./react-BF1r7_8g.js","./react-dom-DgB6LS8R.js","./index-BR_Z4VyY.css"])))=>i.map(i=>d[i]);
import{r as e,R as a}from"./react-router-dom-BnDDw25P.js";import{F as t,I as r,J as i,f as s,X as n,r as c}from"./index.es-DzFLx6Av.js";import{m as l,a as o,F as d,j as h,l as m,g as p,k as u,w as f,i as g,v as C,p as S}from"./index-C66lSxRl.js";import"./ApplicantForm-wPyHt7Hy.js";import{f as b,b as y}from"./index-BVfmz2P_.js";import{C as j,a as v,b as w}from"./CModalHeader-17a_J2dP.js";import{C as x}from"./CModalTitle-UbKkKgfG.js";import{C as N}from"./CFormLabel-CnrvBD9C.js";import{C as T}from"./CContainer-DnAwT2KJ.js";import{C as _,a as D}from"./CRow-BC2jnXSR.js";import{C as E}from"./CFormSelect-Djofzsqi.js";import{C as k}from"./DefaultLayout-BlBcqPq3.js";import{C as F,a as A}from"./CCardBody-oEpd84ML.js";import{C as I,a as R,b as z,c as L,d as $,e as M}from"./CTable-C_OnMufT.js";import{C as P}from"./CInputGroup-CRsaNImm.js";import{C as V}from"./CFormInput-7yAhRXCl.js";import{C as O}from"./CTooltip-C7pMgaBa.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./Calendar-CVmgXurr.js";import"./AppPagination-CPEkAGYU.js";import"./CTabList-B_ov72Hs.js";import"./index.esm-CoSUUeCw.js";import"./isRTL-D5ORmfro.js";const q=a.lazy((()=>g((()=>import("./index-lZ1Wbwqx.js")),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url))),B=({isVisible:a,onClose:t,isDarkMode:r,applicantData:i})=>{const{addToast:s}=e.useContext(l),[n,c]=e.useState([]),[g,S]=e.useState([]),[V,O]=e.useState([]),[B,H]=e.useState(""),[G,W]=e.useState(new Date),[X,Y]=e.useState([]),[J,K]=e.useState(!1),[Q,U]=e.useState(!1),Z=async()=>{try{const e=await f(`/facilities/events/${B._id}/${G}`);200===e.status?S(e.data.data):S([])}catch(e){s("error",e.message,"Error")}},ee=async e=>{try{U(!0);const a=new FormData;a.append("applicantId",i._id);const t=await C(`/facilities/events/${e}/book`,a);200!==t.status&&201!==t.status||(s("success","Applicant has been booked to the event","Success"),Z()),U(!1)}catch(a){s("error",a.message,"Error")}};return e.useEffect((()=>{B&&(G&&Z(),(async()=>{try{const e=G.getMonth()+1,a=G.getFullYear(),t=await f(`/facilities/events/${B._id}/calendar-states?month=${e}&year=${a}`);c(t.data.data)}catch(e){s("error",e.message,"Error")}})()),(async()=>{try{const e=await f("/facilities/all");O(e.data.data)}catch(e){s("error",e.message,"Error")}})()}),[B,G]),o(d,{children:h(j,{visible:a,onClose:()=>{t(),H(""),S([]),c([])},size:"xl",backdrop:"static",children:[o(v,{children:h(x,{children:["Schedule an Event for ",i.firstname,", ",i.lastname]})}),o(w,{children:o(N,{children:h(T,{children:[h(_,{xs:{cols:1,gutter:2},md:{cols:2,gutter:4},children:[o(D,{children:h(E,{children:[o("option",{value:"",children:"Select Facility"}),V.map((e=>o("option",{value:e._id,onClick:()=>{H(e),W(new Date),c([])},children:e.name},e._id)))]})}),o(D,{children:o("p",{className:"text-muted",children:B?h(d,{children:[h("strong",{children:[B.location," "]}),o("br",{}),B.description]}):o("span",{className:"text-danger",children:"*Please select a facility first."})})})]}),o(_,{children:o(D,{children:o(k,{color:"warning",children:"Has Events"})})}),o(_,{className:"mb-3",children:o(D,{children:o(q,{onChange:e=>{const a=new Date(e.getTime()-6e4*e.getTimezoneOffset());W(a)},className:r?"calendar dark-mode":"calendar",defaultValue:new Date,tileClassName:({date:e})=>{const a=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0];return n.some((e=>e.startsWith(a)))?"has-events":null}})})}),"development"===m.env,o(_,{children:o(D,{children:o(F,{children:o(A,{children:o(_,{children:o(D,{children:h(I,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[o(R,{children:h(z,{children:[o(L,{children:"Facilty"}),o(L,{children:"Date"}),o(L,{children:"Time"}),o(L,{children:"Event"}),o(L,{children:"Capacity"}),o(L,{children:"Participants"}),o(L,{children:"Actions"})]})}),o($,{children:g.length>0?g.map((e=>h(z,{children:[o(M,{children:B.name}),o(M,{children:b(e.date)}),h(M,{children:[y(e.timeslot.start)," -"," ",y(e.timeslot.end)]}),o(M,{children:e.name}),o(M,{children:e.capacity}),o(M,{children:e.participants.length}),o(M,{children:o(P,{children:e.participants.some((e=>e.toString()===i._id.toString()))?o(p,{color:"success",disabled:!0,className:"text-white",size:"sm",onClick:()=>ee(e._id),children:"Booked"}):o(p,{color:"info",className:"text-white",size:"sm",onClick:()=>ee(e._id),children:Q?o(u,{color:"light",size:"sm"}):"Book"})})})]},e._id))):o(z,{children:h(M,{colSpan:"7",className:"text-center",children:["No events available. Please select a date from the"," ",o("span",{className:"text-info",children:"calendar"}),"."]})})})]})})})})})})})]})})})]})})};B.propTypes={isVisible:S.bool.isRequired,isDarkMode:S.bool,onClose:S.func.isRequired,applicantData:S.object};const H=()=>{const{addToast:a}=e.useContext(l),[m,u]=e.useState([]),[g,C]=e.useState(!1),[S,b]=e.useState({}),[y,j]=e.useState(""),[v,w]=e.useState(!1),[x,E]=e.useState([]),[q,H]=e.useState([]),[G,W]=e.useState(!1),[X,Y]=e.useState(1),[J,K]=e.useState(9),[Q,U]=e.useState(0),[Z,ee]=e.useState(0),[ae,te]=e.useState(!1);return e.useEffect((()=>{(async()=>{try{C(!0);const e=await f("/applicant/category/shortlisted");u(e.data.data),C(!1)}catch(e){C(!1),a("Error","An error occurred","danger")}})(),(async()=>{try{const e="applicant",t=await f(`/tags/category/${e}`);200===t.status?E(t.data.data):a("Error","An error occurred","danger")}catch(e){a("Error","An error occurred","danger")}})()}),[]),o(d,{children:h(T,{children:[o(_,{className:"mb-3",children:h(D,{children:[o("h2",{children:"Shortlisted"}),o("small",{children:"In this page, you can view and remove applicants from being qualified for the job."})]})}),o(_,{className:"mb-3",children:o(D,{children:o(N,{children:h(P,{children:[o(V,{type:"search",placeholder:"Search...","aria-label":"Search"}),o(p,{type:"button",color:"primary",children:o(t,{icon:r})}),o(p,{type:"button",color:"primary",children:o(t,{icon:i})})]})})})}),o(_,{className:"mb-3",children:o(D,{children:o(F,{children:o(A,{children:h(I,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[o(R,{children:h(z,{children:[o(L,{children:o("strong",{children:"#"})}),o(L,{children:o(t,{icon:s})}),o(L,{children:"Email"}),o(L,{children:"Phone"}),o(L,{children:"Tags"}),o(L,{children:"Actions"})]})}),o($,{children:g?o(z,{children:o(M,{colSpan:"6",children:"Loading..."})}):m.map(((e,a)=>h(z,{children:[o(M,{children:e._id}),h(M,{children:[e.lastname,", ",e.firstname]}),o(M,{children:e.email}),o(M,{children:e.phone}),o(M,{children:o("div",{className:"d-flex flex-wrap",children:e.tags.map(((e,a)=>{var t;const r=null==(t=x.find((a=>a._id===e)))?void 0:t.name;return o(k,{shape:"rounded-pill",color:"primary",className:"me-1 mb-1",children:r},a)}))})}),o(M,{children:h("div",{className:"d-flex gap-2",children:[o(O,{content:"Remove from list",placement:"top",children:o(p,{className:"btn btn-outline-danger",children:o(t,{icon:n})})}),o(O,{content:"Schedule an initial interview",placement:"top",children:o(p,{onClick:()=>{W(!0),b(e)},className:"btn btn-outline-success",children:o(t,{icon:c})})})]})})]},a)))})]})})})})}),o(_,{}),o(_,{children:o(D,{children:o(B,{isVisible:G,onClose:()=>W(!1),isDarkMode:!0,applicantData:S})})})]})})};export{H as default};
