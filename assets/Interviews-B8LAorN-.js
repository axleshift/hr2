import{r as e}from"./react-router-dom-BnDDw25P.js";import{F as r,B as i,C as t}from"./index.es-C3trJVa-.js";import{A as s,a,F as n,j as o,g as l,k as c,w as d}from"./index-D3tAU7AY.js";import{t as m,f as h,b as p}from"./index-DCO1bnrX.js";import u from"./EventForm-DfYKTyMC.js";import{C as f}from"./CContainer-BR4ie7fq.js";import{C as j,a as C}from"./CRow-BNYOpc2u.js";import{C as v}from"./CFormLabel-Dokt-hw2.js";import{C as g}from"./CInputGroup-DtFQFAYz.js";import{C as x}from"./CFormInput-8wEkUehS.js";import{C as w,a as y}from"./CCardBody-DiGo_jhZ.js";import{C as S,a as N,b,c as T,d as F,e as A}from"./CTable-BVtvZRLu.js";import{C as k}from"./CTooltip-DWX4KEIk.js";import"./react-BF1r7_8g.js";import"./react-dom-DgB6LS8R.js";import"./zod-B0zZW6rS.js";import"./react-hook-form-DB8hWBdy.js";import"./@hookform/resolvers/zod-1wp20Skh.js";import"./AppPagination-DqYd43Cv.js";import"./CModalHeader-B7MHNovK.js";import"./DefaultLayout-I7g3Xi84.js";import"./index.esm-D05r2ZOM.js";import"./isRTL-D5ORmfro.js";import"./CModalTitle-hcPyglLB.js";import"./CTabList-hCOZ6P49.js";import"./CFormSelect-DnZCZSEx.js";import"./CFormRange-CPhK_iVa.js";import"./CFormTextarea-CSUq8iIt.js";import"./ConfirmationDialog-CxLJJG5E.js";import"./CCardHeader-BImc97nz.js";const I=()=>{const{userInformation:I}=e.useContext(s),[z,L]=e.useState([]),[M,R]=e.useState(!1),[D,E]=e.useState(!1),[H,P]=e.useState("view"),[V,_]=e.useState({}),[B,G]=e.useState(1),[q,J]=e.useState(9),[K,Q]=e.useState(0),[U,W]=e.useState(0),X=async()=>{try{R(!0);const e=await d("/facilities/events/upcoming");200===e.status&&(L(e.data.data),R(!1))}catch(e){R(!1)}};return e.useEffect((()=>{const e=setTimeout((()=>{X()}),500);return()=>clearTimeout(e)}),[B,K,U]),a(n,{children:o(f,{children:[a(j,{className:"mb-3",children:o(C,{children:[a("h2",{children:"Interviews"}),o("small",{children:["In this page, you can ",a("span",{className:"text-info",children:"view"})," and"," ",a("span",{className:"text-warning",children:"edit"})," the list of upcoming interviews."]})]})}),a(j,{className:"mb-3",children:a(C,{children:a(v,{children:o(g,{children:[a(x,{type:"search",placeholder:"Search...","aria-label":"Search"}),a(l,{type:"button",color:"primary",children:a(r,{icon:i})}),a(l,{type:"button",color:"primary",onClick:()=>{X()},children:a(r,{icon:t})})]})})})}),a(j,{className:"mb-3",children:a(C,{children:a(w,{children:a(y,{children:o(S,{align:"middle",hover:!0,responsive:!0,striped:!0,children:[a(N,{children:o(b,{children:[a(T,{children:"#"}),a(T,{children:"Event"}),a(T,{children:"Author"}),a(T,{children:"Type"}),a(T,{children:"Date"}),a(T,{children:"Timeslot"}),a(T,{children:"Participants"}),a(T,{children:"Approved"}),a(T,{children:"Actions"})]})}),a(F,{children:M?a(b,{children:a(A,{colSpan:"12",children:a("div",{className:"d-flex justify-content-center",children:a(c,{variant:"grow",size:"sm"})})})}):0===z.length?a(b,{children:a(A,{colSpan:"12",children:a("div",{className:"d-flex justify-content-center",children:"No upcoming interviews found"})})}):z.map((e=>{var r,i,t;return o(b,{children:[a(k,{placement:"top",content:e._id,children:a(A,{children:m(e._id,10)})}),a(A,{children:e.name}),o(A,{children:[e.author.lastname,", ",e.author.firstname]}),a(A,{children:e.type}),a(A,{children:h(e.date)}),o(A,{children:[p(null==(r=e.timeslot)?void 0:r.start)," - ",p(null==(i=e.timeslot)?void 0:i.end)," "]}),a(A,{children:a("div",{className:"d-flex justify-content-center",children:null==(t=e.participants)?void 0:t.length})}),a(A,{children:e.isApproved.status?a("span",{className:"text-success",children:"Approved"}):a("small",{className:"text-danger",children:"Requires Approval"})}),a(A,{children:o("div",{className:"d-flex gap-2 flex-row",children:[a(l,{color:"info",size:"sm",onClick:()=>{P("view"),E(!0),_(e.timeslot)},children:"View"}),("admin"===I.role||"manager"===I.role)&&a(l,{color:"warning",size:"sm",onClick:()=>{P("edit"),E(!0),_(e.timeslot)},children:"Manage"})]})})]},e._id)}))})]})})})})}),a(j,{children:a(C,{children:a(u,{isVisible:D,onClose:()=>{P("view"),E(!1)},state:H,slot:V})})})]})})};export{I as default};
